<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UE 2.11 - Physique Fondamentale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #667eea;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
            margin-bottom: -3px;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Flashcards */
        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .flashcards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .flashcard {
            perspective: 1000px;
            height: 250px;
            cursor: pointer;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flashcard-front h3,
        .flashcard-back p {
            margin: 0;
            padding: 0;
            max-width: 100%;
            word-wrap: break-word;
        }

        .flashcard-back {
            background: white;
            color: #333;
            transform: rotateY(180deg);
            border: 2px solid #667eea;
        }

        .category-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .know-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
        }

        .know-btn:hover {
            background: #218838;
        }

        /* QCM */
        .question-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .question-text {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .option:hover {
            background: #e9ecef;
        }

        .option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .option label {
            cursor: pointer;
            flex-grow: 1;
        }

        .check-btn {
            margin-top: 15px;
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
        }

        .check-btn:hover {
            background: #5568d3;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            border-radius: 5px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            transition: width 0.3s;
        }

        /* Formules */
        .formula-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .formula-question {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .formula-builder {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            margin: 20px 0;
            min-height: 60px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #ccc;
        }

        .formula-element {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: 600;
            color: #667eea;
        }

        .formula-input {
            width: 60px;
            padding: 8px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
        }

        .formula-fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .formula-fraction input {
            width: 50px;
            padding: 5px;
            text-align: center;
            border: 1px solid #667eea;
            border-radius: 5px;
        }

        .fraction-line {
            width: 100%;
            height: 2px;
            background: #667eea;
        }

        .symbol-palette {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 15px 0;
        }

        .symbol-btn {
            padding: 10px 15px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .symbol-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Exercises */
        .exercise-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .exercise-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
        }

        .exercise-question {
            font-size: 1em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .calculation-area {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .calculation-label {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .calculation-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            resize: vertical;
            margin-bottom: 20px;
        }

        .result-area {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .result-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .result-label {
            font-weight: 600;
            font-size: 0.9em;
            color: #666;
        }

        .result-input {
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.1em;
            width: 150px;
        }

        .unit-input {
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.1em;
            width: 100px;
        }

        .show-solution-btn {
            padding: 12px 30px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
        }

        .show-solution-btn:hover {
            background: #218838;
        }

        .solution {
            margin-top: 20px;
            padding: 20px;
            background: #e8f5e9;
            border-left: 4px solid #28a745;
            border-radius: 5px;
            display: none;
        }

        .solution.show {
            display: block;
        }

        /* Saved Questions */
        .saved-item {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }

        .remove-btn {
            margin-top: 10px;
            padding: 8px 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .remove-btn:hover {
            background: #c82333;
        }

        /* Actions */
        .actions {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 25px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .flashcards-grid {
                grid-template-columns: 1fr;
            }

            .result-area {
                flex-direction: column;
                align-items: stretch;
            }

            .result-input, .unit-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì UE 2.11 - Physique Fondamentale</h1>
            <div class="subtitle">Manipulateurs en √âlectroradiologie M√©dicale - S1</div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('stats')">üìä Statistiques</button>
            <button class="tab" onclick="switchTab('flashcards')">üÉè Flashcards</button>
            <button class="tab" onclick="switchTab('qcm')">‚úÖ QCM</button>
            <button class="tab" onclick="switchTab('formules')">üìê Formules</button>
            <button class="tab" onclick="switchTab('exercises')">üßÆ Exercices</button>
            <button class="tab" onclick="switchTab('saved')">üíæ Sauvegard√©es</button>
        </div>

        <!-- STATISTICS TAB -->
        <div id="stats" class="tab-content active">
            <h2 style="margin-bottom: 20px;">üìà Vos Statistiques</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Flashcards ma√Ætris√©es</div>
                    <div class="stat-number" id="knownCardsCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Taux de r√©ussite QCM</div>
                    <div class="stat-number" id="qcmSuccessRate">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Formules ma√Ætris√©es</div>
                    <div class="stat-number" id="formulesSuccess">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Questions sauvegard√©es</div>
                    <div class="stat-number" id="savedCount">0</div>
                </div>
            </div>
            
            <div class="actions">
                <button class="action-btn" onclick="resetStats()">üîÑ R√©initialiser les stats</button>
                <button class="action-btn" onclick="exportStats()">üíæ Exporter les donn√©es</button>
                <button class="action-btn" onclick="document.getElementById('importFile').click()">üì• Importer les donn√©es</button>
                <input type="file" id="importFile" style="display: none;" accept=".json" onchange="importStats(event)">
            </div>
        </div>

        <!-- FLASHCARDS TAB -->
        <div id="flashcards" class="tab-content">
            <h2 style="margin-bottom: 20px;">üÉè Flashcards</h2>
            <div class="filters">
                <button class="filter-btn active" onclick="filterCards('all')">Toutes</button>
                <button class="filter-btn" onclick="filterCards('Radioactivit√©')">‚ò¢Ô∏è Radioactivit√©</button>
                <button class="filter-btn" onclick="filterCards('Rayonnements')">‚ö° Rayonnements</button>
                <button class="filter-btn" onclick="filterCards('√âlectromagn√©tisme')">üß≤ √âlectromagn√©tisme</button>
                <button class="filter-btn" onclick="filterCards('Ondes')">„Ä∞Ô∏è Ondes</button>
                <button class="filter-btn" onclick="filterCards('unknown')">‚ùì Non ma√Ætris√©es</button>
            </div>
            <div id="flashcardsContainer" class="flashcards-grid"></div>
        </div>

        <!-- QCM TAB -->
        <div id="qcm" class="tab-content">
            <h2 style="margin-bottom: 20px;">‚úÖ QCM</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="qcmProgress" style="width: 0%;">0/0 (0%)</div>
            </div>
            <div id="qcmContainer"></div>
        </div>

        <!-- FORMULES TAB -->
        <div id="formules" class="tab-content">
            <h2 style="margin-bottom: 20px;">üìê Formules √† Compl√©ter</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="formulesProgress" style="width: 0%;">0/0 (0%)</div>
            </div>
            <div id="formulesContainer"></div>
        </div>

        <!-- EXERCISES TAB -->
        <div id="exercises" class="tab-content">
            <h2 style="margin-bottom: 20px;">üßÆ Exercices de Calcul</h2>
            <div id="exercisesContainer"></div>
        </div>

        <!-- SAVED TAB -->
        <div id="saved" class="tab-content">
            <h2 style="margin-bottom: 20px;">üíæ Questions Sauvegard√©es</h2>
            <div id="savedList"></div>
        </div>
    </div>

    <script>
        // ==================== DATA ====================
        const flashcardsData = [
            { question: "Qu'est-ce que la radioactivit√© ?", answer: "Ph√©nom√®ne physique par lequel des noyaux atomiques instables se transforment spontan√©ment en √©mettant des rayonnements", category: "Radioactivit√©" },
            { question: "Quels sont les 3 types principaux de rayonnements ?", answer: "Alpha (Œ±), Beta (Œ≤) et Gamma (Œ≥)", category: "Rayonnements" },
            { question: "D√©finir la p√©riode radioactive (T)", answer: "Temps n√©cessaire pour que la moiti√© des noyaux radioactifs d'un √©chantillon se d√©sint√®grent", category: "Radioactivit√©" },
            { question: "Qu'est-ce que la constante radioactive (Œª) ?", answer: "Probabilit√© de d√©sint√©gration par unit√© de temps, inversement proportionnelle √† la p√©riode", category: "Radioactivit√©" },
            { question: "D√©finir l'activit√© d'une source radioactive", answer: "Nombre de d√©sint√©grations par seconde, mesur√©e en Becquerels (Bq)", category: "Radioactivit√©" },
            { question: "Qu'est-ce qu'un rayonnement ionisant ?", answer: "Rayonnement capable d'arracher des √©lectrons aux atomes, cr√©ant des ions", category: "Rayonnements" },
            { question: "Diff√©rence entre rayonnement Œ± et Œ≤", answer: "Œ±: noyau d'h√©lium (2 protons + 2 neutrons), Œ≤: √©lectron ou positron", category: "Rayonnements" },
            { question: "Qu'est-ce qu'un rayonnement gamma ?", answer: "Rayonnement √©lectromagn√©tique de tr√®s haute √©nergie √©mis par un noyau", category: "Rayonnements" },
            { question: "D√©finir le pouvoir de p√©n√©tration", answer: "Capacit√© d'un rayonnement √† traverser la mati√®re", category: "Rayonnements" },
            { question: "Quel rayonnement a le plus grand pouvoir de p√©n√©tration ?", answer: "Le rayonnement gamma (Œ≥)", category: "Rayonnements" },
            { question: "Qu'est-ce que la dose absorb√©e ?", answer: "√ânergie d√©pos√©e par les rayonnements par unit√© de masse, mesur√©e en Grays (Gy)", category: "Radioactivit√©" },
            { question: "D√©finir la fr√©quence d'une onde", answer: "Nombre d'oscillations par seconde, mesur√©e en Hertz (Hz)", category: "Ondes" },
            { question: "Qu'est-ce que la longueur d'onde (Œª) ?", answer: "Distance parcourue par l'onde pendant une p√©riode, mesur√©e en m√®tres", category: "Ondes" },
            { question: "Relation entre fr√©quence et p√©riode", answer: "T = 1/f ou f = 1/T", category: "Ondes" },
            { question: "Qu'est-ce que la c√©l√©rit√© d'une onde ?", answer: "Vitesse de propagation de l'onde, not√©e c", category: "Ondes" },
            { question: "Relation fondamentale pour les ondes", answer: "Œª = c √ó T ou c = Œª √ó f", category: "Ondes" },
            { question: "Vitesse de la lumi√®re dans le vide", answer: "c = 3 √ó 10‚Å∏ m/s", category: "Ondes" },
            { question: "Qu'est-ce qu'un champ √©lectrique ?", answer: "R√©gion de l'espace o√π s'exerce une force sur une charge √©lectrique", category: "√âlectromagn√©tisme" },
            { question: "Qu'est-ce qu'un champ magn√©tique ?", answer: "R√©gion de l'espace o√π s'exerce une force sur un aimant ou une charge en mouvement", category: "√âlectromagn√©tisme" },
            { question: "Loi de d√©croissance radioactive", answer: "N(t) = N‚ÇÄ √ó e^(-Œªt)", category: "Radioactivit√©" }
        ];

        const qcmData = [
            {
                question: "Quelle est l'unit√© de mesure de l'activit√© radioactive ?",
                options: ["Gray (Gy)", "Becquerel (Bq)", "Sievert (Sv)", "Curie (Ci)"],
                correct: [1, 3],
                explanation: "Le Becquerel (Bq) est l'unit√© SI. Le Curie (Ci) est une ancienne unit√© encore utilis√©e."
            },
            {
                question: "Quels rayonnements sont arr√™t√©s par une feuille de papier ?",
                options: ["Alpha", "Beta", "Gamma", "X"],
                correct: [0],
                explanation: "Les rayonnements alpha ont un faible pouvoir de p√©n√©tration."
            },
            {
                question: "Quelles sont les caract√©ristiques d'une onde √©lectromagn√©tique ?",
                options: ["Se propage dans le vide", "N√©cessite un milieu mat√©riel", "Transporte de l'√©nergie", "Vitesse d√©pend du milieu"],
                correct: [0, 2, 3],
                explanation: "Les ondes EM se propagent dans le vide √† c = 3√ó10‚Å∏ m/s, mais leur vitesse varie dans d'autres milieux."
            },
            {
                question: "Si la p√©riode T double, que devient la fr√©quence f ?",
                options: ["Elle double", "Elle est divis√©e par 2", "Elle reste constante", "Elle quadruple"],
                correct: [1],
                explanation: "f = 1/T, donc si T double, f est divis√©e par 2."
            },
            {
                question: "Quels facteurs affectent la d√©croissance radioactive ?",
                options: ["Temp√©rature", "Pression", "Constante radioactive Œª", "Nombre initial de noyaux"],
                correct: [2, 3],
                explanation: "La d√©croissance est un processus nucl√©aire, ind√©pendant des conditions externes."
            }
        ];

        const formulesData = [
            {
                question: "√âcrire la formule reliant la p√©riode T et la fr√©quence f",
                correct: ["T=1/f", "f=1/T", "T = 1/f", "f = 1/T"],
                explanation: "La p√©riode et la fr√©quence sont inversement proportionnelles"
            },
            {
                question: "√âcrire la formule de la c√©l√©rit√© des ondes (relation Œª, c, T)",
                correct: ["Œª=c*T", "Œª=c√óT", "Œª=T*c", "c=Œª/T", "T=Œª/c"],
                explanation: "La longueur d'onde est le produit de la c√©l√©rit√© par la p√©riode"
            },
            {
                question: "√âcrire la formule reliant Œª, c et f",
                correct: ["c=Œª*f", "c=Œª√óf", "c=f*Œª", "Œª=c/f", "f=c/Œª"],
                explanation: "C√©l√©rit√© = longueur d'onde √ó fr√©quence"
            },
            {
                question: "√âcrire la loi de d√©croissance radioactive N(t)",
                correct: ["N(t)=N‚ÇÄ*e^(-Œªt)", "N(t)=N‚ÇÄ*e^(-Œª*t)", "N(t)=N‚ÇÄe^(-Œªt)"],
                explanation: "N(t) = N‚ÇÄ √ó e^(-Œªt) o√π N‚ÇÄ est le nombre initial et Œª la constante"
            },
            {
                question: "√âcrire la relation entre T (p√©riode) et Œª (constante)",
                correct: ["T=ln2/Œª", "T=ln(2)/Œª", "Œª=ln2/T", "Œª=ln(2)/T"],
                explanation: "T = ln(2)/Œª ‚âà 0.693/Œª"
            }
        ];

        const exercisesData = [
            {
                title: "Calcul de fr√©quence",
                question: "Une onde a une p√©riode T = 0,002 s. Calculer sa fr√©quence f.",
                solution: "f = 1/T\nf = 1/0,002\nf = 500 Hz"
            },
            {
                title: "Calcul de longueur d'onde",
                question: "Une onde √©lectromagn√©tique a une fr√©quence f = 6 √ó 10¬π‚Å¥ Hz. Calculer sa longueur d'onde dans le vide (c = 3 √ó 10‚Å∏ m/s).",
                solution: "Œª = c/f\nŒª = (3 √ó 10‚Å∏)/(6 √ó 10¬π‚Å¥)\nŒª = 5 √ó 10‚Åª‚Å∑ m = 500 nm"
            },
            {
                title: "D√©croissance radioactive",
                question: "Un √©chantillon contient N‚ÇÄ = 10‚Å∂ noyaux radioactifs. La constante radioactive est Œª = 0,1 s‚Åª¬π. Calculer le nombre de noyaux restants apr√®s t = 5 s.",
                solution: "N(t) = N‚ÇÄ √ó e^(-Œªt)\nN(5) = 10‚Å∂ √ó e^(-0,1√ó5)\nN(5) = 10‚Å∂ √ó e^(-0,5)\nN(5) = 10‚Å∂ √ó 0,6065\nN(5) ‚âà 606 500 noyaux"
            },
            {
                title: "Calcul de p√©riode radioactive",
                question: "Une substance a une constante radioactive Œª = 0,0693 an‚Åª¬π. Calculer sa p√©riode T.",
                solution: "T = ln(2)/Œª\nT = 0,693/0,0693\nT = 10 ans"
            },
            {
                title: "Activit√© radioactive",
                question: "Un √©chantillon contient N = 2 √ó 10¬π‚Å∞ noyaux avec Œª = 0,05 s‚Åª¬π. Calculer l'activit√© A en Bq.",
                solution: "A = Œª √ó N\nA = 0,05 √ó 2 √ó 10¬π‚Å∞\nA = 10‚Åπ Bq = 1 GBq"
            }
        ];

        // ==================== STATE ====================
        let stats = {
            knownCards: [],
            qcmAnswered: 0,
            qcmCorrect: 0,
            formulesAnswered: 0,
            formulesCorrect: 0,
            savedQuestions: []
        };

        let currentFilter = 'all';
        let qcmAnswers = new Array(qcmData.length).fill(null);
        let formulesAnswers = new Array(formulesData.length).fill(null);

        // ==================== STORAGE ====================
        function saveStats() {
            localStorage.setItem('ue211_stats', JSON.stringify(stats));
        }

        function loadStats() {
            const saved = localStorage.getItem('ue211_stats');
            if (saved) {
                stats = JSON.parse(saved);
            }
        }

        function saveCardDifficulties() {
            const difficulties = {};
            flashcardsData.forEach((card, index) => {
                difficulties[index] = stats.knownCards.includes(index) ? 'known' : 'unknown';
            });
            localStorage.setItem('ue211_difficulties', JSON.stringify(difficulties));
        }

        function loadCardDifficulties() {
            const saved = localStorage.getItem('ue211_difficulties');
            if (saved) {
                const difficulties = JSON.parse(saved);
                stats.knownCards = Object.keys(difficulties)
                    .filter(key => difficulties[key] === 'known')
                    .map(key => parseInt(key));
            }
        }

        function resetStats() {
            if (confirm('Voulez-vous vraiment r√©initialiser toutes les statistiques ?')) {
                stats = {
                    knownCards: [],
                    qcmAnswered: 0,
                    qcmCorrect: 0,
                    formulesAnswered: 0,
                    formulesCorrect: 0,
                    savedQuestions: []
                };
                qcmAnswers = new Array(qcmData.length).fill(null);
                formulesAnswers = new Array(formulesData.length).fill(null);
                localStorage.removeItem('ue211_stats');
                localStorage.removeItem('ue211_difficulties');
                init();
            }
        }

        function exportStats() {
            const data = {
                stats: stats,
                qcmAnswers: qcmAnswers,
                formulesAnswers: formulesAnswers,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ue211_stats_' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importStats(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        stats = data.stats;
                        qcmAnswers = data.qcmAnswers || new Array(qcmData.length).fill(null);
                        formulesAnswers = data.formulesAnswers || new Array(formulesData.length).fill(null);
                        saveStats();
                        saveCardDifficulties();
                        init();
                        alert('Donn√©es import√©es avec succ√®s !');
                    } catch (error) {
                        alert('Erreur lors de l\'importation des donn√©es');
                    }
                };
                reader.readAsText(file);
            }
        }

        // ==================== TABS ====================
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // ==================== STATS ====================
        function updateStats() {
            document.getElementById('knownCardsCount').textContent = stats.knownCards.length + '/' + flashcardsData.length;
            
            const qcmRate = stats.qcmAnswered > 0 ? Math.round((stats.qcmCorrect / stats.qcmAnswered) * 100) : 0;
            document.getElementById('qcmSuccessRate').textContent = qcmRate + '%';
            
            const formRate = stats.formulesAnswered > 0 ? Math.round((stats.formulesCorrect / stats.formulesAnswered) * 100) : 0;
            document.getElementById('formulesSuccess').textContent = formRate + '%';
            
            document.getElementById('savedCount').textContent = stats.savedQuestions.length;
        }

        // ==================== FLASHCARDS ====================
        function createFlashcards() {
            const container = document.getElementById('flashcardsContainer');
            const filteredCards = flashcardsData
                .map((card, index) => ({ ...card, index }))
                .filter(card => {
                    if (currentFilter === 'all') return true;
                    if (currentFilter === 'unknown') return !stats.knownCards.includes(card.index);
                    return card.category === currentFilter;
                });

            container.innerHTML = filteredCards.map(card => `
                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <div class="category-badge">${card.category}</div>
                            <h3>${card.question}</h3>
                        </div>
                        <div class="flashcard-back">
                            <p>${card.answer}</p>
                            <button class="know-btn" onclick="markAsKnown(${card.index}, event)">
                                ${stats.knownCards.includes(card.index) ? '‚úì Ma√Ætris√©e' : 'Je connais'}
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function flipCard(card) {
            if (!event.target.classList.contains('know-btn')) {
                card.classList.toggle('flipped');
            }
        }

        function markAsKnown(index, event) {
            event.stopPropagation();
            const idx = stats.knownCards.indexOf(index);
            if (idx > -1) {
                stats.knownCards.splice(idx, 1);
            } else {
                stats.knownCards.push(index);
            }
            saveStats();
            saveCardDifficulties();
            updateStats();
            createFlashcards();
        }

        function filterCards(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            createFlashcards();
        }

        // ==================== QCM ====================
        function createQCM() {
            document.getElementById('qcmContainer').innerHTML = qcmData.map((q, qIndex) => `
                <div class="question-card">
                    <div class="question-text">${qIndex + 1}. ${q.question}</div>
                    ${q.options.map((opt, oIndex) => `
                        <div class="option">
                            <input type="checkbox" 
                                   id="q${qIndex}_o${oIndex}" 
                                   data-question="${qIndex}" 
                                   data-option="${oIndex}"
                                   ${qcmAnswers[qIndex] !== null ? 'disabled' : ''}>
                            <label for="q${qIndex}_o${oIndex}">${opt}</label>
                        </div>
                    `).join('')}
                    <button class="check-btn" onclick="checkQCM(${qIndex})" ${qcmAnswers[qIndex] !== null ? 'disabled' : ''}>
                        V√©rifier
                    </button>
                    <div class="explanation" id="qcm-explanation-${qIndex}"></div>
                </div>
            `).join('');
            updateQCMProgress();
        }

        function checkQCM(qIndex) {
            const checkboxes = document.querySelectorAll(`input[data-question="${qIndex}"]`);
            const selected = Array.from(checkboxes)
                .map((cb, i) => cb.checked ? i : -1)
                .filter(i => i !== -1);
            
            const correct = qcmData[qIndex].correct;
            const isCorrect = selected.length === correct.length && 
                             selected.every(s => correct.includes(s));
            
            const explanation = document.getElementById(`qcm-explanation-${qIndex}`);
            
            if (qcmAnswers[qIndex] === null) {
                stats.qcmAnswered++;
                if (isCorrect) {
                    stats.qcmCorrect++;
                } else {
                    if (!stats.savedQuestions.some(q => q.text === qcmData[qIndex].question)) {
                        stats.savedQuestions.push({
                            type: 'qcm',
                            text: qcmData[qIndex].question,
                            answer: correct.map(i => qcmData[qIndex].options[i]).join(', '),
                            explanation: qcmData[qIndex].explanation
                        });
                    }
                }
                qcmAnswers[qIndex] = selected;
                saveStats();
                updateStats();
                updateQCMProgress();
                updateSavedList();
            }
            
            if (isCorrect) {
                explanation.innerHTML = `<strong style="color: green;">‚úì Correct !</strong> ${qcmData[qIndex].explanation}`;
            } else {
                const correctAnswers = correct.map(i => qcmData[qIndex].options[i]).join(', ');
                explanation.innerHTML = `<strong style="color: red;">‚úó Incorrect</strong> Les bonnes r√©ponses sont : ${correctAnswers}<br>${qcmData[qIndex].explanation}`;
            }
            explanation.classList.add('show');
            
            checkboxes.forEach(cb => cb.disabled = true);
            document.querySelector(`#qcm-explanation-${qIndex}`).parentElement.querySelector('.check-btn').disabled = true;
        }

        function updateQCMProgress() {
            const answered = qcmAnswers.filter(a => a !== null).length;
            const percent = Math.round((answered / qcmData.length) * 100);
            const fill = document.getElementById('qcmProgress');
            fill.style.width = percent + '%';
            fill.textContent = `${answered}/${qcmData.length} (${percent}%)`;
        }

        // ==================== FORMULES ====================
        function createFormules() {
            document.getElementById('formulesContainer').innerHTML = formulesData.map((f, fIndex) => `
                <div class="formula-card">
                    <div class="formula-question">${fIndex + 1}. ${f.question}</div>
                    
                    <div class="symbol-palette">
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '=')"> = </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '+')"> + </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '-')"> ‚àí </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '*')"> √ó </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '/')"> √∑ </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '^')"> ^ </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, '(')"> ( </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, ')')"> ) </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, 'Œª')"> Œª </button>
                        <button class="symbol-btn" onclick="addToFormula(${fIndex}, 'e')"> e </button>
                        <button class="symbol-btn" onclick="addInput(${fIndex})">üìù Variable</button>
                        <button class="symbol-btn" onclick="clearFormula(${fIndex})">üóëÔ∏è Effacer</button>
                    </div>
                    
                    <div class="formula-builder" id="formula-${fIndex}"></div>
                    
                    <button class="check-btn" onclick="checkFormula(${fIndex})">V√©rifier</button>
                    <div class="explanation" id="formula-explanation-${fIndex}"></div>
                </div>
            `).join('');
            updateFormulesProgress();
        }

        function addToFormula(fIndex, symbol) {
            const builder = document.getElementById(`formula-${fIndex}`);
            const element = document.createElement('span');
            element.className = 'formula-element';
            element.textContent = symbol;
            element.onclick = function() { this.remove(); };
            builder.appendChild(element);
        }

        function addInput(fIndex) {
            const builder = document.getElementById(`formula-${fIndex}`);
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'formula-input';
            input.placeholder = 'x';
            builder.appendChild(input);
        }

        function clearFormula(fIndex) {
            document.getElementById(`formula-${fIndex}`).innerHTML = '';
        }

        function getFormulaText(fIndex) {
            const builder = document.getElementById(`formula-${fIndex}`);
            let text = '';
            
            builder.childNodes.forEach(node => {
                if (node.nodeType === Node.ELEMENT_NODE) {
                    if (node.classList.contains('formula-element')) {
                        let char = node.textContent.trim();
                        const conversions = { '√ó': '*', '√∑': '/', '‚àí': '-' };
                        text += conversions[char] || char;
                    } else if (node.classList.contains('formula-input')) {
                        text += node.value;
                    }
                }
            });
            
            return text;
        }

        function checkFormula(fIndex) {
            const userFormula = getFormulaText(fIndex);
            const correctFormulas = formulesData[fIndex].correct;
            
            const normalize = (str) => {
                return str.replace(/\s/g, '').toLowerCase()
                    .replace(/[√ó¬∑]/g, '*')
                    .replace(/[√∑]/g, '/')
                    .replace(/e-([a-zŒªŒºœÄ])/g, 'e^-$1');
            };
            
            const isCorrect = correctFormulas.some(cf => normalize(userFormula) === normalize(cf));
            
            const explanation = document.getElementById(`formula-explanation-${fIndex}`);
            
            if (formulesAnswers[fIndex] === null) {
                stats.formulesAnswered++;
                if (isCorrect) {
                    stats.formulesCorrect++;
                } else {
                    if (!stats.savedQuestions.some(q => q.text === formulesData[fIndex].question)) {
                        stats.savedQuestions.push({
                            type: 'formule',
                            text: formulesData[fIndex].question,
                            answer: formulesData[fIndex].correct[0],
                            explanation: formulesData[fIndex].explanation
                        });
                    }
                }
                formulesAnswers[fIndex] = userFormula;
                saveStats();
                updateStats();
                updateFormulesProgress();
                updateSavedList();
            }
            
            if (isCorrect) {
                explanation.innerHTML = `<strong style="color: green;">‚úì Correct !</strong> ${formulesData[fIndex].explanation}`;
            } else {
                explanation.innerHTML = `<strong style="color: red;">‚úó Incorrect</strong> La formule correcte est : ${formulesData[fIndex].correct[0]}<br>${formulesData[fIndex].explanation}`;
            }
            explanation.classList.add('show');
        }

        function updateFormulesProgress() {
            const answered = formulesAnswers.filter(a => a !== null).length;
            const percent = Math.round((answered / formulesData.length) * 100);
            const fill = document.getElementById('formulesProgress');
            fill.style.width = percent + '%';
            fill.textContent = `${answered}/${formulesData.length} (${percent}%)`;
        }

        // ==================== EXERCISES ====================
        function createExercises() {
            document.getElementById('exercisesContainer').innerHTML = exercisesData.map((ex, index) => `
                <div class="exercise-card">
                    <div class="exercise-title">üìê ${ex.title}</div>
                    <div class="exercise-question">${ex.question}</div>
                    
                    <div class="calculation-area">
                        <div class="calculation-label">üí≠ Zone de calcul :</div>
                        <textarea class="calculation-input" 
                                  id="calc-${index}" 
                                  placeholder="√âcrivez vos calculs ici...&#10;Exemple :&#10;f = 1/T&#10;f = 1/0,002&#10;f = 500"></textarea>
                        
                        <div class="result-area">
                            <div class="result-group">
                                <div class="result-label">R√©sultat :</div>
                                <input type="text" class="result-input" id="result-${index}" placeholder="ex: 500">
                            </div>
                            <div class="result-group">
                                <div class="result-label">Unit√© :</div>
                                <input type="text" class="unit-input" id="unit-${index}" placeholder="ex: Hz">
                            </div>
                        </div>
                    </div>
                    
                    <button class="show-solution-btn" onclick="toggleSolution(${index})">
                        üí° Voir la solution
                    </button>
                    <div class="solution" id="solution-${index}">
                        <strong>Solution :</strong><br>
                        ${ex.solution.replace(/\n/g, '<br>')}
                    </div>
                </div>
            `).join('');
        }

        function toggleSolution(index) {
            const solution = document.getElementById(`solution-${index}`);
            solution.classList.toggle('show');
        }

        // ==================== SAVED QUESTIONS ====================
        function updateSavedList() {
            const container = document.getElementById('savedList');
            if (stats.savedQuestions.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">Aucune question sauvegard√©e pour le moment.</p>';
                return;
            }
            
            container.innerHTML = stats.savedQuestions.map((q, index) => `
                <div class="saved-item">
                    <strong>${q.type.toUpperCase()}</strong><br>
                    <div style="margin: 10px 0;">${q.text}</div>
                    <div style="color: green;"><strong>R√©ponse:</strong> ${q.answer}</div>
                    ${q.explanation ? `<div style="margin-top: 5px; font-size: 0.9em;">${q.explanation}</div>` : ''}
                    <button class="remove-btn" onclick="removeSaved(${index})">Supprimer</button>
                </div>
            `).join('');
        }

        function removeSaved(index) {
            stats.savedQuestions.splice(index, 1);
            saveStats();
            updateStats();
            updateSavedList();
        }

        // ==================== INITIALIZATION ====================
        function init() {
            loadStats();
            updateStats();
            createFlashcards();
            createQCM();
            createFormules();
            createExercises();
            updateSavedList();
        }

        // Start the app
        loadCardDifficulties();
        init();
    </script>
</body>
</html>