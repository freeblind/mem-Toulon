<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD3 - Syst√®me d'Apprentissage - Physiologie UE 2.5 S1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        h2 {
            color: #764ba2;
            font-size: 1.3em;
            font-weight: normal;
        }

        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 15px 35px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .mode-btn:not(.active) {
            background: white;
            color: #667eea;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .mode-content {
            display: none;
        }

        .mode-content.active {
            display: block;
        }

        /* FLASHCARDS MODE */
        .controls {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
        }

        .save-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .save-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            color: white;
        }

        .export-btn { background: #28a745; }
        .import-btn { background: #17a2b8; }
        .reset-btn { background: #dc3545; }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .stats {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            background: white;
            height: 100%;
            transition: width 0.5s;
            border-radius: 5px;
        }

        .flashcard-container {
            perspective: 1000px;
            margin: 30px auto;
            max-width: 800px;
        }

        .flashcard {
            background: white;
            border-radius: 15px;
            padding: 40px;
            min-height: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .card-category {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .card-content {
            font-size: 1.3em;
            line-height: 1.6;
            color: #333;
        }

        .card-question {
            font-weight: 600;
            color: #667eea;
        }

        .card-answer {
            color: #555;
        }

        .card-answer ul, .card-answer ol {
            text-align: left;
            margin-top: 15px;
        }

        .card-answer li {
            margin: 8px 0;
        }

        .evaluation-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .eval-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .eval-acquired { background: #28a745; }
        .eval-review { background: #ffc107; }
        .eval-not-acquired { background: #dc3545; }

        .eval-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 15px;
        }

        .nav-btn {
            padding: 12px 25px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .nav-btn:hover:not(:disabled) {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* TEST MODE */
        .test-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .question-block {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .question-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .option {
            padding: 12px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option input {
            margin-right: 10px;
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .fill-input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            width: 100%;
            max-width: 400px;
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .matching-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .matching-item {
            padding: 12px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .matching-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .matching-item.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            width: 100%;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            border-radius: 5px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .submit-test {
            margin-top: 30px;
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .submit-test:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .test-results {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            display: none;
        }

        .test-results.show {
            display: block;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .score-text {
            color: white;
            font-size: 3em;
            font-weight: bold;
        }

        .result-message {
            font-size: 1.5em;
            margin: 20px 0;
            color: #333;
        }

        .retry-btn {
            padding: 15px 40px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.5em; }
            h2 { font-size: 1.1em; }
            .flashcard { min-height: 350px; padding: 25px; }
            .card-content { font-size: 1.1em; }
            .matching-container { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .no-cards-message {
            background: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .no-cards-message h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö TD N¬∞3 - Syst√®me d'Apprentissage</h1>
            <h2>Physiologie g√©n√©rale, physiologie, s√©miologie et pathologies ost√©oarticulaires</h2>
            <h2>UE 2.5 S1 - 7 OCTOBRE 2025</h2>
            
            <div class="mode-selector">
                <button class="mode-btn active" onclick="switchMode('flashcards')">üé¥ Mode Flashcards</button>
                <button class="mode-btn" onclick="switchMode('test')">üìù Mode Test</button>
            </div>
        </header>

        <!-- MODE FLASHCARDS -->
        <div id="flashcards-mode" class="mode-content active">
            <div class="controls">
                <h3 style="margin-bottom: 15px; color: #667eea;">üéØ Filtres</h3>
                <div class="filters">
                    <button class="filter-btn active" onclick="filterCards('all')">Toutes les cartes</button>
                    <button class="filter-btn" onclick="filterCards('new')">Nouvelles cartes</button>
                    <button class="filter-btn" onclick="filterCards('review')">√Ä r√©viser</button>
                    <button class="filter-btn" onclick="filterCards('acquired')">Acquises</button>
                </div>
                
                <h3 style="margin: 20px 0 15px; color: #667eea;">üíæ Gestion</h3>
                <div class="save-buttons">
                    <button class="save-btn export-btn" onclick="exportProgress()">üì• Exporter</button>
                    <button class="save-btn import-btn" onclick="document.getElementById('importFile').click()">üì§ Importer</button>
                    <button class="save-btn reset-btn" onclick="resetProgress()">üîÑ R√©initialiser</button>
                    <input type="file" id="importFile" accept=".json" onchange="importProgress(event)">
                </div>
            </div>

            <div class="stats">
                <h3 style="margin-bottom: 10px;">üìä Statistiques</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="total-cards">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="acquired-cards">0</span>
                        <span class="stat-label">Acquises</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="review-cards">0</span>
                        <span class="stat-label">√Ä revoir</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="not-acquired-cards">0</span>
                        <span class="stat-label">Non acquises</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="new-cards">0</span>
                        <span class="stat-label">Nouvelles</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <p style="text-align: center; margin-top: 10px; font-size: 0.9em;" id="progress-text">0% compl√©t√©</p>
            </div>

            <div id="flashcard-display"></div>
        </div>

        <!-- MODE TEST -->
        <div id="test-mode" class="mode-content">
            <div class="test-container" id="test-container"></div>
            <div class="test-results" id="test-results"></div>
        </div>
    </div>

    <script>
        // Base de donn√©es des flashcards
        const flashcardsData = [
            // PARTIE 1: PHYSIOLOGIE GENERALE - D√©finitions
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'un Syst√®me ou Appareil ?",
                answer: "Ensemble d'organes qui accomplissent en commun une activit√© essentielle de l'organisme"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce que l'Hom√©ostasie ?",
                answer: "Processus de r√©gulation par lequel l'organisme maintient la stabilit√© des constantes dans les limites des valeurs normales (√©quilibre)"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce que l'Apoptose ?",
                answer: "Mort programm√©e de la cellule (autodestruction)"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'un Anticorps ?",
                answer: "Prot√©ine complexe s√©cr√©t√©e par les cellules immunes (lymphocyte B) et capables d'√©tablir une liaison avec un antig√®ne - Immunoglobuline"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'un Organe ?",
                answer: "Ensemble de tissus ayant une ou plusieurs fonctions sp√©cifiques"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'un Antig√®ne ?",
                answer: "Toute substance √©trang√®re √† l'organisme d√©clenchant une r√©ponse immunitaire (anticorps)"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'un Tissu ?",
                answer: "Ensemble de cellules reli√©es entre elles par une trame organique"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce qu'une Cellule ?",
                answer: "Unit√© structurale, fonctionnelle et reproductrice de tous les organismes vivants"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Qu'est-ce que la Phagocytose ?",
                answer: "Ph√©nom√®ne par lequel certaines cellules (polynucl√©aires et macrophages) ont le pouvoir de capturer et d√©truire les particules √©trang√®res en plusieurs √©tapes : adh√©sion ‚Äì ingestion - digestion"
            },
            
            // Tissus
            {
                category: "Tissus",
                question: "Quel tissu a un r√¥le dans la locomotion et la contraction ?",
                answer: "Le tissu MUSCULAIRE : Cellules jointives multinucl√©√©es - Muscles stri√©s (volont√© ‚Äì muscles du squelette), lisses (involontaire ‚Äì intestin) et cardiaque (stri√© involontaire)"
            },
            {
                category: "Tissus",
                question: "Quel tissu a un r√¥le dans le transport, la r√©ception, la conversion et le stockage de l'information ?",
                answer: "Le tissu NERVEUX : 2 syst√®mes cellulaires : neurones (10%) et gliocytes (90% - sorte de conjonctif du syst√®me nerveux ‚Äì ne v√©hiculent aucun influx) ‚Äì nerf, moelle √©pini√®re, cerveau"
            },
            {
                category: "Tissus",
                question: "Quel tissu a un r√¥le de soutien et d'isolant ?",
                answer: "Le tissu CONJONCTIF : Cellules et matrice extracellulaire (fibres : collag√®nes, √©lastiques, r√©ticulaires + substance caract√©ristique) - Os, cartilage, vaisseau, poumon, bronche, foie, rate, GG, derme, tendons, corn√©e, tissu adipeux"
            },
            {
                category: "Tissus",
                question: "Quel tissu a un r√¥le de protection, d'absorption, de sensibilit√© et de s√©cr√©tion ?",
                answer: "Le tissu EPITHELIAL : protection, absorption (intestin), sensibilit√© (b√¢tonnets et c√¥nes dans l'≈ìil) et s√©cr√©tion (avasculaire mais innerv√©) - compose le parenchyme - Trach√©e, √©piderme, surface tubes et sacs des appareils digestif, respiratoire, reproductif et urinaires"
            },
            
            // LEC/LIC
            {
                category: "Physiologie G√©n√©rale",
                question: "Que signifient les abr√©viations LEC et LIC ?",
                answer: "LEC = Liquide Extra Cellulaire<br>LIC = Liquide Intra Cellulaire"
            },
            {
                category: "Physiologie G√©n√©rale",
                question: "Quelle est la fonction du LEC (Liquide Extra Cellulaire) ?",
                answer: "Permet les √©changes m√©taboliques : transfert nutriments - O2 vs CO2 ‚Äì d√©chets"
            },
            
            // Syst√®mes et appareils
            {
                category: "Syst√®mes et Appareils",
                question: "Quel syst√®me/appareil est compos√© de la peau et des phan√®res ? Quelle est sa fonction ?",
                answer: "Le syst√®me T√âGUMENTAIRE<br>Fonction principale : Protection (barri√®re)"
            },
            {
                category: "Syst√®mes et Appareils",
                question: "Quel syst√®me/appareil est compos√© des glandes ? Quelle est sa fonction ?",
                answer: "Le syst√®me ENDOCRINIEN<br>Fonction principale : R√©gulation"
            },
            {
                category: "Syst√®mes et Appareils",
                question: "Quel syst√®me/appareil est compos√© des organes g√©nitaux ? Quelle est sa fonction ?",
                answer: "L'appareil REPRODUCTEUR<br>Fonction principale : Procr√©ation"
            },
            {
                category: "Syst√®mes et Appareils",
                question: "Quel syst√®me/appareil est compos√© de cellules immuno-comp√©tentes ? Quelle est sa fonction ?",
                answer: "Le syst√®me IMMUNITAIRE<br>Fonction principale : D√©fense"
            },
            
            // Immunit√©
            {
                category: "Immunologie",
                question: "Quels sont les 2 types d'immunit√© ?",
                answer: "<b>1. Immunit√© inn√©e :</b> m√©canisme rapide et non sp√©cifique ‚Äì 1√®re ligne de d√©fense ‚Äì r√©action inflammatoire (rougeur ‚Äì chaleur ‚Äì douleur ‚Äì ≈ìd√®me - +/- hyperthermie)<br><br><b>2. Immunit√© adaptative :</b> m√©canisme sp√©cifique - + lente √† se mettre en place mais + rapide et efficace lors de la seconde rencontre avec le m√™me agent pathog√®ne (m√©moire immunitaire ‚Äì vaccination)<br><br>Les 2 immunit√©s interagissent de mani√®re coordonn√©e"
            },
            {
                category: "Immunologie",
                question: "√Ä quel type d'immunit√© contribuent les Lymphocytes T et B ?",
                answer: "Immunit√© ADAPTATIVE<br>Lymphocytes T : Coordination de l'immunit√© adaptative, destruction des cellules infect√©es<br>Lymphocytes B : Production d'anticorps"
            },
            {
                category: "Immunologie",
                question: "√Ä quel type d'immunit√© contribuent les Cellules dendritiques ?",
                answer: "Immunit√© INN√âE<br>R√¥le : Phagocytose des pathog√®nes, cellule pr√©sentatrice d'antig√®ne"
            },
            {
                category: "Immunologie",
                question: "√Ä quel type d'immunit√© contribuent les Polynucl√©aires neutrophiles ?",
                answer: "Immunit√© INN√âE<br>R√¥le : Phagocytose des pathog√®nes"
            },
            {
                category: "Immunologie",
                question: "√Ä quel type d'immunit√© contribuent les Mastocytes ?",
                answer: "Immunit√© INN√âE<br>R√¥le : Reconna√Æt l'antig√®ne, s√©cr√®te des m√©diateurs qui favorise l'inflammation"
            },
            {
                category: "Immunologie",
                question: "√Ä quel type d'immunit√© contribuent les Macrophages ?",
                answer: "Immunit√© INN√âE<br>R√¥le : Phagocytose des pathog√®nes, cellule pr√©sentatrice d'antig√®ne"
            },
            
            // Hom√©ostasie
            {
                category: "Hom√©ostasie",
                question: "Quels sont les 2 m√©canismes de r√©gulation permettant de maintenir l'hom√©ostasie ?",
                answer: "<b>1. M√©canisme de r√©troaction positive :</b> r√©ponse amplifiant le mouvement d'une variable (Ex: Contractions ut√©rines pendant l'accouchement)<br>Si une variable augmente ‚Üí le m√©canisme fait augmenter cette variable<br><br><b>2. M√©canisme de r√©troaction n√©gative :</b> r√©ponse inverse du mouvement d'une variable (Ex: Thermor√©gulation, r√©gulation TA, glyc√©mie)<br>Si une variable augmente ‚Üí le m√©canisme la diminue<br>Si une variable diminue ‚Üí le m√©canisme la ram√®ne √† l'√©tat de base"
            },
            {
                category: "Hom√©ostasie",
                question: "Quels sont les 3 composants de l'hom√©ostasie ?",
                answer: "1. Capteur / r√©cepteurs<br>2. Centre de contr√¥le<br>3. Effecteur"
            },
            
            // Stades de grossesse
            {
                category: "D√©veloppement",
                question: "Comment appelle-t-on l'enfant √† na√Ætre au moment de la f√©condation ?",
                answer: "ZYGOTE"
            },
            {
                category: "D√©veloppement",
                question: "Comment appelle-t-on l'enfant √† na√Ætre de la 1√®re division cellulaire jusqu'√† la nidation et l'organog√©n√®se ?",
                answer: "EMBRYON"
            },
            {
                category: "D√©veloppement",
                question: "Comment appelle-t-on l'enfant √† na√Ætre √† partir de la 9√®me semaine de grossesse ?",
                answer: "FOETUS"
            },
            
            // PARTIE 2: PHYSIOLOGIE OSTEO-ARTICULAIRE
            {
                category: "Squelette",
                question: "Quelles sont les 2 parties du squelette et que composent-elles ?",
                answer: "<b>1. Squelette AXIAL :</b> cr√¢ne ‚Äì rachis (prot√®ge la moelle √©pini√®re) ‚Äì cage thoracique (prot√®ge le c≈ìur et les poumons)<br><br><b>2. Squelette APPENDICULAIRE :</b> membres sup√©rieurs et inf√©rieurs"
            },
            
            // Types d'os
            {
                category: "Os - Types",
                question: "Quelles sont les caract√©ristiques d'un os PLAT ?",
                answer: "- Prot√®ge les organes internes<br>- Pas de fonctions locomotrices<br>- Nombreuses insertions musculaires<br>Exemples : cr√¢ne, sternum, scapula, c√¥te"
            },
            {
                category: "Os - Types",
                question: "Quelles sont les caract√©ristiques d'un os COURT ?",
                answer: "- Aussi long que large<br>- Os massif, spongieux, compact<br>- Plusieurs surfaces articulaires<br>Exemples : tarse, carpe"
            },
            {
                category: "Os - Types",
                question: "Quelles sont les caract√©ristiques d'un os LONG ?",
                answer: "- Plus long que large<br>- Comporte 1 diaphyse et 2 m√©taphyses et √©piphyses<br>- Canal m√©dullaire avec une corticale solide<br>Exemples : f√©mur, fibula, tibia, hum√©rus, radius, ulna"
            },
            {
                category: "Os - Types",
                question: "Quelles sont les caract√©ristiques d'un os S√âSAMO√èDE ?",
                answer: "- Int√©gr√© au tendon<br>- Prot√®ge les tendons des tensions et usures<br>Exemple : patella (rotule)"
            },
            
            // Composition chimique os
            {
                category: "Os - Composition",
                question: "Quels sont les 2 constituants chimiques de l'os et leurs proportions ?",
                answer: "<b>1. Oss√©ine (1/3) :</b> mati√®re organique (prot√©ine), forme des trames souples sur lesquelles viennent se d√©poser les sels min√©raux ‚Äì tissu conjonctif<br><br><b>2. Sels min√©raux (2/3) :</b> (sels min√©raux de calcium) : donnent √† l'os sa rigidit√©"
            },
            
            // Structure os long
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que l'√âPIPHYSE d'un os long ?",
                answer: "Les extr√©mit√©s de l'os, elles contiennent surtout de l'os spongieux"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que la M√âTAPHYSE d'un os long ?",
                answer: "Zone entre la diaphyse et l'√©piphyse"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que la DIAPHYSE d'un os long ?",
                answer: "La partie centrale, un cylindre de tissus osseux compacts dont la cavit√© est remplie de moelle"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que le CARTILAGE ARTICULAIRE ?",
                answer: "Recouvre l'extr√©mit√© de l'os, tissu conjonctif fibreux qui emp√™che les os de se frotter entre eux. Il absorbe les chocs."
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que l'OS SPONGIEUX ?",
                answer: "Petits fragments d'os semblables √† des √©pingles dispos√©s comme un nid d'abeilles. R√©duit le poids de l'os tout en lui procurant une solidit√©."
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que l'OS COMPACT ?",
                answer: "Partie externe dense, dure et lisse de l'os - Il entoure le canal m√©dullaire et contient vaisseaux sanguins, nerfs"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que la CAVIT√â M√âDULLAIRE ?",
                answer: "Partie creuse de l'os qui contient la moelle osseuse qui fabrique des cellules sanguines et entrepose du gras"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que la MOELLE OSSEUSE ?",
                answer: "Tissu situ√© dans la cavit√© m√©dullaire qui fabrique des cellules sanguines et entrepose du gras"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que l'ENDOSTE ?",
                answer: "Membrane interne tapissant la cavit√© m√©dullaire"
            },
            {
                category: "Os - Anatomie",
                question: "Qu'est-ce que le PERIOSTE ?",
                answer: "Couche de tissu fibreux qui recouvre l'os"
            },
            
            // Cellules osseuses
            {
                category: "Os - Cellules",
                question: "Quels sont les 3 types de cellules constituant le tissu osseux ?",
                answer: "<b>1. Ost√©oblastes :</b> cellules formatrices du tissu osseux<br><br><b>2. Ost√©ocytes :</b> cellules de forme √©toil√©e dont les prolongements unissent les cellules osseuses entre elles. Ce sont les cellules du tissu osseux mature. R√¥le : nutrition du tissu osseux et participation au remodelage osseux<br><br><b>3. Ost√©oclastes :</b> √©normes cellules mobiles qui d√©truisent l'os tandis que parall√®lement les ost√©oblastes le reconstruisent"
            },
            
            // Ossification
            {
                category: "Croissance Osseuse",
                question: "Qu'est-ce que l'ossification MEMBRANEUSE et o√π se produit-elle ?",
                answer: "D√©veloppement des os du cr√¢ne et de la face<br>Sans √©bauche cartilagineuse ‚Äì tissu conjonctif embryonnaire ‚Üí √©bauche conjonctive ‚Üí ost√©oblastes ‚Üí os d√©finitif"
            },
            {
                category: "Croissance Osseuse",
                question: "Qu'est-ce que l'ossification ENDOCHONDRALE et o√π se produit-elle ?",
                answer: "D√©veloppement des autres os (hors cr√¢ne et face)<br>√âbauche cartilagineuse ‚Äì points d'ossification ‚Äì cartilage de conjugaison"
            },
            {
                category: "Croissance Osseuse",
                question: "Comment se fait la croissance osseuse en LONGUEUR ?",
                answer: "Via le cartilage de conjugaison : la diaphyse de l'os sous l'action du cartilage s'accro√Æt en longueur"
            },
            {
                category: "Croissance Osseuse",
                question: "Comment se fait la croissance osseuse en √âPAISSEUR ?",
                answer: "Via le p√©rioste : le p√©rioste par sa couche profonde √©labore des couches successives d'os"
            },
            
            // Tissu cartilagineux
            {
                category: "Cartilage",
                question: "Quelles sont les caract√©ristiques du tissu cartilagineux ?",
                answer: "- VRAI : Le tissu cartilagineux est d√©pourvu de vaisseaux sanguins et de nerfs<br>- FAUX : Le tissu cartilagineux a une r√©sistance √©lastique mod√©r√©e (en r√©alit√© : tr√®s bonne r√©sistance √©lastique)<br>- VRAI : Le r√¥le est de r√©duire les frictions entre les structures osseuses"
            },
            {
                category: "Cartilage",
                question: "Quels sont les 3 types de tissu cartilagineux ?",
                answer: "<b>1. Hyalin :</b> paroi vasculaire, surface articulaire<br><b>2. √âlastique :</b> oreille, √©piglotte, larynx<br><b>3. Fibreux :</b> disques intervert√©braux, insertion tendon et ligament"
            },
            
            // Articulations
            {
                category: "Articulations",
                question: "Qu'est-ce qu'une articulation ?",
                answer: "L'ensemble des √©l√©ments par lesquels les os s'unissent les uns aux autres"
            },
            {
                category: "Articulations",
                question: "Quels sont les 3 types d'articulation ?",
                answer: "<b>1. Synarthrose :</b> immobile (os du cr√¢ne et du nez)<br><b>2. Amphiarthrose :</b> semi-mobile (symphyse pubienne, vert√©brale)<br><b>3. Diarthrose :</b> mobile (membres sup√©rieurs et inf√©rieurs)"
            },
            {
                category: "Articulations",
                question: "Qu'est-ce qu'une circumduction et o√π se produit-elle ?",
                answer: "Mouvement articulaire dans les 3 plans de l'espace<br>2 articulations permettent ce mouvement : √©paule et hanche"
            },
            
            // Pathologies articulaires
            {
                category: "Pathologies",
                question: "Qu'est-ce que la GOUTTE ? Quels sont ses sympt√¥mes ?",
                answer: "<b>Description :</b> Maladie articulaire inflammatoire : d√©p√¥t de cristaux d'acide urique<br><br><b>Sympt√¥mes :</b><br>- Douleur au milieu de la nuit<br>- Douleur pulsatile<br>- Articulation chaude, rouge, gonfl√©e et tr√®s douloureuse<br>- Localisation : gros orteil, coude, doigt, genou, cheville"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce que l'ARTHRITE ? Quels sont ses sympt√¥mes ?",
                answer: "<b>Description :</b> Inflammation des articulations<br><br><b>Sympt√¥mes :</b><br>- Douleurs inflammatoires en pleine nuit<br>- Douleurs fortes en d√©but d'effort physique<br>- Articulation gonfl√©e, chaude, rouge"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce que l'ARTHROSE ? Quels sont ses sympt√¥mes ?",
                answer: "<b>Description :</b> Maladie articulaire : Destruction du cartilage<br><br><b>Sympt√¥mes :</b><br>- Douleurs<br>- Raideurs<br>- Inflammations<br>- √âpanchement articulaire"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce que la POLYARTHRITE RHUMATO√èDE ? Quels sont ses sympt√¥mes ?",
                answer: "<b>Description :</b> Maladie auto-immune<br><br><b>Sympt√¥mes :</b><br>- Enraidissement douloureux des articulations<br>- Gonflement de plusieurs articulations"
            }
        ];

        // Questions pour le mode test
        const testQuestions = [
            // QCM
            {
                type: "mcq",
                question: "Quel tissu a un r√¥le dans la locomotion et la contraction ?",
                options: ["Tissu nerveux", "Tissu musculaire", "Tissu conjonctif", "Tissu √©pith√©lial"],
                correct: 1,
                explanation: "Le tissu musculaire est compos√© de cellules jointives multinucl√©√©es - muscles stri√©s (volont√©), lisses (involontaire) et cardiaque."
            },
            {
                type: "mcq",
                question: "Quel est le r√¥le du LEC (Liquide Extra Cellulaire) ?",
                options: [
                    "Stockage de l'√©nergie",
                    "Permet les √©changes m√©taboliques : transfert nutriments - O2 vs CO2 ‚Äì d√©chets",
                    "Protection contre les infections",
                    "Transmission de l'information nerveuse"
                ],
                correct: 1,
                explanation: "Le LEC permet les √©changes m√©taboliques entre les cellules et leur environnement."
            },
            {
                type: "mcq",
                question: "Quelle est la proportion de sels min√©raux dans l'os ?",
                options: ["1/3", "1/2", "2/3", "3/4"],
                correct: 2,
                explanation: "L'os est compos√© de 2/3 de sels min√©raux (donnent la rigidit√©) et 1/3 d'oss√©ine (mati√®re organique)."
            },
            {
                type: "mcq",
                question: "Quel type d'immunit√© est mise en jeu par les lymphocytes ?",
                options: ["Immunit√© inn√©e", "Immunit√© adaptative", "Les deux", "Aucune"],
                correct: 1,
                explanation: "Les lymphocytes (T et B) font partie de l'immunit√© adaptative, qui est sp√©cifique et poss√®de une m√©moire immunitaire."
            },
            {
                type: "mcq",
                question: "Combien de types d'articulation existe-t-il ?",
                options: ["2 types", "3 types", "4 types", "5 types"],
                correct: 1,
                explanation: "Il existe 3 types d'articulation : Synarthrose (immobile), Amphiarthrose (semi-mobile) et Diarthrose (mobile)."
            },
            {
                type: "mcq",
                question: "Le d√©veloppement des os du cr√¢ne se fait par ossification :",
                options: ["Membraneuse", "Endochondrale", "P√©riost√©e", "Cartilagineuse"],
                correct: 0,
                explanation: "L'ossification membraneuse concerne les os du cr√¢ne et de la face, sans √©bauche cartilagineuse."
            },
            
            // Questions √† trous
            {
                type: "fill",
                question: "L'__________ est le processus de r√©gulation par lequel l'organisme maintient la stabilit√© des constantes.",
                answer: "hom√©ostasie",
                explanation: "L'hom√©ostasie maintient l'√©quilibre interne du corps."
            },
            {
                type: "fill",
                question: "L'__________ est la mort programm√©e de la cellule (autodestruction).",
                answer: "apoptose",
                explanation: "L'apoptose est un processus normal et n√©cessaire au d√©veloppement et √† l'√©quilibre de l'organisme."
            },
            {
                type: "fill",
                question: "La __________ est la partie centrale d'un os long, un cylindre de tissu osseux compact.",
                answer: "diaphyse",
                explanation: "La diaphyse contient le canal m√©dullaire rempli de moelle osseuse."
            },
            {
                type: "fill",
                question: "Les __________ sont des cellules qui d√©truisent l'os lors du remodelage osseux.",
                answer: "ost√©oclastes",
                explanation: "Les ost√©oclastes travaillent en opposition avec les ost√©oblastes qui construisent l'os."
            },
            
            // Matching
            {
                type: "matching",
                question: "Associez chaque syst√®me/appareil √† sa fonction principale :",
                pairs: [
                    { term: "Syst√®me t√©gumentaire", definition: "Protection (barri√®re)" },
                    { term: "Syst√®me endocrinien", definition: "R√©gulation" },
                    { term: "Appareil reproducteur", definition: "Procr√©ation" },
                    { term: "Syst√®me immunitaire", definition: "D√©fense" }
                ],
                explanation: "Chaque syst√®me a une fonction principale qui contribue √† l'hom√©ostasie globale."
            },
            {
                type: "matching",
                question: "Associez chaque stade de grossesse √† sa d√©nomination :",
                pairs: [
                    { term: "F√©condation", definition: "Zygote" },
                    { term: "1√®re division - Nidation", definition: "Embryon" },
                    { term: "√Ä partir de la 9√®me semaine", definition: "F≈ìtus" }
                ],
                explanation: "Ces d√©nominations marquent les grandes √©tapes du d√©veloppement pr√©natal."
            },
            {
                type: "matching",
                question: "Associez chaque type de cellule osseuse √† sa fonction :",
                pairs: [
                    { term: "Ost√©oblastes", definition: "Cellules formatrices du tissu osseux" },
                    { term: "Ost√©ocytes", definition: "Cellules du tissu osseux mature" },
                    { term: "Ost√©oclastes", definition: "Cellules qui d√©truisent l'os" }
                ],
                explanation: "Ces trois types cellulaires travaillent ensemble pour le remodelage osseux continu."
            },
            {
                type: "matching",
                question: "Associez chaque pathologie √† sa description :",
                pairs: [
                    { term: "Goutte", definition: "D√©p√¥t de cristaux d'acide urique" },
                    { term: "Arthrite", definition: "Inflammation des articulations" },
                    { term: "Arthrose", definition: "Destruction du cartilage" },
                    { term: "Polyarthrite rhumato√Øde", definition: "Maladie auto-immune" }
                ],
                explanation: "Chaque pathologie articulaire a des m√©canismes et sympt√¥mes sp√©cifiques."
            }
        ];

        // √âtat de l'application
        let currentCardIndex = 0;
        let currentFilter = 'all';
        let isFlipped = false;
        let cardStates = {};
        let currentTestAnswers = {};

        // Initialisation
        function init() {
            loadProgress();
            updateStats();
            displayCurrentCard();
            generateTest();
        }

        // Gestion des modes
        function switchMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.mode-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(mode + '-mode').classList.add('active');
            
            if (mode === 'test') {
                resetTest();
            }
        }

        // FLASHCARDS - Filtrage
        function filterCards(filter) {
            currentFilter = filter;
            currentCardIndex = 0;
            
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            displayCurrentCard();
        }

        function getFilteredCards() {
            return flashcardsData.filter(card => {
                const state = cardStates[flashcardsData.indexOf(card)] || { status: 'new', reviewCount: 0 };
                
                switch(currentFilter) {
                    case 'new':
                        return state.status === 'new';
                    case 'review':
                        return state.status === 'review' || state.status === 'not-acquired';
                    case 'acquired':
                        return state.status === 'acquired';
                    default:
                        return true;
                }
            });
        }

        // FLASHCARDS - Affichage
        function displayCurrentCard() {
            const filteredCards = getFilteredCards();
            const container = document.getElementById('flashcard-display');
            
            if (filteredCards.length === 0) {
                container.innerHTML = `
                    <div class="no-cards-message">
                        <h3>Aucune carte disponible</h3>
                        <p>Changez de filtre ou r√©initialisez votre progression pour voir des cartes.</p>
                    </div>
                `;
                return;
            }
            
            if (currentCardIndex >= filteredCards.length) {
                currentCardIndex = 0;
            }
            
            const card = filteredCards[currentCardIndex];
            isFlipped = false;
            
            container.innerHTML = `
                <div class="flashcard-container">
                    <div class="flashcard" id="current-card" onclick="flipCard()">
                        <div class="card-face card-front">
                            <div class="card-category">${card.category}</div>
                            <div class="card-content card-question">${card.question}</div>
                            <p style="margin-top: 20px; font-size: 0.9em; color: #999;">Cliquez pour voir la r√©ponse</p>
                        </div>
                        <div class="card-face card-back">
                            <div class="card-category">${card.category}</div>
                            <div class="card-content card-answer">${card.answer}</div>
                        </div>
                    </div>
                </div>
                
                <div class="evaluation-buttons">
                    <button class="eval-btn eval-acquired" onclick="evaluateCard('acquired')">‚úÖ Acquis</button>
                    <button class="eval-btn eval-review" onclick="evaluateCard('review')">‚ö†Ô∏è √Ä revoir</button>
                    <button class="eval-btn eval-not-acquired" onclick="evaluateCard('not-acquired')">‚ùå Non acquis</button>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousCard()" ${currentCardIndex === 0 ? 'disabled' : ''}>‚¨ÖÔ∏è Pr√©c√©dent</button>
                    <span style="align-self: center; font-weight: 600; color: white;">
                        ${currentCardIndex + 1} / ${filteredCards.length}
                    </span>
                    <button class="nav-btn" onclick="nextCard()" ${currentCardIndex === filteredCards.length - 1 ? 'disabled' : ''}>Suivant ‚û°Ô∏è</button>
                </div>
            `;
        }

        function flipCard() {
            const card = document.getElementById('current-card');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        function nextCard() {
            const filteredCards = getFilteredCards();
            if (currentCardIndex < filteredCards.length - 1) {
                currentCardIndex++;
                displayCurrentCard();
            }
        }

        function previousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                displayCurrentCard();
            }
        }

        // FLASHCARDS - √âvaluation
        function evaluateCard(status) {
            const filteredCards = getFilteredCards();
            const card = filteredCards[currentCardIndex];
            const originalIndex = flashcardsData.indexOf(card);
            
            if (!cardStates[originalIndex]) {
                cardStates[originalIndex] = { status: 'new', reviewCount: 0 };
            }
            
            switch(status) {
                case 'acquired':
                    cardStates[originalIndex].status = 'acquired';
                    cardStates[originalIndex].reviewCount = 0;
                    break;
                case 'review':
                    cardStates[originalIndex].status = 'review';
                    cardStates[originalIndex].reviewCount = 1;
                    break;
                case 'not-acquired':
                    cardStates[originalIndex].status = 'not-acquired';
                    cardStates[originalIndex].reviewCount = 3;
                    break;
            }
            
            saveProgress();
            updateStats();
            nextCard();
        }

        // FLASHCARDS - Statistiques
        function updateStats() {
            const total = flashcardsData.length;
            let acquired = 0;
            let review = 0;
            let notAcquired = 0;
            let newCards = 0;
            
            flashcardsData.forEach((card, index) => {
                const state = cardStates[index] || { status: 'new' };
                switch(state.status) {
                    case 'acquired': acquired++; break;
                    case 'review': review++; break;
                    case 'not-acquired': notAcquired++; break;
                    default: newCards++;
                }
            });
            
            document.getElementById('total-cards').textContent = total;
            document.getElementById('acquired-cards').textContent = acquired;
            document.getElementById('review-cards').textContent = review;
            document.getElementById('not-acquired-cards').textContent = notAcquired;
            document.getElementById('new-cards').textContent = newCards;
            
            const progress = (acquired / total) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = Math.round(progress) + '% compl√©t√©';
        }

        // FLASHCARDS - Sauvegarde
        function saveProgress() {
            localStorage.setItem('td3_flashcards_progress', JSON.stringify(cardStates));
        }

        function loadProgress() {
            const saved = localStorage.getItem('td3_flashcards_progress');
            if (saved) {
                cardStates = JSON.parse(saved);
            }
        }

        function exportProgress() {
            const dataStr = JSON.stringify(cardStates, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'td3_progression_' + new Date().toISOString().split('T')[0] + '.json';
            link.click();
        }

        function importProgress(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        cardStates = JSON.parse(e.target.result);
                        saveProgress();
                        updateStats();
                        displayCurrentCard();
                        alert('‚úÖ Progression import√©e avec succ√®s !');
                    } catch (error) {
                        alert('‚ùå Erreur lors de l\'importation du fichier.');
                    }
                };
                reader.readAsText(file);
            }
        }

        function resetProgress() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser toute votre progression ?')) {
                cardStates = {};
                saveProgress();
                updateStats();
                currentCardIndex = 0;
                displayCurrentCard();
                alert('‚úÖ Progression r√©initialis√©e !');
            }
        }

        // MODE TEST - G√©n√©ration
        function generateTest() {
            const container = document.getElementById('test-container');
            let html = '<h2 style="color: #667eea; margin-bottom: 25px;">üìù Test d\'√©valuation</h2>';
            
            testQuestions.forEach((q, index) => {
                html += `<div class="question-block" data-question="${index}">`;
                html += `<span class="question-type">${getQuestionTypeLabel(q.type)}</span>`;
                html += `<div class="question-text">${index + 1}. ${q.question}</div>`;
                
                if (q.type === 'mcq') {
                    html += '<div class="options">';
                    q.options.forEach((option, optIndex) => {
                        html += `
                            <label class="option" onclick="selectOption(${index}, ${optIndex})">
                                <input type="radio" name="q${index}" value="${optIndex}">
                                ${option}
                            </label>
                        `;
                    });
                    html += '</div>';
                } else if (q.type === 'fill') {
                    html += `<input type="text" class="fill-input" id="fill-${index}" placeholder="Votre r√©ponse...">`;
                } else if (q.type === 'matching') {
                    html += '<div class="matching-container">';
                    html += '<div class="matching-column">';
                    q.pairs.forEach((pair, pairIndex) => {
                        html += `<div class="matching-item">${pair.term}</div>`;
                    });
                    html += '</div>';
                    html += '<div class="matching-column">';
                    q.pairs.forEach((pair, pairIndex) => {
                        html += `
                            <select id="match-${index}-${pairIndex}">
                                <option value="">S√©lectionner...</option>
                                ${q.pairs.map((p, i) => `<option value="${i}">${p.definition}</option>`).join('')}
                            </select>
                        `;
                    });
                    html += '</div>';
                    html += '</div>';
                }
                
                html += `<div class="explanation" id="explanation-${index}">${q.explanation}</div>`;
                html += '</div>';
            });
            
            html += '<button class="submit-test" onclick="submitTest()">Valider le test</button>';
            container.innerHTML = html;
        }

        function getQuestionTypeLabel(type) {
            const labels = {
                'mcq': 'QCM',
                'fill': 'Question √† trou',
                'matching': 'Appariement'
            };
            return labels[type] || type;
        }

        function selectOption(questionIndex, optionIndex) {
            currentTestAnswers[questionIndex] = optionIndex;
            
            const options = document.querySelectorAll(`[data-question="${questionIndex}"] .option`);
            options.forEach((opt, idx) => {
                opt.classList.toggle('selected', idx === optionIndex);
            });
        }

        // MODE TEST - Soumission et correction
        function submitTest() {
            let score = 0;
            let total = testQuestions.length;
            
            testQuestions.forEach((q, index) => {
                let isCorrect = false;
                
                if (q.type === 'mcq') {
                    const userAnswer = currentTestAnswers[index];
                    isCorrect = userAnswer === q.correct;
                    
                    const options = document.querySelectorAll(`[data-question="${index}"] .option`);
                    options.forEach((opt, idx) => {
                        if (idx === q.correct) {
                            opt.classList.add('correct');
                        }
                        if (idx === userAnswer && userAnswer !== q.correct) {
                            opt.classList.add('incorrect');
                        }
                    });
                } else if (q.type === 'fill') {
                    const userAnswer = document.getElementById(`fill-${index}`).value.toLowerCase().trim();
                    isCorrect = userAnswer === q.answer.toLowerCase();
                    
                    const input = document.getElementById(`fill-${index}`);
                    input.style.borderColor = isCorrect ? '#28a745' : '#dc3545';
                    input.style.background = isCorrect ? '#d4edda' : '#f8d7da';
                    input.disabled = true;
                } else if (q.type === 'matching') {
                    isCorrect = true;
                    q.pairs.forEach((pair, pairIndex) => {
                        const select = document.getElementById(`match-${index}-${pairIndex}`);
                        const userAnswer = parseInt(select.value);
                        if (userAnswer !== pairIndex) {
                            isCorrect = false;
                        }
                        select.style.borderColor = userAnswer === pairIndex ? '#28a745' : '#dc3545';
                        select.style.background = userAnswer === pairIndex ? '#d4edda' : '#f8d7da';
                        select.disabled = true;
                    });
                }
                
                if (isCorrect) score++;
                
                document.getElementById(`explanation-${index}`).classList.add('show');
            });
            
            const percentage = Math.round((score / total) * 100);
            displayResults(score, total, percentage);
            
            document.querySelector('.submit-test').style.display = 'none';
        }

        function displayResults(score, total, percentage) {
            const resultsDiv = document.getElementById('test-results');
            
            let message = '';
            if (percentage >= 90) message = 'üéâ Excellent ! Vous ma√Ætrisez parfaitement le sujet !';
            else if (percentage >= 75) message = 'üëç Tr√®s bien ! Quelques petites r√©visions suffisent.';
            else if (percentage >= 60) message = 'üëå Bien ! Continuez √† r√©viser pour progresser.';
            else if (percentage >= 50) message = 'üìö Passable. Il faut revoir certains points.';
            else message = 'üìñ Continuez √† travailler, vous allez y arriver !';
            
            resultsDiv.innerHTML = `
                <h2 style="color: #667eea; margin-bottom: 20px;">R√©sultats du test</h2>
                <div class="score-circle">
                    <div class="score-text">${percentage}%</div>
                </div>
                <p style="font-size: 1.2em; margin: 10px 0;"><strong>${score} / ${total}</strong> bonnes r√©ponses</p>
                <p class="result-message">${message}</p>
                <button class="retry-btn" onclick="resetTest()">Recommencer le test</button>
            `;
            
            resultsDiv.classList.add('show');
            document.getElementById('test-container').style.display = 'none';
        }

        function resetTest() {
            currentTestAnswers = {};
            document.getElementById('test-container').style.display = 'block';
            document.getElementById('test-results').classList.remove('show');
            generateTest();
        }

        // Lancement de l'application
        init();
    </script>
</body>
</html>