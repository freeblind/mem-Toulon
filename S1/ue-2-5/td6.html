<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD 6 - UE 2.5 S1 - R√©visions Ost√©o-articulaire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 15px 40px;
            font-size: 1.1em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            background: white;
            color: #667eea;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .mode-btn.active {
            background: #764ba2;
            color: white;
        }

        .mode-content {
            display: none;
        }

        .mode-content.active {
            display: block;
        }

        /* FLASHCARDS MODE */
        .stats-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: white;
            color: #667eea;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            background: white;
            color: #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 20px;
        }

        .flashcard {
            width: 100%;
            min-height: 400px;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            min-height: 400px;
            backface-visibility: hidden;
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .card-category {
            display: inline-block;
            padding: 5px 15px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .card-content {
            font-size: 1.3em;
            line-height: 1.6;
            color: #333;
        }

        .card-number {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 0.9em;
            color: #999;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn-acquired {
            background: #22c55e;
            color: white;
        }

        .btn-review {
            background: #f59e0b;
            color: white;
        }

        .btn-not-acquired {
            background: #ef4444;
            color: white;
        }

        /* TEST MODE */
        .test-container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #e8eaff;
        }

        .option.correct {
            border-color: #22c55e;
            background: #dcfce7;
        }

        .option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .input-answer {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
        }

        .input-answer:focus {
            outline: none;
            border-color: #667eea;
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .matching-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .matching-item {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .matching-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .matching-item.selected {
            border-color: #667eea;
            background: #e8eaff;
        }

        .matching-item.matched {
            border-color: #22c55e;
            background: #dcfce7;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            border-radius: 5px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .submit-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            background: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none;
        }

        .results.show {
            display: block;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            font-weight: bold;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .score-excellent {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        }

        .score-good {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .score-average {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .score-poor {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .results h2 {
            font-size: 2em;
            margin-bottom: 15px;
            color: #333;
        }

        .results p {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .mode-selector {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .action-buttons {
                flex-direction: column;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .card-face {
                padding: 20px;
                min-height: 300px;
            }

            .card-content {
                font-size: 1.1em;
            }
        }

        .hidden {
            display: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }

        table tr:nth-child(even) {
            background: #f9f9f9;
        }

        ul, ol {
            margin-left: 20px;
            margin-top: 10px;
        }

        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì TD N¬∞6 - UE 2.5 S1</h1>
            <p>Physiologie ost√©oarticulaire - R√©visions</p>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('flashcards')">
                üìö Mode Flashcards
            </button>
            <button class="mode-btn" onclick="switchMode('test')">
                ‚úèÔ∏è Mode Test
            </button>
        </div>

        <!-- FLASHCARDS MODE -->
        <div id="flashcards-mode" class="mode-content active">
            <div class="stats-container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="number" id="total-cards">0</div>
                        <div class="label">Total cartes</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="new-cards">0</div>
                        <div class="label">Nouvelles</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="acquired-cards">0</div>
                        <div class="label">Acquises</div>
                    </div>
                    <div class="stat-card">
                        <div class="number" id="review-cards">0</div>
                        <div class="label">√Ä r√©viser</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%">0%</div>
                </div>
            </div>

            <div class="filters" id="filters">
                <button class="filter-btn active" onclick="filterCards('all')">üìã Toutes les cartes</button>
                <button class="filter-btn" onclick="filterCards('new')">üÜï Nouvelles</button>
                <button class="filter-btn" onclick="filterCards('review')">‚ö†Ô∏è √Ä r√©viser</button>
                <button class="filter-btn" onclick="filterCards('acquired')">‚úÖ Acquises</button>
            </div>

            <div class="controls">
                <button class="control-btn" onclick="exportProgress()">üíæ Exporter</button>
                <button class="control-btn" onclick="document.getElementById('import-file').click()">
                    üì• Importer
                </button>
                <input type="file" id="import-file" accept=".json" style="display: none" onchange="importProgress(event)">
                <button class="control-btn" onclick="resetProgress()">üîÑ R√©initialiser</button>
            </div>

            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="card-face card-front">
                        <span class="card-number" id="card-number">1/1</span>
                        <span class="card-category" id="card-category">Cat√©gorie</span>
                        <div class="card-content" id="card-question">Chargement...</div>
                    </div>
                    <div class="card-face card-back">
                        <span class="card-number" id="card-number-back">1/1</span>
                        <span class="card-category" id="card-category-back">Cat√©gorie</span>
                        <div class="card-content" id="card-answer">R√©ponse...</div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn btn-not-acquired" onclick="rateCard('not-acquired')">
                    ‚ùå Non acquis
                </button>
                <button class="action-btn btn-review" onclick="rateCard('review')">
                    ‚ö†Ô∏è √Ä revoir
                </button>
                <button class="action-btn btn-acquired" onclick="rateCard('acquired')">
                    ‚úÖ Acquis
                </button>
            </div>
        </div>

        <!-- TEST MODE -->
        <div id="test-mode" class="mode-content">
            <div class="test-container" id="test-container">
                <!-- Questions will be generated here -->
            </div>
            <button class="submit-btn" id="submit-btn" onclick="submitTest()">
                üìù Corriger le test
            </button>

            <div class="results" id="results">
                <h2 id="results-title">R√©sultats</h2>
                <div class="score-circle" id="score-circle">0%</div>
                <p id="results-message">Message</p>
                <button class="submit-btn" onclick="resetTest()">üîÑ Recommencer</button>
            </div>
        </div>
    </div>

    <script>
        // Flashcards data
        const flashcardsData = [
            // Niveaux d'organisation
            {
                category: "Physiologie g√©n√©rale",
                question: "Quels sont les 6 niveaux d'organisation du corps humain ?",
                answer: "1. Chimique<br>2. Cellulaire<br>3. Tissulaire<br>4. Organique (les organes)<br>5. Syst√®mes (les appareils)<br>6. Organisme"
            },
            
            // Syst√®mes du corps
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me nerveux : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> Central, p√©riph√©rique, neurones<br><strong>Fonction :</strong> V√©hiculer et stocker les informations"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me t√©gumentaire : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> Peau, phan√®res<br><strong>Fonction :</strong> Protection (barri√®re)"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me endocrinien : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> Glandes<br><strong>Fonction :</strong> R√©gulation"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me immunitaire : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> Cellules immunocomp√©tentes<br><strong>Fonction :</strong> D√©fense"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me urinaire : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> Reins, uret√®res, vessie, ur√®tre<br><strong>Fonction :</strong> √âpuration"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Syst√®me digestif : descriptif et fonction principale ?",
                answer: "<strong>Descriptif :</strong> ≈ísophage, estomac, gr√™le, c√¥lon, pancr√©as, foie<br><strong>Fonction :</strong> Nutrition, √©limination des d√©chets"
            },

            // Hom√©ostasie et r√©gulation
            {
                category: "Physiologie g√©n√©rale",
                question: "Qu'est-ce que l'hom√©ostasie ?",
                answer: "Le maintien de la stabilit√© du milieu int√©rieur"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Que d√©tectent principalement les thermor√©cepteurs ?",
                answer: "La temp√©rature du corps"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Comment l'organisme r√©agit-il lors d'une augmentation de la temp√©rature corporelle ?",
                answer: "Par sudation et vasodilatation cutan√©e"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Qu'est-ce que la bradycardie ?",
                answer: "Une fr√©quence cardiaque trop basse"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Quelle est la premi√®re barri√®re de d√©fense de l'organisme ?",
                answer: "La peau et les muqueuses"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Citez un organe lympho√Øde secondaire",
                answer: "Le ganglion lymphatique (autres exemples : rate, amygdales)"
            },
            {
                category: "Physiologie g√©n√©rale",
                question: "Quel est le r√¥le principal des macrophages ?",
                answer: "Phagocyter (ing√©rer et d√©truire) les agents pathog√®nes"
            },

            // D√©finitions ost√©oarticulaires
            {
                category: "S√©miologie",
                question: "Qu'est-ce que le p√©rioste ?",
                answer: "Couche de tissu fibreux qui recouvre l'os"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce que l'√©tiologie ?",
                answer: "√âtude des causes des maladies"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce que la t√©trapl√©gie ?",
                answer: "Paralysie des quatre membres"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce qu'un ost√©ophyte ?",
                answer: "Excroissance osseuse d√©velopp√©e au rebord des surfaces articulaires"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce que la septic√©mie ?",
                answer: "√âtat infectieux grave d√ª √† une infection g√©n√©ralis√©e, diss√©min√©e par voie sanguine"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce que l'impotence fonctionnelle ?",
                answer: "Impossibilit√© d'accomplir certains mouvements"
            },
            {
                category: "S√©miologie",
                question: "Qu'est-ce que l'antibioth√©rapie ?",
                answer: "Utilisation th√©rapeutique des antibiotiques"
            },

            // Tissu cartilagineux
            {
                category: "Tissu cartilagineux",
                question: "Quels sont les 3 types de tissu cartilagineux et leurs localisations ?",
                answer: "<strong>1. Hyalin :</strong> paroi des voies a√©riennes sup√©rieures, surface articulaire<br><strong>2. √âlastique :</strong> oreille, √©piglotte, larynx<br><strong>3. Fibreux :</strong> disques intervert√©braux, insertion tendons et ligaments"
            },
            {
                category: "Tissu cartilagineux",
                question: "Quel est le r√¥le du tissu cartilagineux ?",
                answer: "R√©duire les frictions entre les structures osseuses"
            },

            // Types d'os
            {
                category: "Tissu osseux",
                question: "Os long : r√¥le et exemples ?",
                answer: "<strong>R√¥le :</strong> Soutiennent le poids et favorisent le mouvement<br><strong>Exemples :</strong> Hum√©rus, radius, ulna, f√©mur, fibula, tibia, phalanges, m√©tacarpe, m√©tatarse"
            },
            {
                category: "Tissu osseux",
                question: "Os plat : r√¥le et exemples ?",
                answer: "<strong>R√¥le :</strong> Prot√®gent les organes (cerveau, c≈ìur, organes pelviens)<br><strong>Exemples :</strong> Os cr√¢niens, sternum, scapula, c√¥tes"
            },
            {
                category: "Tissu osseux",
                question: "Os court : r√¥le et exemples ?",
                answer: "<strong>R√¥le :</strong> Stabilit√© et une certaine amplitude de mouvement<br><strong>Exemples :</strong> Os du carpe et du tarse"
            },
            {
                category: "Tissu osseux",
                question: "Os irr√©gulier : r√¥le et exemples ?",
                answer: "<strong>R√¥le :</strong> Prot√®gent les organes internes<br><strong>Exemples :</strong> Vert√®bres, sacrum, coccyx"
            },
            {
                category: "Tissu osseux",
                question: "Os s√©samo√Øde : r√¥le et exemples ?",
                answer: "<strong>R√¥le :</strong> Prot√®ge les tendons des tensions et de l'usure<br><strong>Exemples :</strong> Patella (rotule), s√©samo√Ødes"
            },

            // Structure osseuse
            {
                category: "Tissu osseux",
                question: "Qu'est-ce que l'os spongieux ?",
                answer: "Petits fragments d'os semblables √† des √©pingles dispos√©s comme un nid d'abeilles. R√©duit le poids de l'os tout en lui procurant une solidit√©"
            },
            {
                category: "Tissu osseux",
                question: "Qu'est-ce que l'os compact ?",
                answer: "Partie externe dense, dure et lisse de l'os. Il entoure le canal m√©dullaire et contient vaisseaux sanguins et nerfs"
            },

            // Cellules osseuses
            {
                category: "Tissu osseux",
                question: "Que sont les ost√©oclastes ?",
                answer: "√ânormes cellules mobiles qui d√©truisent l'os (r√©sorption osseuse)"
            },
            {
                category: "Tissu osseux",
                question: "Que sont les ost√©oblastes ?",
                answer: "Grandes cellules responsables de la formation du tissu osseux"
            },
            {
                category: "Tissu osseux",
                question: "Que sont les ost√©ocytes ?",
                answer: "Cellules entretenant la trame osseuse (nutrition et remodelage)"
            },

            // Articulations
            {
                category: "Articulations",
                question: "Qu'est-ce qu'une articulation ?",
                answer: "Ensemble des √©l√©ments par lesquels les os s'unissent les uns aux autres afin de permettre les mouvements des diff√©rents segments de membres"
            },
            {
                category: "Articulations",
                question: "Synarthrose : mouvement et exemples ?",
                answer: "<strong>Mouvement :</strong> Articulation immobile<br><strong>Exemples :</strong> Os du cr√¢ne et du nez"
            },
            {
                category: "Articulations",
                question: "Amphiarthrose : mouvement et exemples ?",
                answer: "<strong>Mouvement :</strong> Articulation semi-mobile<br><strong>Exemples :</strong> Symphyse pubienne, articulation distale entre le tibia et la fibula, vert√®bres"
            },
            {
                category: "Articulations",
                question: "Diarthrose : mouvement et exemples ?",
                answer: "<strong>Mouvement :</strong> Mouvements vari√©s et grandes amplitudes<br><strong>Exemples :</strong> Coude, √©paule, cheville, genou, hanche"
            },

            // √âl√©ments des diarthroses
            {
                category: "Articulations",
                question: "Quel est le r√¥le du cartilage articulaire ?",
                answer: "Prot√®ge les surfaces osseuses"
            },
            {
                category: "Articulations",
                question: "Qu'est-ce que la cavit√© articulaire ?",
                answer: "Espace rempli de liquide synovial entre les surfaces articulaires"
            },
            {
                category: "Articulations",
                question: "Quel est le r√¥le du liquide synovial ?",
                answer: "Agit comme lubrifiant de l'articulation"
            },
            {
                category: "Articulations",
                question: "Qu'est-ce que la capsule articulaire ?",
                answer: "Sac √©tanche enfermant l'articulation avec le cartilage et le liquide synovial"
            },
            {
                category: "Articulations",
                question: "Quel est le r√¥le des ligaments ?",
                answer: "Lier les os et limiter les mouvements dans certains plans"
            },
            {
                category: "Articulations",
                question: "Qu'est-ce qu'une bourse s√©reuse et quel est son r√¥le ?",
                answer: "Poche remplie de liquide synovial, situ√©e entre les tendons, les muscles, les os et la peau. Elle agit comme un coussin pour r√©duire la friction et faciliter le mouvement des structures adjacentes"
            },

            // Fractures
            {
                category: "Pathologies",
                question: "Qu'est-ce qu'une fracture ?",
                answer: "Solution de continuit√© d'un os li√©e √† un traumatisme (interruption de la structure osseuse)"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce qu'une fracture comminutive ?",
                answer: "Fracture avec pr√©sence de plusieurs fragments osseux"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce qu'une fracture spiro√Øde ?",
                answer: "Fracture en spirale caus√©e principalement par une torsion"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce qu'une fracture transversale ?",
                answer: "Fracture avec un trait perpendiculaire √† l'axe de l'os"
            },
            {
                category: "Pathologies",
                question: "Qu'est-ce qu'une fracture ouverte ?",
                answer: "Fracture avec communication entre l'os fractur√© et l'ext√©rieur"
            },
            {
                category: "Pathologies",
                question: "O√π se rencontre typiquement une fracture tassement par compression ?",
                answer: "Au niveau des vert√®bres"
            },

            // Pathologies rhumatologiques
            {
                category: "Pathologies",
                question: "Quelles sont les origines des pathologies rhumatologiques ?",
                answer: "Infectieuses, Inflammatoires, Microcristallines, Tumorales, M√©taboliques, M√©caniques, D√©g√©n√©ratives"
            },
            {
                category: "Pathologies",
                question: "Anatomie articulaire et pathologies associ√©es ?",
                answer: "<table><tr><td><strong>Cartilage articulaire</strong></td><td>Arthrose</td></tr><tr><td><strong>Synoviale</strong></td><td>Inflammation, infection (arthrite septique), tumeurs, microcristaux (goutte/CCA)</td></tr><tr><td><strong>Os sous-chondral</strong></td><td>Ost√©on√©crose, algodystrophie</td></tr></table>"
            },
            {
                category: "Pathologies",
                question: "Pathologies p√©riarticulaires : quelles structures et pathologies ?",
                answer: "<strong>Tendons :</strong> Tendinites<br><strong>Bourses :</strong> Bursites<br><strong>Ligaments :</strong> Entorses, luxations"
            },

            // Cas clinique fracture f√©mur
            {
                category: "Cas cliniques",
                question: "Jeune homme avec AVP violent en moto : douleur importante, d√©formation cuisse gauche avec raccourcissement et rotation, cuisse tendue √† la palpation. Hypoth√®se diagnostique ?",
                answer: "Fracture du f√©mur"
            },
            {
                category: "Cas cliniques",
                question: "Pour confirmer une suspicion de fracture du f√©mur, quel bilan radiologique pr√©coniser ?",
                answer: "F√©mur de face et profil en ayant bien les 2 articulations sus et sous-jacentes (hanche et genou)"
            },
            {
                category: "Cas cliniques",
                question: "Traitement d'une fracture du f√©mur ?",
                answer: "R√©duction si d√©placement puis ost√©osynth√®se par enclouage ou plaque"
            },

            // Cas clinique polyarthrite
            {
                category: "Cas cliniques",
                question: "Patiente 50 ans : enraidissement douloureux des articulations des mains + gonflement de plusieurs articulations. Hypoth√®se diagnostique ?",
                answer: "Polyarthrite rhumato√Øde d√©butante"
            },
            {
                category: "Cas cliniques",
                question: "Classification de la polyarthrite rhumato√Øde ?",
                answer: "Maladie auto-immune"
            },
            {
                category: "Cas cliniques",
                question: "Quels sont les 3 examens permettant de confirmer le diagnostic de polyarthrite rhumato√Øde ?",
                answer: "1. Examen clinique<br>2. Examens d'imagerie : radiographie, IRM<br>3. Analyses biologiques : facteur rhumato√Øde, syndrome inflammatoire"
            },
            {
                category: "Cas cliniques",
                question: "Traitements de la polyarthrite rhumato√Øde ?",
                answer: "<strong>Symptomatiques :</strong> AINS, antalgiques, cortico√Ødes<br><strong>Locaux :</strong> Infiltrations<br><strong>De fond :</strong> Immunosuppresseurs (m√©thotrexate), bioth√©rapies"
            }
        ];

        // Test questions data
        const testQuestions = [
            {
                type: "mcq",
                question: "L'hom√©ostasie correspond √† :",
                options: [
                    "La production d'√©nergie par les cellules",
                    "L'√©limination des d√©chets par les reins",
                    "La circulation du sang dans les vaisseaux",
                    "Le maintien de la stabilit√© du milieu int√©rieur"
                ],
                correct: 3,
                explanation: "L'hom√©ostasie est le processus de r√©gulation qui permet de maintenir la stabilit√© du milieu int√©rieur malgr√© les variations du milieu ext√©rieur."
            },
            {
                type: "mcq",
                question: "Les thermor√©cepteurs d√©tectent principalement :",
                options: [
                    "La temp√©rature du corps",
                    "La pression art√©rielle",
                    "La glyc√©mie",
                    "La concentration en O‚ÇÇ sanguin"
                ],
                correct: 0,
                explanation: "Les thermor√©cepteurs sont des r√©cepteurs sensoriels sp√©cialis√©s dans la d√©tection des variations de temp√©rature."
            },
            {
                type: "mcq",
                question: "Lors d'une augmentation de la temp√©rature corporelle, l'organisme r√©agit par :",
                options: [
                    "Vasoconstriction cutan√©e",
                    "Frissons",
                    "Sudation et vasodilatation",
                    "Augmentation de la thermogen√®se"
                ],
                correct: 2,
                explanation: "Pour √©vacuer la chaleur, l'organisme augmente la sudation (√©vaporation rafra√Æchissante) et dilate les vaisseaux cutan√©s (radiation de chaleur)."
            },
            {
                type: "mcq",
                question: "La bradycardie correspond √† :",
                options: [
                    "Une fr√©quence cardiaque trop √©lev√©e",
                    "Une fr√©quence cardiaque trop basse",
                    "Une pression art√©rielle trop basse",
                    "Une respiration trop lente"
                ],
                correct: 1,
                explanation: "La bradycardie d√©signe une fr√©quence cardiaque inf√©rieure √† 60 battements par minute."
            },
            {
                type: "mcq",
                question: "Quelle est la premi√®re barri√®re de d√©fense de l'organisme ?",
                options: [
                    "Les anticorps",
                    "La peau et les muqueuses",
                    "Les lymphocytes T",
                    "Les cytokines"
                ],
                correct: 1,
                explanation: "La peau et les muqueuses constituent la premi√®re ligne de d√©fense physique contre les agents pathog√®nes."
            },
            {
                type: "mcq",
                question: "Quel organe est un organe lympho√Øde secondaire ?",
                options: [
                    "Thymus",
                    "Ganglion lymphatique",
                    "Moelle osseuse",
                    "Le pancr√©as"
                ],
                correct: 1,
                explanation: "Les ganglions lymphatiques sont des organes lympho√Ødes secondaires o√π se d√©roulent les r√©ponses immunitaires. Le thymus et la moelle osseuse sont des organes primaires."
            },
            {
                type: "mcq",
                question: "Quel est le r√¥le principal des macrophages ?",
                options: [
                    "Produire des anticorps",
                    "Pas de r√¥le dans l'immunit√©",
                    "D√©truire directement les cellules infect√©es",
                    "Phagocyter les agents pathog√®nes"
                ],
                correct: 3,
                explanation: "Les macrophages sont des cellules phagocytaires qui ing√®rent et d√©truisent les agents pathog√®nes et les d√©bris cellulaires."
            },
            {
                type: "mcq",
                question: "Une fracture comminutive se d√©finit par :",
                options: [
                    "Une fracture en spirale",
                    "La pr√©sence de plusieurs fragments osseux",
                    "Une fissure sans d√©placement",
                    "Un arrachement osseux"
                ],
                correct: 1,
                explanation: "Une fracture comminutive est caract√©ris√©e par la fragmentation de l'os en plusieurs morceaux."
            },
            {
                type: "mcq",
                question: "Une fracture spiro√Øde est caus√©e principalement par :",
                options: [
                    "Une compression",
                    "Un choc direct",
                    "Une torsion",
                    "Une hyperextension"
                ],
                correct: 2,
                explanation: "Les fractures spiro√Ødes sont des fractures en spirale typiquement caus√©es par un m√©canisme de torsion."
            },
            {
                type: "mcq",
                question: "Une fracture transversale se d√©finit par :",
                options: [
                    "Un trait oblique",
                    "Un trait en spirale",
                    "Une fissure longitudinale",
                    "Un trait perpendiculaire √† l'axe de l'os"
                ],
                correct: 3,
                explanation: "Une fracture transversale pr√©sente un trait de fracture perpendiculaire √† l'axe longitudinal de l'os."
            },
            {
                type: "mcq",
                question: "Une fracture ouverte se d√©finit par :",
                options: [
                    "Deux os cass√©s en m√™me temps",
                    "Une d√©formation du membre",
                    "Une communication entre l'os fractur√© et l'ext√©rieur",
                    "La pr√©sence de plusieurs fragments"
                ],
                correct: 2,
                explanation: "Une fracture ouverte (ou expos√©e) est caract√©ris√©e par une communication entre le foyer de fracture et l'ext√©rieur, avec risque infectieux majeur."
            },
            {
                type: "mcq",
                question: "Une fracture tassement par compression se rencontre typiquement :",
                options: [
                    "Au niveau du col du f√©mur",
                    "Au niveau des c√¥tes",
                    "Au niveau du radius distal",
                    "Au niveau des vert√®bres"
                ],
                correct: 3,
                explanation: "Les fractures par tassement sont caract√©ristiques des vert√®bres, surtout en cas d'ost√©oporose."
            },
            {
                type: "fill",
                question: "Le __________ est une couche de tissu fibreux qui recouvre l'os.",
                answer: "p√©rioste",
                explanation: "Le p√©rioste est une membrane fibro-vasculaire qui recouvre la surface externe de l'os."
            },
            {
                type: "fill",
                question: "L'__________ est l'√©tude des causes des maladies.",
                answer: "√©tiologie",
                explanation: "L'√©tiologie √©tudie les causes et origines des maladies."
            },
            {
                type: "fill",
                question: "Un __________ est une excroissance osseuse d√©velopp√©e au rebord des surfaces articulaires.",
                answer: "ost√©ophyte",
                explanation: "Les ost√©ophytes sont des excroissances osseuses typiques de l'arthrose."
            },
            {
                type: "fill",
                question: "Le r√¥le du tissu cartilagineux est de r√©duire les __________ entre les structures osseuses.",
                answer: "frictions",
                explanation: "Le cartilage articulaire permet un glissement fluide des surfaces osseuses."
            },
            {
                type: "matching",
                question: "Associez chaque type de cellule osseuse √† sa fonction :",
                pairs: [
                    { left: "Ost√©oclastes", right: "D√©truisent l'os" },
                    { left: "Ost√©oblastes", right: "Forment le tissu osseux" },
                    { left: "Ost√©ocytes", right: "Entretiennent la trame osseuse" }
                ],
                explanation: "Ces trois types cellulaires assurent le remodelage osseux constant tout au long de la vie."
            },
            {
                type: "matching",
                question: "Associez chaque type d'articulation √† son degr√© de mobilit√© :",
                pairs: [
                    { left: "Synarthrose", right: "Immobile" },
                    { left: "Amphiarthrose", right: "Semi-mobile" },
                    { left: "Diarthrose", right: "Tr√®s mobile" }
                ],
                explanation: "La classification des articulations se base sur leur degr√© de mobilit√© et leur structure."
            },
            {
                type: "matching",
                question: "Associez chaque syst√®me √† sa fonction principale :",
                pairs: [
                    { left: "Syst√®me nerveux", right: "V√©hiculer les informations" },
                    { left: "Syst√®me t√©gumentaire", right: "Protection (barri√®re)" },
                    { left: "Syst√®me endocrinien", right: "R√©gulation" },
                    { left: "Syst√®me immunitaire", right: "D√©fense" }
                ],
                explanation: "Chaque syst√®me corporel a une fonction sp√©cifique qui contribue √† l'hom√©ostasie."
            }
        ];

        // Flashcards state
        let currentFilter = 'all';
        let currentCardIndex = 0;
        let filteredCards = [];
        let cardStates = {};

        // Initialize flashcards
        function initFlashcards() {
            // Load saved states or initialize
            const saved = localStorage.getItem('cardStates');
            if (saved) {
                cardStates = JSON.parse(saved);
            } else {
                flashcardsData.forEach((_, index) => {
                    cardStates[index] = {
                        status: 'new',
                        reviewCount: 0
                    };
                });
            }
            filterCards('all');
            updateStats();
        }

        function filterCards(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Filter cards based on status
            filteredCards = flashcardsData.map((card, index) => ({
                card,
                index,
                state: cardStates[index]
            })).filter(item => {
                switch(filter) {
                    case 'new': return item.state.status === 'new';
                    case 'review': return item.state.status === 'review' || item.state.status === 'not-acquired';
                    case 'acquired': return item.state.status === 'acquired';
                    default: return true;
                }
            });

            currentCardIndex = 0;
            if (filteredCards.length > 0) {
                displayCard();
            } else {
                document.getElementById('card-question').innerHTML = "Aucune carte dans cette cat√©gorie";
                document.getElementById('card-answer').innerHTML = "Changez de filtre pour voir d'autres cartes";
            }
        }

        function displayCard() {
            if (filteredCards.length === 0) return;

            const { card, index } = filteredCards[currentCardIndex];
            
            document.getElementById('card-category').textContent = card.category;
            document.getElementById('card-category-back').textContent = card.category;
            document.getElementById('card-question').innerHTML = card.question;
            document.getElementById('card-answer').innerHTML = card.answer;
            document.getElementById('card-number').textContent = `${currentCardIndex + 1}/${filteredCards.length}`;
            document.getElementById('card-number-back').textContent = `${currentCardIndex + 1}/${filteredCards.length}`;

            // Reset flip
            document.getElementById('flashcard').classList.remove('flipped');

            updateProgress();
        }

        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function rateCard(rating) {
            const { index } = filteredCards[currentCardIndex];
            
            switch(rating) {
                case 'acquired':
                    cardStates[index].status = 'acquired';
                    break;
                case 'review':
                    cardStates[index].status = 'review';
                    cardStates[index].reviewCount = 1;
                    break;
                case 'not-acquired':
                    cardStates[index].status = 'not-acquired';
                    cardStates[index].reviewCount = 3;
                    break;
            }

            saveProgress();
            
            // Move to next card
            if (currentCardIndex < filteredCards.length - 1) {
                currentCardIndex++;
                displayCard();
            } else {
                // Re-filter to update the deck
                filterCards(currentFilter);
            }

            updateStats();
        }

        function updateStats() {
            const total = flashcardsData.length;
            const acquired = Object.values(cardStates).filter(s => s.status === 'acquired').length;
            const newCards = Object.values(cardStates).filter(s => s.status === 'new').length;
            const review = Object.values(cardStates).filter(s => s.status === 'review' || s.status === 'not-acquired').length;

            document.getElementById('total-cards').textContent = total;
            document.getElementById('acquired-cards').textContent = acquired;
            document.getElementById('new-cards').textContent = newCards;
            document.getElementById('review-cards').textContent = review;

            const progress = Math.round((acquired / total) * 100);
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-fill').textContent = progress + '%';
        }

        function updateProgress() {
            const progress = Math.round(((currentCardIndex + 1) / filteredCards.length) * 100);
            // This shows progress through current deck
        }

        function saveProgress() {
            localStorage.setItem('cardStates', JSON.stringify(cardStates));
        }

        function exportProgress() {
            const dataStr = JSON.stringify(cardStates, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'flashcards-progress.json';
            a.click();
        }

        function importProgress(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    cardStates = JSON.parse(e.target.result);
                    saveProgress();
                    filterCards(currentFilter);
                    updateStats();
                    alert('Progression import√©e avec succ√®s !');
                } catch (error) {
                    alert('Erreur lors de l\'importation du fichier');
                }
            };
            reader.readAsText(file);
        }

        function resetProgress() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser toute votre progression ?')) {
                flashcardsData.forEach((_, index) => {
                    cardStates[index] = {
                        status: 'new',
                        reviewCount: 0
                    };
                });
                saveProgress();
                filterCards('all');
                updateStats();
            }
        }

        // Test mode functions
        let userAnswers = {};
        let matchingSelections = {};

        function initTest() {
            const container = document.getElementById('test-container');
            container.innerHTML = '';

            testQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.innerHTML = `
                    <div class="question-header">Question ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                `;

                if (q.type === 'mcq') {
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    q.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'option';
                        optionDiv.textContent = option;
                        optionDiv.onclick = () => selectOption(index, optIndex);
                        optionsDiv.appendChild(optionDiv);
                    });
                    questionDiv.appendChild(optionsDiv);
                } else if (q.type === 'fill') {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'input-answer';
                    input.placeholder = 'Entrez votre r√©ponse...';
                    input.oninput = (e) => userAnswers[index] = e.target.value.trim().toLowerCase();
                    questionDiv.appendChild(input);
                } else if (q.type === 'matching') {
                    const matchingDiv = document.createElement('div');
                    matchingDiv.className = 'matching-container';
                    matchingDiv.id = `matching-${index}`;
                    
                    const leftCol = document.createElement('div');
                    leftCol.className = 'matching-column';
                    const rightCol = document.createElement('div');
                    rightCol.className = 'matching-column';

                    // Shuffle right column
                    const shuffledRight = [...q.pairs].sort(() => Math.random() - 0.5);

                    q.pairs.forEach((pair, pairIndex) => {
                        const leftItem = document.createElement('div');
                        leftItem.className = 'matching-item';
                        leftItem.textContent = pair.left;
                        leftItem.dataset.index = pairIndex;
                        leftItem.onclick = () => selectMatching(index, 'left', pairIndex);
                        leftCol.appendChild(leftItem);
                    });

                    shuffledRight.forEach((pair, pairIndex) => {
                        const rightItem = document.createElement('div');
                        rightItem.className = 'matching-item';
                        rightItem.textContent = pair.right;
                        const originalIndex = q.pairs.findIndex(p => p.right === pair.right);
                        rightItem.dataset.index = originalIndex;
                        rightItem.onclick = () => selectMatching(index, 'right', originalIndex);
                        rightCol.appendChild(rightItem);
                    });

                    matchingDiv.appendChild(leftCol);
                    matchingDiv.appendChild(rightCol);
                    questionDiv.appendChild(matchingDiv);
                }

                const explanation = document.createElement('div');
                explanation.className = 'explanation';
                explanation.innerHTML = `<strong>Explication :</strong> ${q.explanation}`;
                questionDiv.appendChild(explanation);

                container.appendChild(questionDiv);
            });
        }

        function selectOption(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;
            
            const options = document.querySelectorAll(`.question-container:nth-child(${questionIndex + 1}) .option`);
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                }
            });
        }

        function selectMatching(questionIndex, side, itemIndex) {
            if (!matchingSelections[questionIndex]) {
                matchingSelections[questionIndex] = {};
            }

            const selection = matchingSelections[questionIndex];
            const container = document.getElementById(`matching-${questionIndex}`);
            const items = container.querySelectorAll('.matching-item');

            if (side === 'left') {
                // Deselect previous left selection
                items.forEach(item => {
                    if (item.parentElement.classList.contains('matching-column') && 
                        item.parentElement === container.firstChild) {
                        item.classList.remove('selected');
                    }
                });
                
                selection.left = itemIndex;
                items[itemIndex].classList.add('selected');
            } else {
                // Deselect previous right selection
                items.forEach(item => {
                    if (item.parentElement.classList.contains('matching-column') && 
                        item.parentElement === container.lastChild) {
                        item.classList.remove('selected');
                    }
                });
                
                selection.right = itemIndex;
                const rightItems = container.querySelectorAll('.matching-column:last-child .matching-item');
                rightItems.forEach(item => {
                    if (parseInt(item.dataset.index) === itemIndex) {
                        item.classList.add('selected');
                    }
                });
            }

            // If both selected, record the match
            if (selection.left !== undefined && selection.right !== undefined) {
                if (!userAnswers[questionIndex]) {
                    userAnswers[questionIndex] = [];
                }
                userAnswers[questionIndex].push([selection.left, selection.right]);

                // Mark as matched
                items.forEach(item => {
                    if (item.classList.contains('selected')) {
                        item.classList.remove('selected');
                        item.classList.add('matched');
                    }
                });

                // Reset selection
                delete matchingSelections[questionIndex];
            }
        }

        function submitTest() {
            let correct = 0;
            const total = testQuestions.length;

            testQuestions.forEach((q, index) => {
                const questionDiv = document.querySelectorAll('.question-container')[index];
                const explanation = questionDiv.querySelector('.explanation');
                explanation.classList.add('show');

                if (q.type === 'mcq') {
                    const options = questionDiv.querySelectorAll('.option');
                    options.forEach((opt, optIndex) => {
                        if (optIndex === q.correct) {
                            opt.classList.add('correct');
                        }
                        if (userAnswers[index] === optIndex && optIndex !== q.correct) {
                            opt.classList.add('incorrect');
                        }
                    });
                    if (userAnswers[index] === q.correct) {
                        correct++;
                    }
                } else if (q.type === 'fill') {
                    const input = questionDiv.querySelector('.input-answer');
                    const userAnswer = (userAnswers[index] || '').toLowerCase().trim();
                    const correctAnswer = q.answer.toLowerCase().trim();
                    
                    if (userAnswer === correctAnswer) {
                        input.style.borderColor = '#22c55e';
                        input.style.background = '#dcfce7';
                        correct++;
                    } else {
                        input.style.borderColor = '#ef4444';
                        input.style.background = '#fee2e2';
                        input.value = `${userAnswer || '(vide)'} ‚Üí Correct: ${q.answer}`;
                    }
                } else if (q.type === 'matching') {
                    const matches = userAnswers[index] || [];
                    let allCorrect = matches.length === q.pairs.length;
                    
                    matches.forEach(match => {
                        if (match[0] !== match[1]) {
                            allCorrect = false;
                        }
                    });

                    if (allCorrect) {
                        correct++;
                    }
                }
            });

            const score = Math.round((correct / total) * 100);
            displayResults(score, correct, total);

            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('test-container').style.display = 'none';
        }

        function displayResults(score, correct, total) {
            const resultsDiv = document.getElementById('results');
            const scoreCircle = document.getElementById('score-circle');
            const resultsTitle = document.getElementById('results-title');
            const resultsMessage = document.getElementById('results-message');

            scoreCircle.textContent = score + '%';
            resultsTitle.textContent = `${correct}/${total} bonnes r√©ponses`;

            if (score >= 90) {
                scoreCircle.className = 'score-circle score-excellent';
                resultsMessage.textContent = 'üéâ Excellent travail ! Vous ma√Ætrisez parfaitement le sujet !';
            } else if (score >= 70) {
                scoreCircle.className = 'score-circle score-good';
                resultsMessage.textContent = 'üëç Tr√®s bien ! Quelques r√©visions et ce sera parfait !';
            } else if (score >= 50) {
                scoreCircle.className = 'score-circle score-average';
                resultsMessage.textContent = 'üìö Pas mal, mais continuez √† r√©viser pour am√©liorer votre score.';
            } else {
                scoreCircle.className = 'score-circle score-poor';
                resultsMessage.textContent = 'üí™ Courage ! Reprenez les flashcards pour mieux comprendre.';
            }

            resultsDiv.classList.add('show');
        }

        function resetTest() {
            userAnswers = {};
            matchingSelections = {};
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('test-container').style.display = 'block';
            document.getElementById('submit-btn').style.display = 'block';
            
            initTest();
        }

        // Mode switching
        function switchMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('.mode-content').forEach(content => {
                content.classList.remove('active');
            });

            if (mode === 'flashcards') {
                document.getElementById('flashcards-mode').classList.add('active');
            } else {
                document.getElementById('test-mode').classList.add('active');
                resetTest();
            }
        }

        // Initialize on load
        window.onload = function() {
            initFlashcards();
            initTest();
        };
    </script>
</body>
</html>