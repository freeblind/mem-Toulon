<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD S√©miologie-Pathologie : Oncologie & Membre Inf√©rieur</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .mode-selector {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .mode-btn {
            background: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .mode-content {
            display: none;
        }

        .mode-content.active {
            display: block;
        }

        /* FLASHCARDS MODE */
        .flashcard-controls {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filter-btn {
            background: #f0f0f0;
            border: 2px solid transparent;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: #e0e0e0;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .save-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .save-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }

        .save-btn.export {
            background: #2196F3;
        }

        .save-btn.import {
            background: #FF9800;
        }

        .save-btn.reset {
            background: #f44336;
        }

        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 30px;
        }

        .flashcard {
            background: white;
            border-radius: 20px;
            padding: 40px;
            min-height: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-face {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            border-radius: 20px;
        }

        .flashcard-back {
            transform: rotateY(180deg);
            background: #f8f9fa;
        }

        .flashcard-category {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .flashcard-question {
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .flashcard-answer {
            font-size: 1.2em;
            text-align: center;
            color: #555;
            line-height: 1.8;
        }

        .flashcard-answer ul {
            text-align: left;
            display: inline-block;
            margin-top: 15px;
        }

        .flashcard-answer li {
            margin-bottom: 10px;
        }

        .evaluation-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .eval-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .eval-btn.acquired {
            background: #4CAF50;
        }

        .eval-btn.review {
            background: #FF9800;
        }

        .eval-btn.not-acquired {
            background: #f44336;
        }

        .eval-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* TEST MODE */
        .test-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .question-block {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .question-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .question-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-bottom: 15px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="checkbox"],
        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .option.correct {
            background: #d4edda;
            border-color: #4CAF50;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #f44336;
        }

        .fill-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .fill-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .matching-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .matching-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }

        .matching-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 10px;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 10px;
            border-left: 4px solid #2196F3;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation strong {
            color: #1976D2;
        }

        .test-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .test-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .test-btn.submit {
            background: #4CAF50;
        }

        .test-btn.retry {
            background: #2196F3;
        }

        .test-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .results {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: none;
        }

        .results.show {
            display: block;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 30px auto;
            color: white;
        }

        .score-value {
            font-size: 3em;
            font-weight: bold;
        }

        .score-label {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .score-message {
            font-size: 1.3em;
            margin: 20px 0;
            color: #333;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5em;
            }

            .mode-selector {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .flashcard {
                padding: 30px 20px;
                min-height: 350px;
            }

            .flashcard-question {
                font-size: 1.2em;
            }

            .evaluation-buttons {
                flex-direction: column;
            }

            .eval-btn {
                width: 100%;
            }

            .matching-grid {
                grid-template-columns: 1fr;
            }

            .test-actions {
                flex-direction: column;
            }

            .test-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• TD S√©miologie-Pathologie</h1>
            <p>Oncologie & Pathologies du Membre Inf√©rieur - UE 2.5 S1</p>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('flashcards')">üìö Mode Flashcards</button>
            <button class="mode-btn" onclick="switchMode('test')">üìù Mode Test</button>
        </div>

        <!-- MODE FLASHCARDS -->
        <div id="flashcards-mode" class="mode-content active">
            <div class="flashcard-controls">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="total-cards">0</h3>
                        <p>Total</p>
                    </div>
                    <div class="stat-card" style="background: #4CAF50;">
                        <h3 id="acquired-cards">0</h3>
                        <p>Acquises</p>
                    </div>
                    <div class="stat-card" style="background: #FF9800;">
                        <h3 id="review-cards">0</h3>
                        <p>√Ä revoir</p>
                    </div>
                    <div class="stat-card" style="background: #f44336;">
                        <h3 id="not-acquired-cards">0</h3>
                        <p>Non acquises</p>
                    </div>
                    <div class="stat-card" style="background: #2196F3;">
                        <h3 id="new-cards">0</h3>
                        <p>Nouvelles</p>
                    </div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill">0%</div>
                </div>

                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterCards('all')">Toutes les cartes</button>
                    <button class="filter-btn" onclick="filterCards('new')">Nouvelles</button>
                    <button class="filter-btn" onclick="filterCards('review')">√Ä r√©viser</button>
                    <button class="filter-btn" onclick="filterCards('acquired')">Acquises</button>
                </div>

                <div class="save-buttons">
                    <button class="save-btn" onclick="saveProgress()">üíæ Sauvegarder</button>
                    <button class="save-btn export" onclick="exportProgress()">üì§ Exporter</button>
                    <button class="save-btn import" onclick="document.getElementById('import-file').click()">üì• Importer</button>
                    <button class="save-btn reset" onclick="resetProgress()">üîÑ R√©initialiser</button>
                    <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importProgress(event)">
                </div>
            </div>

            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="flashcard-face">
                        <div class="flashcard-category" id="card-category"></div>
                        <div class="flashcard-question" id="card-question"></div>
                        <p style="color: #999; font-style: italic; margin-top: 20px;">Cliquez pour r√©v√©ler la r√©ponse</p>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <div class="flashcard-category" id="card-category-back"></div>
                        <div class="flashcard-answer" id="card-answer"></div>
                    </div>
                </div>
            </div>

            <div class="evaluation-buttons">
                <button class="eval-btn acquired" onclick="evaluateCard('acquired')">‚úÖ Acquis</button>
                <button class="eval-btn review" onclick="evaluateCard('review')">‚ö†Ô∏è √Ä revoir</button>
                <button class="eval-btn not-acquired" onclick="evaluateCard('not-acquired')">‚ùå Non acquis</button>
            </div>
        </div>

        <!-- MODE TEST -->
        <div id="test-mode" class="mode-content">
            <div class="test-container" id="test-questions"></div>
            <div class="test-actions">
                <button class="test-btn submit" onclick="submitTest()">‚úÖ Soumettre le test</button>
                <button class="test-btn retry hidden" id="retry-btn" onclick="retryTest()">üîÑ Recommencer</button>
            </div>
            <div class="results" id="results">
                <h2>R√©sultats du test</h2>
                <div class="score-circle">
                    <div class="score-value" id="score-value">0%</div>
                    <div class="score-label">Score</div>
                </div>
                <div class="score-message" id="score-message"></div>
                <p id="score-details"></p>
            </div>
        </div>
    </div>

    <script>
        // DONN√âES DES FLASHCARDS
        const flashcardsData = [
            {
                category: "Tumeurs osseuses",
                question: "Quelles sont les caract√©ristiques des tumeurs b√©nignes ?",
                answer: "‚Ä¢ Non canc√©reuses<br>‚Ä¢ Incapables de se diss√©miner dans le reste de l'organisme<br>‚Ä¢ Ne mettent pas en jeu le pronostic vital<br>‚Ä¢ G√©n√©ralement peu ou lentement √©volutives"
            },
            {
                category: "Tumeurs osseuses",
                question: "Citez 5 exemples de tumeurs b√©nignes",
                answer: "1. Ost√©ochondrome ou exostose<br>2. Enchondrome<br>3. Chondroblastome b√©nin<br>4. Ost√©ome ost√©o√Øde<br>5. Tumeurs √† cellules g√©antes"
            },
            {
                category: "Tumeurs osseuses",
                question: "Quelles sont les caract√©ristiques des tumeurs malignes ?",
                answer: "‚Ä¢ Canc√©reuses<br>‚Ä¢ Diss√©mination dans le reste de l'organisme<br>‚Ä¢ Pronostic vital engag√©<br>‚Ä¢ √âvolution rapide"
            },
            {
                category: "Tumeurs osseuses",
                question: "Citez 5 exemples de tumeurs malignes",
                answer: "1. Ost√©osarcome<br>2. Chondrosarcome<br>3. Sarcome d'Ewing<br>4. Lymphome osseux primitif<br>5. Plasmocytome solitaire"
            },
            {
                category: "Tumeurs osseuses",
                question: "Qu'est-ce qu'une tumeur osseuse primitive ?",
                answer: "C'est une tumeur issue de l'os elle-m√™me"
            },
            {
                category: "Tumeurs osseuses",
                question: "Qu'est-ce qu'une tumeur osseuse secondaire ?",
                answer: "C'est une d√©localisation de la tumeur primitive au niveau osseux (cancers ost√©ophiles : poumon, prostate, rein, sein, thyro√Øde)"
            },
            {
                category: "M√©tastases osseuses",
                question: "D√©finissez les m√©tastases osseuses",
                answer: "Ce sont des localisations osseuses d'une tumeur maligne primitive avec reproduction fid√®le des caract√©ristiques anatomopathologiques de la tumeur initiale"
            },
            {
                category: "M√©tastases osseuses",
                question: "Quelles sont les 5 localisations les plus fr√©quentes des m√©tastases osseuses ?",
                answer: "1. Rachis<br>2. Bassin<br>3. Cr√¢ne<br>4. C√¥tes<br>5. Extr√©mit√©s proximales des hum√©rus et des f√©murs (localisations distales plus rares)"
            },
            {
                category: "M√©tastases osseuses",
                question: "D√©crivez les l√©sions ost√©olytiques",
                answer: "G√©odes ou larges plages d'ost√©olyse d√©truisant la corticale, sans condensation p√©riph√©rique"
            },
            {
                category: "M√©tastases osseuses",
                question: "D√©crivez les l√©sions ost√©ocondensantes",
                answer: "Opacit√©s arrondies ou ovalaires en t√¢ches de bougie"
            },
            {
                category: "My√©lome",
                question: "D√©finissez le my√©lome",
                answer: "‚Ä¢ H√©mopathie maligne<br>‚Ä¢ Prolif√©ration plasmocytaire intram√©dullaire<br>‚Ä¢ S√©cr√©tion d'une immunoglobuline monoclonale<br>‚Ä¢ Manifestations osseuses au premier plan"
            },
            {
                category: "Fractures de la hanche",
                question: "Quels sont les 2 types de fractures de la hanche ?",
                answer: "1. Fracture cervicale vraie (col du f√©mur)<br>2. Fracture trochant√©rienne et sous-trochant√©rienne"
            },
            {
                category: "Fractures du genou",
                question: "Citez les 3 types de fractures du genou",
                answer: "1. Fractures supracondyliennes<br>2. Fractures unicondyliennes<br>3. Fractures supra intercondyliennes"
            },
            {
                category: "Entorse de cheville",
                question: "Quels sont les signes cliniques d'une entorse de cheville ?",
                answer: "‚Ä¢ Douleur post-traumatique<br>‚Ä¢ ≈íd√®me p√©ri-mall√©olaire ant√©ro-lat√©ral<br>‚Ä¢ Douleur √† la palpation<br>‚Ä¢ Possible craquement entendu"
            },
            {
                category: "Entorse de cheville",
                question: "Quel bilan radiologique pour une entorse de cheville ?",
                answer: "Radiographies face et profil de la cheville pour rechercher une fracture ou un arrachement associ√©s"
            },
            {
                category: "Entorse de cheville",
                question: "Quel est le traitement d'une entorse de cheville ?",
                answer: "‚Ä¢ Antalgiques<br>‚Ä¢ Contention (4-6 semaines)<br>‚Ä¢ Protocole RICE (Repos, Ice/glace, Compression, √âl√©vation)<br>‚Ä¢ Appui d√®s cessation de la douleur<br>‚Ä¢ Kin√©sith√©rapie √† distance"
            },
            {
                category: "Fracture du col du f√©mur",
                question: "Quels sont les signes cliniques d'une fracture du col du f√©mur ?",
                answer: "‚Ä¢ Forte douleur au niveau du bassin<br>‚Ä¢ Impotence fonctionnelle<br>‚Ä¢ D√©formation (rotation externe et raccourcissement du membre)<br>‚Ä¢ Contexte : souvent chute chez personne √¢g√©e"
            },
            {
                category: "Fracture du col du f√©mur",
                question: "Quel bilan radiologique pour une fracture du col du f√©mur ?",
                answer: "Bassin de face + Hanche face et profil du c√¥t√© atteint"
            },
            {
                category: "Fracture du col du f√©mur",
                question: "Quel traitement chirurgical pour une fracture trochant√©rienne ?",
                answer: "Ost√©osynth√®se : vissage ou plaque et lame / plaque ou vis / plaque"
            },
            {
                category: "Fracture du col du f√©mur",
                question: "Quels sont les objectifs th√©rapeutiques chez la personne √¢g√©e avec fracture de hanche ?",
                answer: "‚Ä¢ Lev√©e pr√©coce<br>‚Ä¢ Redonner son autonomie au patient<br>‚Ä¢ √âviter les complications du d√©cubitus"
            },
            {
                category: "Entorse du genou",
                question: "Quels sont les signes cliniques d'une entorse du genou ?",
                answer: "‚Ä¢ Douleur vive<br>‚Ä¢ Craquement entendu<br>‚Ä¢ Gonflement du genou<br>‚Ä¢ Sensation d'instabilit√©<br>‚Ä¢ √âpanchement intra-articulaire<br>‚Ä¢ Points douloureux sur l'interligne<br>‚Ä¢ Pr√©sence de laxit√©s"
            },
            {
                category: "Entorse du genou",
                question: "Quel bilan pour une entorse du genou ?",
                answer: "‚Ä¢ Radiographies face + profil du genou (recherche fracture/arrachement)<br>‚Ä¢ IRM du genou en compl√©ment"
            },
            {
                category: "M√©tastases osseuses - Diagnostic",
                question: "Quels sont les signes cliniques √©vocateurs de m√©tastases osseuses ?",
                answer: "‚Ä¢ AEG (Amaigrissement, asth√©nie)<br>‚Ä¢ Douleurs osseuses d'allure inflammatoire<br>‚Ä¢ ATCD de cancer (sein, poumon, prostate, rein, thyro√Øde)<br>‚Ä¢ Syndrome inflammatoire et hypercalc√©mie au bilan biologique"
            },
            {
                category: "M√©tastases osseuses - Diagnostic",
                question: "Quel bilan radiologique en 1√®re intention pour m√©tastases osseuses ?",
                answer: "Radiographies du rachis face + profil"
            },
            {
                category: "M√©tastases osseuses - Diagnostic",
                question: "Que recherche-t-on sur les radios en cas de suspicion de m√©tastases ?",
                answer: "‚Ä¢ L√©sions ost√©olytiques : g√©odes<br>‚Ä¢ L√©sions ost√©ocondensantes : vert√®bre borgne, vert√®bre ivoire"
            },
            {
                category: "M√©tastases osseuses - Diagnostic",
                question: "Citez 3 examens d'imagerie compl√©mentaires pour m√©tastases osseuses",
                answer: "1. Scintigraphie osseuse ou TEP scan<br>2. Scanner<br>3. IRM"
            },
            {
                category: "Traumatologie membre sup√©rieur",
                question: "Quels sont les 2 os de l'avant-bras ?",
                answer: "Radius et ulna (cubitus)"
            },
            {
                category: "Traumatologie membre sup√©rieur",
                question: "Quelles radiographies r√©aliser pour un traumatisme de l'avant-bras ?",
                answer: "Radiographie de face et de profil de l'avant-bras, comprenant les 2 articulations (coude et poignet) + clich√©s comparatifs si doute"
            },
            {
                category: "Traumatologie membre sup√©rieur",
                question: "Qu'est-ce qu'une fracture de Monteggia ?",
                answer: "Fracture de l'ulna (¬± radius) avec luxation de la t√™te radiale"
            },
            {
                category: "Traumatologie du rachis",
                question: "Quels sont les 4 points √† √©valuer lors d'un examen neurologique apr√®s traumatisme rachidien ?",
                answer: "1. Douleur<br>2. D√©ficits sensitifs<br>3. D√©ficits moteurs<br>4. D√©ficits v√©sico-sphinct√©riens"
            },
            {
                category: "Traumatologie du rachis",
                question: "Quel document r√©sume la prise en charge neurologique d'un traumatisme rachidien ?",
                answer: "Fiche ASIA (√©chelle de d√©ficience)"
            },
            {
                category: "Traumatologie du rachis",
                question: "Quels examens radiologiques pour un traumatisme rachidien ?",
                answer: "‚Ä¢ Radiologie standard : face/profil de la zone concern√©e<br>‚Ä¢ Scanner : d√©terminer stabilit√©, acquisitions axiales avec reconstructions<br>‚Ä¢ IRM : s√©quence STIR pour l√©sions ligamentaires et datation (hypersignal)"
            },
            {
                category: "Traumatologie du rachis",
                question: "Quel traitement pour une fracture vert√©brale instable ?",
                answer: "Chirurgie avec vis, tiges, cages, greffes, ciment"
            },
            {
                category: "Traumatologie du rachis",
                question: "Quels sont les 3 objectifs du traitement chirurgical d'une fracture vert√©brale ?",
                answer: "1. R√©duire<br>2. D√©comprimer<br>3. Stabiliser"
            }
        ];

        // DONN√âES DES QUESTIONS DE TEST
        const testQuestions = [
            {
                type: "qcm",
                question: "Quelles sont les caract√©ristiques des tumeurs b√©nignes ? (plusieurs r√©ponses possibles)",
                options: [
                    "Non canc√©reuses",
                    "√âvolution rapide",
                    "Ne mettent pas en jeu le pronostic vital",
                    "Diss√©mination dans l'organisme",
                    "G√©n√©ralement peu ou lentement √©volutives"
                ],
                correct: [0, 2, 4],
                explanation: "Les tumeurs b√©nignes sont non canc√©reuses, ne mettent pas en jeu le pronostic vital, et sont g√©n√©ralement peu ou lentement √©volutives. Elles ne se diss√©minent pas."
            },
            {
                type: "qcm",
                question: "Parmi ces tumeurs, lesquelles sont malignes ?",
                options: [
                    "Ost√©ochondrome",
                    "Ost√©osarcome",
                    "Enchondrome",
                    "Sarcome d'Ewing",
                    "Ost√©ome ost√©o√Øde"
                ],
                correct: [1, 3],
                explanation: "L'ost√©osarcome et le sarcome d'Ewing sont des tumeurs malignes. Les autres sont b√©nignes."
            },
            {
                type: "fill",
                question: "Une tumeur osseuse __________ est une tumeur issue de l'os lui-m√™me, tandis qu'une tumeur osseuse __________ est une d√©localisation d'une tumeur primitive.",
                correct: ["primitive", "secondaire"],
                explanation: "Les tumeurs primitives naissent dans l'os, les secondaires (m√©tastases) viennent d'ailleurs."
            },
            {
                type: "matching",
                question: "Associez chaque localisation avec sa fr√©quence de m√©tastases osseuses (1=plus fr√©quent, 5=moins fr√©quent parmi ces sites)",
                pairs: [
                    { term: "Rachis", match: "1 - Le plus fr√©quent" },
                    { term: "Bassin", match: "2" },
                    { term: "Cr√¢ne", match: "3" },
                    { term: "C√¥tes", match: "4" },
                    { term: "Extr√©mit√©s proximales hum√©rus/f√©mur", match: "5" }
                ],
                explanation: "L'ordre de fr√©quence des m√©tastases osseuses : Rachis > Bassin > Cr√¢ne > C√¥tes > Extr√©mit√©s proximales."
            },
            {
                type: "qcm",
                question: "Quels sont les cancers ost√©ophiles (qui m√©tastasent fr√©quemment vers l'os) ? (plusieurs r√©ponses)",
                options: [
                    "Poumon",
                    "Estomac",
                    "Sein",
                    "Prostate",
                    "Rein"
                ],
                correct: [0, 2, 3, 4],
                explanation: "Les cancers ost√©ophiles principaux sont : Poumon, Prostate, Rein, Sein, Thyro√Øde."
            },
            {
                type: "qcm",
                question: "Les l√©sions ost√©olytiques se caract√©risent par :",
                options: [
                    "Des opacit√©s arrondies en t√¢ches de bougie",
                    "Des g√©odes ou larges plages d'ost√©olyse",
                    "Une destruction de la corticale",
                    "Une condensation p√©riph√©rique",
                    "Absence de condensation p√©riph√©rique"
                ],
                correct: [1, 2, 4],
                explanation: "Les l√©sions ost√©olytiques sont des g√©odes/plages d'ost√©olyse d√©truisant la corticale, SANS condensation p√©riph√©rique."
            },
            {
                type: "fill",
                question: "Le protocole RICE pour les entorses signifie : R_____, I_____ (glace), C_____ (contention), E_____",
                correct: ["repos", "ice", "compression", "√©l√©vation"],
                explanation: "RICE = Repos, Ice (glace), Compression (contention), √âl√©vation"
            },
            {
                type: "qcm",
                question: "Pour une entorse de cheville, quel bilan radiologique initial ?",
                options: [
                    "Radiographie face seulement",
                    "Radiographie face et profil de la cheville",
                    "IRM syst√©matique",
                    "Scanner",
                    "√âchographie"
                ],
                correct: [1],
                explanation: "On r√©alise des radiographies face et profil pour rechercher une fracture ou un arrachement associ√©s."
            },
            {
                type: "qcm",
                question: "Quels sont les signes cliniques d'une fracture du col du f√©mur ?",
                options: [
                    "Forte douleur au bassin",
                    "Rotation interne du membre",
                    "Impotence fonctionnelle",
                    "D√©formation avec rotation externe",
                    "Allongement du membre"
                ],
                correct: [0, 2, 3],
                explanation: "Fracture du col du f√©mur : douleur au bassin, impotence fonctionnelle, d√©formation avec rotation EXTERNE et raccourcissement."
            },
            {
                type: "qcm",
                question: "Pour une fracture du col du f√©mur chez une personne √¢g√©e, quels sont les objectifs th√©rapeutiques ?",
                options: [
                    "Immobilisation prolong√©e au lit",
                    "Lev√©e pr√©coce",
                    "Redonner son autonomie",
                    "√âviter les complications du d√©cubitus",
                    "Attendre la consolidation spontan√©e"
                ],
                correct: [1, 2, 3],
                explanation: "Les objectifs sont : lev√©e pr√©coce, redonner l'autonomie, √©viter les complications du d√©cubitus (escarres, infections, phl√©bites...)."
            },
            {
                type: "matching",
                question: "Associez chaque type de l√©sion avec sa description radiologique",
                pairs: [
                    { term: "L√©sions ost√©olytiques", match: "G√©odes d√©truisant la corticale" },
                    { term: "L√©sions ost√©ocondensantes", match: "Opacit√©s en t√¢ches de bougie" },
                    { term: "Vert√®bre ivoire", match: "Condensation importante de la vert√®bre" }
                ],
                explanation: "Les l√©sions ost√©olytiques cr√©ent des g√©odes, les ost√©ocondensantes des t√¢ches blanches, et la vert√®bre ivoire est tr√®s dense."
            },
            {
                type: "fill",
                question: "Les 2 os de l'avant-bras sont le __________ et l'__________",
                correct: ["radius", "ulna"],
                explanation: "L'avant-bras est compos√© du radius (externe) et de l'ulna ou cubitus (interne)."
            },
            {
                type: "qcm",
                question: "Qu'est-ce qu'une fracture de Monteggia ?",
                options: [
                    "Fracture du radius seul",
                    "Fracture de l'ulna avec luxation de la t√™te radiale",
                    "Fracture des deux os de l'avant-bras",
                    "Luxation isol√©e du coude",
                    "Fracture du poignet"
                ],
                correct: [1],
                explanation: "La fracture de Monteggia associe une fracture de l'ulna (¬± radius) avec une luxation de la t√™te radiale."
            },
            {
                type: "qcm",
                question: "Lors d'un examen neurologique apr√®s traumatisme rachidien, on √©value : (plusieurs r√©ponses)",
                options: [
                    "La douleur",
                    "La glyc√©mie",
                    "Les d√©ficits sensitifs",
                    "Les d√©ficits moteurs",
                    "Les d√©ficits v√©sico-sphinct√©riens"
                ],
                correct: [0, 2, 3, 4],
                explanation: "Les 4 points √† √©valuer : Douleur, D√©ficits sensitifs, D√©ficits moteurs, D√©ficits v√©sico-sphinct√©riens (fiche ASIA)."
            },
            {
                type: "qcm",
                question: "Quels examens d'imagerie pour m√©tastases osseuses ? (plusieurs r√©ponses)",
                options: [
                    "Radiographies standard",
                    "√âchographie",
                    "Scintigraphie osseuse",
                    "IRM",
                    "Scanner"
                ],
                correct: [0, 2, 3, 4],
                explanation: "Pour les m√©tastases osseuses : Radios standard en 1√®re intention, puis scintigraphie/TEP scan, scanner, et IRM."
            }
        ];

        // GESTION DES FLASHCARDS
        let currentCardIndex = 0;
        let currentFilter = 'all';
        let cardProgress = {};

        // Initialiser les progr√®s des cartes
        function initializeProgress() {
            flashcardsData.forEach((_, index) => {
                if (!cardProgress[index]) {
                    cardProgress[index] = {
                        status: 'new',
                        reviewCount: 0
                    };
                }
            });
            loadProgress();
        }

        // Charger les progr√®s depuis localStorage
        function loadProgress() {
            const saved = localStorage.getItem('td-oncologie-progress');
            if (saved) {
                cardProgress = JSON.parse(saved);
            }
        }

        // Sauvegarder les progr√®s
        function saveProgress() {
            localStorage.setItem('td-oncologie-progress', JSON.stringify(cardProgress));
            alert('‚úÖ Progression sauvegard√©e !');
            updateStats();
        }

        // Exporter les progr√®s
        function exportProgress() {
            const dataStr = JSON.stringify(cardProgress, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'td-oncologie-progress.json';
            link.click();
            alert('üì§ Progression export√©e !');
        }

        // Importer les progr√®s
        function importProgress(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        cardProgress = JSON.parse(e.target.result);
                        saveProgress();
                        updateStats();
                        loadCard();
                        alert('üì• Progression import√©e avec succ√®s !');
                    } catch (error) {
                        alert('‚ùå Erreur lors de l\'importation du fichier');
                    }
                };
                reader.readAsText(file);
            }
        }

        // R√©initialiser les progr√®s
        function resetProgress() {
            if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir r√©initialiser toute votre progression ?')) {
                cardProgress = {};
                initializeProgress();
                saveProgress();
                currentCardIndex = 0;
                loadCard();
                alert('üîÑ Progression r√©initialis√©e !');
            }
        }

        // Obtenir les cartes filtr√©es
        function getFilteredCards() {
            return flashcardsData.map((card, index) => ({ card, index }))
                .filter(({ index }) => {
                    const status = cardProgress[index]?.status || 'new';
                    if (currentFilter === 'all') return true;
                    if (currentFilter === 'new') return status === 'new';
                    if (currentFilter === 'review') return status === 'review' || status === 'not-acquired';
                    if (currentFilter === 'acquired') return status === 'acquired';
                    return true;
                });
        }

        // Filtrer les cartes
        function filterCards(filter) {
            currentFilter = filter;
            currentCardIndex = 0;
            
            // Mettre √† jour les boutons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadCard();
            updateStats();
        }

        // Charger une carte
        function loadCard() {
            const filtered = getFilteredCards();
            
            if (filtered.length === 0) {
                document.getElementById('card-question').innerHTML = "üéâ Aucune carte √† r√©viser !";
                document.getElementById('card-answer').innerHTML = "Changez de filtre ou f√©licitations !";
                document.getElementById('card-category').textContent = "";
                document.getElementById('card-category-back').textContent = "";
                return;
            }
            
            if (currentCardIndex >= filtered.length) {
                currentCardIndex = 0;
            }
            
            const { card, index } = filtered[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            
            // Retirer la classe flipped si pr√©sente
            flashcard.classList.remove('flipped');
            
            document.getElementById('card-category').textContent = card.category;
            document.getElementById('card-category-back').textContent = card.category;
            document.getElementById('card-question').innerHTML = card.question;
            document.getElementById('card-answer').innerHTML = card.answer;
            
            updateStats();
        }

        // Retourner la carte
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        // √âvaluer une carte
        function evaluateCard(evaluation) {
            const filtered = getFilteredCards();
            if (filtered.length === 0) return;
            
            const { index } = filtered[currentCardIndex];
            
            if (evaluation === 'acquired') {
                cardProgress[index] = { status: 'acquired', reviewCount: 0 };
            } else if (evaluation === 'review') {
                cardProgress[index] = { status: 'review', reviewCount: 1 };
            } else if (evaluation === 'not-acquired') {
                cardProgress[index] = { status: 'not-acquired', reviewCount: 3 };
            }
            
            saveProgress();
            
            // Passer √† la carte suivante
            currentCardIndex++;
            loadCard();
        }

        // Mettre √† jour les statistiques
        function updateStats() {
            const total = flashcardsData.length;
            let acquired = 0, review = 0, notAcquired = 0, newCards = 0;
            
            flashcardsData.forEach((_, index) => {
                const status = cardProgress[index]?.status || 'new';
                if (status === 'acquired') acquired++;
                else if (status === 'review') review++;
                else if (status === 'not-acquired') notAcquired++;
                else if (status === 'new') newCards++;
            });
            
            document.getElementById('total-cards').textContent = total;
            document.getElementById('acquired-cards').textContent = acquired;
            document.getElementById('review-cards').textContent = review;
            document.getElementById('not-acquired-cards').textContent = notAcquired;
            document.getElementById('new-cards').textContent = newCards;
            
            const progress = total > 0 ? Math.round((acquired / total) * 100) : 0;
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = progress + '%';
            progressFill.textContent = progress + '%';
        }

        // Changer de mode
        function switchMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.mode-content').forEach(content => {
                content.classList.remove('active');
            });
            
            if (mode === 'flashcards') {
                document.getElementById('flashcards-mode').classList.add('active');
            } else {
                document.getElementById('test-mode').classList.add('active');
                loadTest();
            }
        }

        // GESTION DU TEST
        function loadTest() {
            const container = document.getElementById('test-questions');
            container.innerHTML = '';
            
            testQuestions.forEach((q, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = 'question-block';
                qDiv.dataset.index = index;
                
                let optionsHTML = '';
                
                if (q.type === 'qcm') {
                    optionsHTML = `<div class="question-type">QCM</div>
                        <div class="options">
                            ${q.options.map((opt, i) => `
                                <label class="option">
                                    <input type="${q.correct.length > 1 ? 'checkbox' : 'radio'}" 
                                           name="q${index}" 
                                           value="${i}"
                                           data-question="${index}">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>`;
                } else if (q.type === 'fill') {
                    const blanks = q.correct.length;
                    optionsHTML = `<div class="question-type">Question √† trous</div>
                        <div class="options">
                            ${Array(blanks).fill(0).map((_, i) => `
                                <input type="text" 
                                       class="fill-input" 
                                       placeholder="R√©ponse ${i + 1}"
                                       data-question="${index}"
                                       data-blank="${i}">
                            `).join('')}
                        </div>`;
                } else if (q.type === 'matching') {
                    optionsHTML = `<div class="question-type">Appariement</div>
                        <div class="matching-grid">
                            ${q.pairs.map((pair, i) => `
                                <div class="matching-item">
                                    <strong>${pair.term}</strong>
                                    <select class="matching-select" data-question="${index}" data-pair="${i}">
                                        <option value="">-- Choisir --</option>
                                        ${q.pairs.map((p, j) => `
                                            <option value="${j}">${p.match}</option>
                                        `).join('')}
                                    </select>
                                </div>
                            `).join('')}
                        </div>`;
                }
                
                qDiv.innerHTML = `
                    <div class="question-title">Question ${index + 1} : ${q.question}</div>
                    ${optionsHTML}
                    <div class="explanation" id="explanation-${index}">
                        <strong>üí° Explication :</strong> ${q.explanation}
                    </div>
                `;
                
                container.appendChild(qDiv);
            });
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('retry-btn').classList.add('hidden');
            document.querySelector('.test-btn.submit').classList.remove('hidden');
        }

        function submitTest() {
            let score = 0;
            let total = testQuestions.length;
            
            testQuestions.forEach((q, index) => {
                const qDiv = document.querySelector(`[data-index="${index}"]`);
                let correct = false;
                
                if (q.type === 'qcm') {
                    const selected = Array.from(qDiv.querySelectorAll('input:checked')).map(inp => parseInt(inp.value));
                    correct = selected.length === q.correct.length && 
                             selected.every(s => q.correct.includes(s));
                    
                    // Colorer les options
                    qDiv.querySelectorAll('.option').forEach((opt, i) => {
                        if (q.correct.includes(i)) {
                            opt.classList.add('correct');
                        } else if (selected.includes(i)) {
                            opt.classList.add('incorrect');
                        }
                    });
                } else if (q.type === 'fill') {
                    const answers = Array.from(qDiv.querySelectorAll('.fill-input')).map(inp => inp.value.toLowerCase().trim());
                    correct = answers.every((ans, i) => ans === q.correct[i].toLowerCase());
                    
                    qDiv.querySelectorAll('.fill-input').forEach((inp, i) => {
                        if (inp.value.toLowerCase().trim() === q.correct[i].toLowerCase()) {
                            inp.style.borderColor = '#4CAF50';
                            inp.style.background = '#d4edda';
                        } else {
                            inp.style.borderColor = '#f44336';
                            inp.style.background = '#f8d7da';
                            inp.value = `‚ùå ${inp.value} ‚Üí ‚úÖ ${q.correct[i]}`;
                        }
                    });
                } else if (q.type === 'matching') {
                    const matches = Array.from(qDiv.querySelectorAll('.matching-select')).map(sel => parseInt(sel.value));
                    correct = matches.every((m, i) => m === i);
                    
                    qDiv.querySelectorAll('.matching-select').forEach((sel, i) => {
                        if (parseInt(sel.value) === i) {
                            sel.style.borderColor = '#4CAF50';
                            sel.style.background = '#d4edda';
                        } else {
                            sel.style.borderColor = '#f44336';
                            sel.style.background = '#f8d7da';
                        }
                    });
                }
                
                if (correct) score++;
                
                // Afficher l'explication
                document.getElementById(`explanation-${index}`).classList.add('show');
            });
            
            // Afficher les r√©sultats
            const percentage = Math.round((score / total) * 100);
            document.getElementById('score-value').textContent = percentage + '%';
            document.getElementById('score-details').textContent = `${score} / ${total} questions correctes`;
            
            let message = '';
            if (percentage >= 90) {
                message = 'üéâ Excellent ! Vous ma√Ætrisez parfaitement le sujet !';
            } else if (percentage >= 75) {
                message = 'üëè Tr√®s bien ! Continuez ainsi !';
            } else if (percentage >= 60) {
                message = 'üëç Bien ! Encore quelques points √† revoir.';
            } else if (percentage >= 50) {
                message = 'üí™ Pas mal, mais il faut encore travailler.';
            } else {
                message = 'üìö Continuez √† r√©viser, vous allez y arriver !';
            }
            
            document.getElementById('score-message').textContent = message;
            document.getElementById('results').classList.add('show');
            
            document.querySelector('.test-btn.submit').classList.add('hidden');
            document.getElementById('retry-btn').classList.remove('hidden');
            
            // Scroller vers les r√©sultats
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function retryTest() {
            loadTest();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialisation
        window.onload = function() {
            initializeProgress();
            loadCard();
            loadTest();
        };
    </script>
</body>
</html>