<!DOC
    </div>TYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Flashcards TD7 UE3.8 - Radiobiologie & Radioprotection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-size: cover;
            min-height: 100vh;
            height: auto !important;
            padding: 20px;
            padding-top: 180px;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
            overflow-y: auto !important;
            overflow-x: hidden;
        }

        body.random-mode {
            padding-top: 140px;
        }


        /* Compteur fixe en haut */
        .score-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .score-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .score-item {
            text-align: center;
            padding: 10px 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .score-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .score-value {
            font-size: 1.8em;
            font-weight: bold;
        }

        .score-correct {
            color: #10b981;
        }

        .score-wrong {
            color: #ef4444;
        }

        .score-total {
            color: #667eea;
        }

        .score-percent {
            color: #f59e0b;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            color: white;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            padding: 10px;
        }

        .flashcard {
            height: 320px;
            perspective: 1000px;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .flashcard-back {
            background: white;
            color: #333;
            transform: rotateY(180deg);
        }

        .card-number {
            font-weight: bold;
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .card-content {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 10px;
            cursor: pointer;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        .flashcard-front .card-content {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.05em;
            line-height: 1.4;
        }

        .flashcard-back .card-content {
            font-size: 0.9em;
            line-height: 1.5;
            text-align: left;
            padding-right: 5px;
        }

        .card-content::-webkit-scrollbar {
            width: 5px;
        }

        .card-content::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        .card-content::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .hint {
            font-size: 0.85em;
            opacity: 0.7;
            font-style: italic;
            text-align: center;
            margin-top: 5px;
        }

        .correction-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .correction-buttons button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            min-height: 50px;
        }

        .btn-correct {
            background: #10b981;
            color: white;
        }

        .btn-correct:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
        }

        .btn-wrong {
            background: #ef4444;
            color: white;
        }

        .btn-wrong:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
        }

        .correction-buttons button:active {
            transform: translateY(0);
        }

        .correction-buttons button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .flashcard.answered-correct .flashcard-back {
            border: 3px solid #10b981;
        }

        .flashcard.answered-wrong .flashcard-back {
            border: 3px solid #ef4444;
        }

        .controls {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .controls button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 35px;
            margin: 0 10px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            min-height: 50px;
        }

        .controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .controls button:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            body {
                padding-top: 180px;
            }

            h1 {
                font-size: 1.8em;
            }
            
            .section-title {
                font-size: 1.3em;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .flashcard {
                height: 320px;
            }

            .controls button {
                display: block;
                margin: 10px auto;
                width: 220px;
                min-height: 55px;
                font-size: 1.1em;
            }

            .score-container {
                gap: 10px;
            }

            .score-item {
                padding: 10px 12px;
                font-size: 0.85em;
            }

            .score-value {
                font-size: 1.3em;
            }

            .correction-buttons button {
                font-size: 1.05em;
                padding: 16px;
                min-height: 55px;
            }
        }

        /* Pour les tr√®s petits √©crans */
        @media (max-width: 380px) {
            .flashcard {
                height: 340px;
            }

            .score-item {
                padding: 8px 10px;
            }

            .score-label {
                font-size: 0.75em;
            }

            .card-content {
                font-size: 0.95em;
            }
        }
    
        .hidden {
            display: none !important;
        }
        
        /* ============================================ */
        /* MODE RANDOM - CARTE EN PLEIN √âCRAN */
        /* ============================================ */
        .random-mode-container {
            display: none;
            max-width: 900px;
            margin: 0 auto;
        }

        .random-mode-container.active {
            display: block;
        }

        .random-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        .random-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .random-card-number {
            font-size: 1.1em;
            font-weight: 600;
            color: #667eea;
        }

        .random-card-section {
            font-size: 0.9em;
            color: #6b7280;
            background: #f3f4f6;
            padding: 4px 12px;
            border-radius: 12px;
        }

        .random-card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .random-question, .random-answer {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .random-label {
            font-size: 0.85em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .random-text {
            flex: 1;
            font-size: 1.15em;
            line-height: 1.6;
            overflow-y: auto;
            padding: 20px;
            background: #f9fafb;
            border-radius: 12px;
            color: #1f2937;
        }

        .random-answer {
            display: none;
        }

        .random-answer.visible {
            display: flex;
        }

        .random-controls {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .random-btn {
            flex: 1;
            min-width: 140px;
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            touch-action: manipulation;
        }

        .random-btn-flip {
            background: #667eea;
            color: white;
        }

        .random-btn-flip:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .random-btn-correct {
            background: #10b981;
            color: white;
        }

        .random-btn-correct:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .random-btn-wrong {
            background: #ef4444;
            color: white;
        }

        .random-btn-wrong:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .random-btn-next {
            background: #8b5cf6;
            color: white;
        }

        .random-btn-next:hover {
            background: #7c3aed;
            transform: translateY(-2px);
        }

        .random-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .random-card {
                padding: 25px;
                min-height: 400px;
            }

            .random-text {
                font-size: 1em;
            }

            .random-controls {
                flex-direction: column;
            }

            .random-btn {
                width: 100%;
            }
        }
    
    
        /* ============================================ */
        /* SESSION COMPL√àTE */
        /* ============================================ */
        .session-complete {
            display: none;
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            max-width: 600px;
            margin: 0 auto;
        }

        .session-complete.active {
            display: block;
        }

        .session-complete h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .session-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .stat-box {
            padding: 20px;
            border-radius: 12px;
            background: #f9fafb;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #6b7280;
        }

        .session-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .session-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .session-btn-save {
            background: #f59e0b;
            color: white;
        }

        .session-btn-restart {
            background: #667eea;
            color: white;
        }

        .session-btn-home {
            background: #6b7280;
            color: white;
        }

        .session-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* ============================================ */
        /* MODAL */
        /* ============================================ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #6b7280;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #1f2937;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .saved-sessions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .session-item {
            padding: 15px;
            background: #f9fafb;
            border-radius: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .session-item:hover {
            border-color: #667eea;
            background: #f3f4f6;
        }

        .session-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .session-date {
            font-weight: 600;
            color: #667eea;
        }

        .session-errors-count {
            color: #ef4444;
            font-weight: 600;
        }

        .session-item-details {
            font-size: 0.85em;
            color: #6b7280;
        }

        .no-sessions {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn-load {
            background: #667eea;
            color: white;
        }

        .modal-btn-delete {
            background: #ef4444;
            color: white;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        /* ============================================ */
        /* RACCOURCIS CLAVIER */
        /* ============================================ */
        .shortcuts-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 0.85em;
            max-width: 250px;
            display: none;
            z-index: 1500;
        }

        .shortcuts-info.visible {
            display: block;
        }

        .shortcuts-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-weight: bold;
            z-index: 1500;
            font-size: 1.1em;
        }

        .shortcuts-toggle:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .shortcut-item:last-child {
            border-bottom: none;
        }

        .shortcut-key {
            font-weight: 600;
            color: #667eea;
        }

        @media (max-width: 768px) {
            .shortcuts-toggle {
                bottom: 80px;
            }

            .shortcuts-info {
                bottom: 80px;
                right: 10px;
                left: 10px;
                max-width: none;
            }

            .session-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .session-actions {
                flex-direction: column;
            }

            .session-btn {
                width: 100%;
            }
        }

    
        /* ============================================ */
        /* MODE SELECTOR */
        /* ============================================ */
        .mode-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 8px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            touch-action: manipulation;
        }

        .mode-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .mode-btn.load-errors {
            border-color: #f59e0b;
            color: #f59e0b;
        }

        .mode-btn.load-errors:hover {
            background: #f59e0b;
            color: white;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
        }

    
        .modal-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 20px 0;
        }

        .modal-file-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .modal-file-btn {
            width: 100%;
            padding: 12px;
            border: 2px dashed #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .modal-file-btn:hover {
            background: #667eea;
            color: white;
            border-style: solid;
            transform: translateX(3px);
        }

        .modal-file-btn:active {
            transform: translateX(0);
        }

    
        .modal-help {
            margin-top: 20px;
            padding: 15px;
            background: #f0f9ff;
            border-left: 4px solid #667eea;
            border-radius: 8px;
        }

        .modal-help h4 {
            display: flex;
            align-items: center;
            gap: 5px;
        }

    
        .grid-mode {
            display: block;
        }

    
        /* ============================================ */
        /* SAUVEGARDE RAPIDE */
        /* ============================================ */
        .quick-save-container {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 12px;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .quick-save-btn {
            padding: 10px 20px;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
            font-size: 0.9em;
        }

        .quick-save-btn:hover {
            background: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
        }

        .quick-save-btn:active {
            transform: translateY(0);
        }

        .quick-save-info {
            color: white;
            font-size: 0.85em;
            font-weight: 500;
        }

        .quick-save-info span {
            font-weight: 700;
            color: #fbbf24;
        }

        @media (max-width: 768px) {
            .quick-save-container {
                flex-direction: column;
                gap: 8px;
            }

            .quick-save-btn {
                width: 100%;
            }
        }

    
        /* ============================================ */
        /* FIX SCROLL FORC√â */
        /* ============================================ */
        html {
            height: 100%;
            overflow-y: auto !important;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        html, body {
            scroll-behavior: smooth;
        }

        body > .container {
            
        }

        .score-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            pointer-events: auto;
        }

        /* Forcer la visibilit√© du mode grille */
        .grid-mode:not(.hidden) {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
        }

        /* S'assurer que les sections prennent de la place */
        .section {
            display: block;
            position: relative;
        }

    </style>
</head>
<body>
    <!-- Compteur fixe -->
    <div class="score-header">
        
    <div class="header-content">
        <!-- Mode Selector -->
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="grid" onclick="switchMode('grid')">
                üìä Mode Grille
            </button>
            <button class="mode-btn" data-mode="random" onclick="switchMode('random')">
                üé≤ Mode Random
            </button>
            
            <button class="mode-btn" data-mode="errors" onclick="switchMode('errors')">
                üéØ Mode Erreurs
            </button>
            <button class="mode-btn load-errors" onclick="showLoadModal()">
                üì• Charger erreurs
            </button>
        </div>

        <div class="score-container">
            <div class="score-item">
                <div class="score-label">‚úÖ J'ai bon</div>
                <div class="score-value score-correct" id="score-correct">0</div>

        <!-- Progress bar -->
        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>

            <!-- Bouton sauvegarde rapide (visible uniquement en mode random) -->
            <div class="quick-save-container" id="quick-save-container" style="display: none;">
                <button class="quick-save-btn" onclick="quickSaveErrors()" id="quick-save-btn">
                    üíæ Sauvegarder mes erreurs actuelles
                </button>
                <span class="quick-save-info" id="quick-save-info">
                    <span id="current-errors-count">0</span> erreur(s) en cours
                </span>
            </div>

        </div>

            </div>
            <div class="score-item">
                <div class="score-label">‚ùå J'ai faux</div>
                <div class="score-value score-wrong" id="score-wrong">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">üìä Total r√©pondu</div>
                <div class="score-value score-total" id="score-total">0 / 60</div>
            </div>
            <div class="score-item">
                <div class="score-label">üéØ Taux de r√©ussite</div>
                <div class="score-value score-percent" id="score-percent">0%</div>
            </div>
        </div>
    </div>

    
    </div>

    <div class="container">
        <h1>üìö Flashcards TD7 UE3.8</h1>
        <h2 style="text-align: center; color: white; margin-bottom: 30px; font-size: 1.3em;">Radiobiologie & Radioprotection</h2>

        

        <div class="grid-mode">
<div class="controls">
            <button onclick="flipAll()">üîÑ Retourner toutes les cartes</button>
            <button onclick="resetAll()">‚Ü©Ô∏è R√©initialiser tout</button>
        </div>

        <!-- Section Radiobiologie -->
        <div class="section" id="radiobiologie">
            <div class="section-title">‚ò¢Ô∏è Radiobiologie</div>
            <div class="cards-grid" id="radiobiologie-cards"></div>
        </div>

        <!-- Section Radioprotection -->
        <div class="section" id="radioprotection">
            <div class="section-title">üõ°Ô∏è Radioprotection</div>
            <div class="cards-grid" id="radioprotection-cards"></div>
        </div>

        <!-- Section Dosim√©trie -->
        <div class="section" id="dosimetrie">
            <div class="section-title">üìä Dosim√©trie & Cat√©gorisation</div>
            <div class="cards-grid" id="dosimetrie-cards"></div>
        </div>
    </div>

    <script>
        // Scores
        let scores = {
            correct: 0,
            wrong: 0,
            answered: new Set()
        };

        // Donn√©es des flashcards
        const radiobiologieData = [
            {
                question: "D√©finissez la radiobiologie",
                answer: "L'√©tude scientifique de l'effet biologique des rayonnements ionisants (RI) sur la mati√®re vivante<br><br>OU<br><br>Etude des r√©actions biologiques induites par les effets des RI sur les tissus."
            },
            {
                question: "Citez les 3 modes d'expositions aux rayonnements ionisants",
                answer: "3 modes d'exposition aux RI :<br>‚Ä¢ L'irradiation<br>‚Ä¢ La contamination externe<br>‚Ä¢ La contamination interne"
            },
            {
                question: "Citez les 3 √©tapes des processus d'interaction des rayonnements ionisants avec la mati√®re",
                answer: "3 √©tapes :<br>‚Ä¢ √âtape physique<br>‚Ä¢ √âtape chimique<br>‚Ä¢ Etape Biologique"
            },
            {
                question: "Dans l'√©tape physique, pr√©cisez la diff√©rence entre ionisation et excitation",
                answer: "<strong>Excitation :</strong> le transfert d'√©nergie du RI √† la mati√®re est insuffisant pour cr√©er une ionisation (√©lectron non arrach√©)<br><br><strong>Ionisation :</strong> le transfert d'√©nergie du RI √† la mati√®re est suffisant pour arracher un √©lectron de l'atome cible/mati√®re (perte d'1 √©lectron = ion)"
            },
            {
                question: "Citez la principale cible biologique des rayonnements ionisants dans la cellule",
                answer: "L'ADN, mol√©cule support de l'information g√©n√©tique."
            },
            {
                question: "Dans l'√©tape chimique, citez les 2 grands types des rayonnements ionisants sur l'ADN",
                answer: "<strong>Effets directs :</strong> le rayonnement interagit directement avec l'ADN.<br><br><strong>Effets indirects :</strong> par production de radicaux libres √† partir de l'eau."
            },
            {
                question: "Expliquez la radiolyse de l'eau",
                answer: "En r√©action √† l'ionisation et l'excitation (√©tape physique), les RI vont d√©composer les mol√©cules d'H‚ÇÇO en radicaux libres toxiques : Hydrog√®ne (H‚Å∫) et hydroxyde (OH‚Åª) afin de cr√©er des l√©sions sur l'ADN."
            },
            {
                question: "Citez les types de l√©sions de l'ADN susceptibles d'√™tre cr√©√©es, suite √† une exposition aux rayonnements ionisants",
                answer: "L√©sions de l'ADN :<br>‚Ä¢ Ruptures simples brins<br>‚Ä¢ Ruptures doubles brins<br>‚Ä¢ Pontages<br>‚Ä¢ Modifications de bases"
            },
            {
                question: "D√©finissez le TLE (Transfert lin√©ique d'√©nergie)",
                answer: "Le TLE exprime le pouvoir de p√©n√©tration des rayonnements ionisants dans la mati√®re (ou quantit√© d'√©nergie transf√©r√©e √† 1 particule ionisante traversant la mati√®re par unit√© de distance)"
            },
            {
                question: "Citez la loi de Bergoni√© et Tribondeau sur la Radiosensibilit√© des cellules",
                answer: "La sensibilit√© des cellules est plus √©lev√©e si :<br>‚Ä¢ Les cellules se multiplient beaucoup (√† forte activit√© mitotique)<br>‚Ä¢ Les cellules sont jeunes<br>‚Ä¢ Les cellules sont peu diff√©renci√©es (cellules souches)"
            },
            {
                question: "Citez les facteurs qui influencent la survie cellulaire",
                answer: "‚Ä¢ Type de cellule<br>‚Ä¢ Phase du cycle de la cellule<br>‚Ä¢ Dose<br>‚Ä¢ D√©bit de dose<br>‚Ä¢ Type de rayonnement en lien avec le TLE<br>‚Ä¢ L'absence de fractionnement<br>‚Ä¢ Oxyg√®ne"
            },
            {
                question: "Pr√©cisez la p√©riode du cycle cellulaire o√π la cellule est la plus sensible aux rayonnements",
                answer: "En phase G2 et M (mitose)."
            },
            {
                question: "Suite √† une exposition aux rayonnements ionisants, citez les 3 types d'effets cellulaires possibles",
                answer: "‚Ä¢ Mort cellulaire<br>‚Ä¢ R√©paration et survie<br>‚Ä¢ Mutation (transformation canc√©reuse)"
            },
            {
                question: "Citez le tissu, au sens anatomique, le plus radiosensible. Justifiez votre r√©ponse",
                answer: "Tissus embryonnaires car tissus √† forte activit√© mitotique (loi de Bergoni√© et Tribondeau)"
            },
            {
                question: "Citez les 2 types d'effets biologiques des rayonnements ionisants sur les tissus",
                answer: "‚Ä¢ Les effets d√©terministes (ou obligatoires)<br>‚Ä¢ Les effets stochastiques (ou al√©atoires)"
            },
            {
                question: "Nommez les effets tissulaires qui apparaissent rapidement apr√®s l'exposition aux rayonnements ionisants et ceux qui apparaissent plusieurs mois ou ann√©es plus tard",
                answer: "‚Ä¢ Les effets pr√©coces (Rapidement, < 6 mois)<br>‚Ä¢ Les effets tardifs (> 6 mois)"
            },
            {
                question: "Expliquez les diff√©rences entre un effet d√©terministe et un effet stochastique",
                answer: "<strong>Effet d√©terministe :</strong> Effet √† seuil et la gravit√© augmente avec la dose<br><br><strong>Effet stochastique :</strong> Pas de seuil, la probabilit√© (fr√©quence) augmente avec la dose"
            },
            {
                question: "D√©finissez le fractionnement",
                answer: "Fractionnement :<br><br>Nombre de s√©ances r√©alis√©es pour d√©livrer la dose prescrite<br><br>OU<br><br>Dose / fraction"
            },
            {
                question: "D√©finissez l'√©talement",
                answer: "√âtalement :<br><br>Temps √©coul√© entre la premi√®re s√©ance de traitement et la derni√®re s√©ance de traitement."
            },
            {
                question: "Expliquez pourquoi le fractionnement des doses est utilis√© en radioth√©rapie",
                answer: "Pour favoriser la r√©paration des tissus sains entre les s√©ances et maximiser la destruction des cellules tumorales qui sont plus radiosensibles"
            }
        ];

        const radioprotectionData = [
            {
                question: "D√©finir la radioprotection",
                answer: "L'ensemble des r√®gles, des proc√©dures et des moyens de pr√©vention et de surveillance visant √† emp√™cher ou √† r√©duire les effets nocifs des rayonnements ionisants produits sur les personnes"
            },
            {
                question: "Citez la valeur de l'exposition moyenne aux rayonnements ionisants du public par an",
                answer: "4,5 mSv/an"
            },
            {
                question: "Citez les 3 grands principes de la radioprotection",
                answer: "3 Grands principes :<br>‚Ä¢ Justification<br>‚Ä¢ Optimisation<br>‚Ä¢ Limitation"
            },
            {
                question: "Expliquer le principe de justification",
                answer: "Justification de l'examen (rapport b√©n√©fice/risque) = prescription m√©dicale"
            },
            {
                question: "Expliquer le principe d'optimisation",
                answer: "Optimisation de l'exposition aux RI le plus faible possible (ALARA)"
            },
            {
                question: "Expliquer le principe de limitation",
                answer: "Limitation des doses individuelles aux rayonnements ionisants annuels (concernent uniquement le personnel)"
            },
            {
                question: "Citez les 3 r√®gles de la radioprotection vous permettant de r√©duire l'exposition aux rayonnements ionisants auxquels vous √™tes expos√©s en tant que futur MEM",
                answer: "3 r√®gles de la radioprotection :<br>‚Ä¢ R√©duire le Temps d'exposition<br>‚Ä¢ Augmenter la distance avec la source d'exposition<br>‚Ä¢ Interposer un √âcran"
            },
            {
                question: "Expliquez la diff√©rence entre la contamination interne et la contamination externe. Pr√©cisez la modalit√© d'imagerie dans laquelle vous √™tes expos√©s √† ces contaminations",
                answer: "<strong>Contamination externe :</strong> Source radioactive d√©pos√©e au contact sur la peau<br><br><strong>Contamination interne :</strong> Source radioactive p√©n√®tre dans l'organisme = incorporation<br><br><strong>M√©decine nucl√©aire</strong>"
            },
            {
                question: "Citez 2 EPC utilis√©s dans les diff√©rentes modalit√©s d'imagerie",
                answer: "EPC :<br>‚Ä¢ Paroi, vitre et porte plomb√©e<br>‚Ä¢ Signalisation lumineuse<br>‚Ä¢ Poubelles et seringues plomb√©es<br>‚Ä¢ Zonage radiologique<br>‚Ä¢ Commande √† distance<br>‚Ä¢ Stockage s√©curis√© des d√©chets radioactifs"
            },
            {
                question: "Citez 2 EPI utilis√©s dans les diff√©rentes modalit√©s d'imagerie",
                answer: "EPI :<br>‚Ä¢ Tablier plomb√©<br>‚Ä¢ Lunettes / visi√®re plomb√©es<br>‚Ä¢ Prot√®ge-thyro√Øde plomb√©s<br>‚Ä¢ Gants plomb√©s"
            },
            {
                question: "Nommez le dispositif permettant de mesurer la dose de rayonnements ionisants re√ßue par un travailleur expos√©",
                answer: "Le dosim√®tre"
            },
            {
                question: "Expliquez la diff√©rence entre le dosim√®tre √† lecture diff√©r√©e et le dosim√®tre √† lecture instantan√©e",
                answer: "<strong>Dosim√®tre √† lecture diff√©r√©e :</strong><br>Mesure individuelle en temps diff√©r√© de l'exposition de la dose re√ßue (mSv) ‚Äì Valeur r√©glementaire<br><br><strong>Dosim√®tre op√©rationnel :</strong><br>Mesure individuelle en temps r√©el de la dose re√ßue ‚Äì Alarme / Alerte"
            },
            {
                question: "Pr√©cisez o√π et comment se porte le dosim√®tre √† lecture diff√©r√©e, ainsi que la fr√©quence de son changement",
                answer: "Dosim√®tre √† lecture diff√©r√©e :<br><br>Port√© au niveau du tronc (poitrine), sous le tablier plomb√© s'il y en a un, et chang√© tous les trois mois (p√©riodicit√© du suivi dosim√©trique)."
            },
            {
                question: "Pr√©cisez l'objectif du zonage en radioprotection",
                answer: "Le zonage permet une visualisation du danger d'exposition aux rayonnements ionisants auquel les travailleurs sont susceptibles d'√™tre expos√©s."
            },
            {
                question: "Pr√©cisez √† partir de quelle zone : le port du dosim√®tre √† lecture diff√©r√©e est obligatoire / le port du dosim√®tre √† lecture instantan√©e est obligatoire",
                answer: "Le dosim√®tre √† lecture diff√©r√©e est obligatoire √† partir de la <strong>zone surveill√©e</strong>.<br><br>Le dosim√®tre √† lecture instantan√©e est obligatoire √† partir de la <strong>zone contr√¥l√©e verte</strong>"
            },
            {
                question: "D√©finissez une source scell√©e",
                answer: "<strong>Source scell√©e :</strong> Source dont la structure ou le conditionnement emp√™che, en utilisation normale, toute dispersion de mati√®res radioactives dans le milieu ambiant"
            },
            {
                question: "D√©finissez une source non scell√©e",
                answer: "<strong>Source non scell√©e :</strong> Source dont la pr√©sentation et les conditions normales d'emploi ne permettent pas de pr√©venir toute dispersion de substance radioactive. Elle pr√©sente, par nature, un risque de contamination et n√©cessite des pr√©cautions d'emploi particuli√®res."
            },
            {
                question: "Citez 4 acteurs de la radioprotection dans un √©tablissement de sant√©",
                answer: "‚Ä¢ Le CRP<br>‚Ä¢ Chef d'√©tablissement<br>‚Ä¢ Le m√©decin du travail<br>‚Ä¢ Le Physicien M√©dical<br>‚Ä¢ Le MEM"
            },
            {
                question: "Pr√©cisez la signification des lettres CRP ou PCR",
                answer: "<strong>PCR :</strong> Personne Comp√©tente en Radioprotection<br><br>OU<br><br><strong>CRP :</strong> Conseiller en Radioprotection"
            },
            {
                question: "Citez 2 missions du CRP",
                answer: "‚Ä¢ √âvaluation des risques<br>‚Ä¢ √âtudes de postes<br>‚Ä¢ Cat√©gorisation des travailleurs<br>‚Ä¢ D√©limitations des zones de travail<br>‚Ä¢ Gestion de la dosim√©trie<br>‚Ä¢ √âtablissement et respect des r√®gles de radioprotection"
            }
        ];

        const dosimetrieData = [
            {
                question: "En radioprotection, le personnel et les personnes sont class√©s selon le niveau de dose annuelle pr√©visible. Citez ces 3 cat√©gories de personnes expos√©es aux rayonnements ionisants",
                answer: "3 Cat√©gories expos√©es aux rayonnements ionisants :<br>‚Ä¢ Cat√©gorie A<br>‚Ä¢ Cat√©gorie B<br>‚Ä¢ Public"
            },
            {
                question: "Citez la dose limite annuelle au corps entier pour un travailleur class√© cat√©gorie B",
                answer: "Limitation annuelle Corps entier Cat√©gorie B :<br><br><strong>‚â§ 6 mSv/an</strong>"
            },
            {
                question: "Citez la dose limite annuelle de dose au corps entier pour un travailleur class√© cat√©gorie A",
                answer: "Limitation annuelle Corps entier Cat√©gorie A :<br><br><strong>> 6 mSv/an et < 20 mSv/an</strong>"
            },
            {
                question: "Citez la dose limite annuelle au corps entier pour le public",
                answer: "Limitation annuelle Corps entier Public :<br><br><strong>‚â§ 1 mSv/an</strong>"
            },
            {
                question: "Citez la dose limite annuelle pour le cristallin pour la cat√©gorie A et B",
                answer: "Limitation annuelle Cristallin<br>Cat√©gorie A et B :<br><br><strong>< 20 mSv/an</strong>"
            },
            {
                question: "D√©finissez le d√©bit de dose",
                answer: "Le d√©bit de dose est la dose re√ßue par unit√© de temps, et s'exprime en Gy/s."
            },
            {
                question: "D√©finissez la dose absorb√©e (D)",
                answer: "La dose absorb√©e (D) correspond √† la quantit√© d'√©nergie c√©d√©e par unit√© de masse de mati√®re expos√©e aux rayonnements ionisants avec <strong>D = E/m</strong>"
            },
            {
                question: "Concernant la relation entre la dose absorb√©e (D), la dose √©quivalente (H) et le facteur de pond√©ration du rayonnement (Wr), citez la formule",
                answer: "Dose √©quivalente :<br><strong>H = W<sub>R</sub> √ó D</strong><br><br>OU<br><br>H = Dose absorb√©e (D) √ó Facteur pond√©ration radiologique"
            },
            {
                question: "Citez la formule de la dose Efficace (E)",
                answer: "Dose efficace (E) :<br><br><strong>E = D √ó W<sub>R</sub> √ó W<sub>T</sub></strong><br><br>OU<br><br>E = Dose √©quivalente (H) √ó Facteur pond√©ration tissulaire"
            },
            {
                question: "Expliquez la loi de l'inverse carr√©e de la distance",
                answer: "Loi de l'inverse carr√©e de la distance :<br><br>Lorsqu'on double la distance, on re√ßoit une dose <strong>4 fois moins √©lev√©e</strong>"
            },
            {
                question: "D√©finissez le Sievert (Sv)",
                answer: "Le sievert (de symbole Sv) est l'¬´ unit√© utilis√©e pour donner une √©valuation de l'impact des rayonnements sur l'homme ¬ª"
            },
            {
                question: "D√©finissez le Gray (Gy)",
                answer: "Le Gray (Gy) correspond √† l'√©nergie moyenne d√©pos√©e par un rayonnement ionisant dans une masse de mati√®re.<br><br>C'est l'unit√© de la dose absorb√©e."
            },
            {
                question: "Un MEM re√ßoit un d√©bit de dose de 0,5 mSv/h. Quelle dose aura-t-il re√ßue apr√®s 4 heures d'exposition ?",
                answer: "Dose re√ßue apr√®s 4h d'exposition :<br><br>0,5 mSv/h √ó 4 = <strong>2 mSv</strong>"
            },
            {
                question: "En tant que MEM, vous vous situez √† une distance de 2 m√®tres d'une source ; la dose re√ßue est de 6 mSv. Calculez la dose re√ßue si vous vous √©loignez √† 4 m√®tres",
                answer: "Dose re√ßue divis√©e par 4 selon la loi de l'inverse carr√©e de la distance :<br><br><strong>1,5 mSv</strong>"
            },
            {
                question: "D√©finissez l'Activit√© d'une source radioactive",
                answer: "L'activit√© (A) est le nombre de d√©sint√©grations radioactives par seconde."
            },
            {
                question: "Je dispose d'une source de Techn√©tium de 600 Bq. Sa p√©riode radioactive est de t1/2 = 6h. Calculez l'activit√© A de la source au bout de 18 h",
                answer: "Activit√© : A(n t<sub>1/2</sub>) = A‚ÇÄ / 2<sup>n</sup><br><br>18h / 6h = 3 p√©riodes<br><br>600 / 2<sup>3</sup> = 600 / 8 = <strong>75 Bq</strong>"
            },
            {
                question: "D√©finissez la p√©riode radioactive (ou t1/2)",
                answer: "La p√©riode radioactive (t<sub>1/2</sub> = demi-vie) est le temps n√©cessaire pour que la moiti√© des noyaux radioactifs se d√©sint√®grent."
            },
            {
                question: "Le Fluor 18 a une p√©riode d'environ 2h. Une source de Fluor 18 a une activit√© de 80 MBq. Calculez l'activit√© de la source au bout de 6h",
                answer: "Activit√© : A(n t<sub>1/2</sub>) = A‚ÇÄ / 2<sup>n</sup><br><br>6h / 2h = 3 p√©riodes<br><br>80 / 2<sup>3</sup> = 80 / 8 = <strong>10 MBq</strong>"
            },
            {
                question: "Pr√©cisez l'unit√© de : L'activit√© radioactive / La dose absorb√©e / La dose √©quivalente ou efficace",
                answer: "<strong>Activit√© :</strong> Becquerel (Bq)<br><br><strong>Dose absorb√©e :</strong> Gray (Gy)<br><br><strong>Dose efficace ou dose √©quivalente :</strong> Sievert (Sv)"
            },
            {
                question: "Nommez la grandeur permettant d'estimer le risque biologique global pour l'organisme",
                answer: "La dose efficace (E)"
            }
        ];

        // Fonction pour cr√©er une flashcard
        function createFlashcard(data, index, section) {
            const cardId = `${section}-${index}`;
            return `
                <div class="flashcard" data-card-id="${cardId}">
                    <div class="flashcard-inner">
                        <div class="flashcard-front" onclick="flipCard(this.parentElement.parentElement, event)">
                            <div class="card-number">Q${index + 1}</div>
                            <div class="card-content">
                                ${data.question}
                            </div>
                            <div class="hint">üëÜ Cliquez pour voir la r√©ponse</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="card-number">R${index + 1}</div>
                            <div class="card-content" onclick="flipCard(this.parentElement.parentElement, event)">
                                ${data.answer}
                            </div>
                            <div class="correction-buttons">
                                <button class="btn-correct" onclick="answerCard(event, '${cardId}', true)">‚úÖ J'ai bon</button>
                                <button class="btn-wrong" onclick="answerCard(event, '${cardId}', false)">‚ùå J'ai faux</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Fonction pour retourner une carte
        function flipCard(element, event) {
            // Si le clic vient d'un bouton de correction, on ne fait rien
            if (event && event.target.closest('.correction-buttons')) {
                return;
            }
            element.classList.toggle('flipped');
        }

        // Fonction pour enregistrer une r√©ponse
        function answerCard(event, cardId, isCorrect) {
            event.stopPropagation();
            event.preventDefault();
            
            const card = document.querySelector(`[data-card-id="${cardId}"]`);
            if (!card) return;

            // Si d√©j√† r√©pondu, on annule l'ancienne r√©ponse
            if (scores.answered.has(cardId)) {
                const wasCorrect = card.classList.contains('answered-correct');
                if (wasCorrect) {
                    scores.correct--;
                } else {
                    scores.wrong--;
                }
                card.classList.remove('answered-correct', 'answered-wrong');
            } else {
                scores.answered.add(cardId);
            }

            // Ajouter la nouvelle r√©ponse
            if (isCorrect) {
                scores.correct++;
                card.classList.add('answered-correct');
                card.classList.remove('answered-wrong');
            } else {
                scores.wrong++;
                card.classList.add('answered-wrong');
                card.classList.remove('answered-correct');
            }

            updateScores();
        }

        // Fonction pour mettre √† jour l'affichage des scores
        function updateScores() {
            document.getElementById('score-correct').textContent = scores.correct;
            document.getElementById('score-wrong').textContent = scores.wrong;
            document.getElementById('score-total').textContent = `${scores.answered.size} / 60`;
            
            const percent = scores.answered.size > 0 
                ? Math.round((scores.correct / scores.answered.size) * 100) 
                : 0;
            document.getElementById('score-percent').textContent = `${percent}%`;
        }

        // Fonction pour retourner toutes les cartes
        function flipAll() {
            const cards = document.querySelectorAll('.flashcard');
            cards.forEach(card => {
                card.classList.toggle('flipped');
            });
        }

        // Fonction pour r√©initialiser toutes les cartes
        function resetAll() {
            if (!confirm('√ätes-vous s√ªr de vouloir r√©initialiser tous les scores et les cartes ?')) {
                return;
            }
            
            scores = {
                correct: 0,
                wrong: 0,
                answered: new Set()
            };
            
            const cards = document.querySelectorAll('.flashcard');
            cards.forEach(card => {
                card.classList.remove('flipped', 'answered-correct', 'answered-wrong');
            });
            
            updateScores();
        }

        // Initialisation des cartes au chargement de la page
        window.onload = function() {
            const radiobiologieContainer = document.getElementById('radiobiologie-cards');
            const radioprotectionContainer = document.getElementById('radioprotection-cards');
            const dosimetrieContainer = document.getElementById('dosimetrie-cards');

            radiobiologieData.forEach((data, index) => {
                radiobiologieContainer.innerHTML += createFlashcard(data, index, 'radio');
            });

            radioprotectionData.forEach((data, index) => {
                radioprotectionContainer.innerHTML += createFlashcard(data, index, 'protection');
            });

            dosimetrieData.forEach((data, index) => {
                dosimetrieContainer.innerHTML += createFlashcard(data, index, 'dosi');
            });

            updateScores();
        };

        // FIX SCROLL - Forcer le scroll en mode grille
        function forceScrollFix() {
            // FORCER le scroll - correction agressive
            const html = document.documentElement;
            const body = document.body;
            
            // Forcer html et body √† scroller
            html.style.height = '100%';
            html.style.overflowY = 'auto';
            html.style.overflowX = 'hidden';
            
            body.style.height = 'auto';
            body.style.minHeight = '100vh';
            body.style.overflowY = 'auto';
            body.style.overflowX = 'hidden';
            
            // Retirer toute contrainte de height max
            body.style.maxHeight = 'none';
            
            // V√©rifier la hauteur du contenu
            const container = document.querySelector('.container');
            const gridMode = document.querySelector('.grid-mode');
            const header = document.querySelector('.score-header');
            
            if (container && gridMode) {
                const headerHeight = header?.offsetHeight || 0;
                const containerHeight = container.offsetHeight;
                const gridHeight = gridMode.offsetHeight;
                const bodyScrollHeight = body.scrollHeight;
                const bodyClientHeight = body.clientHeight;
                const htmlScrollHeight = html.scrollHeight;
                const htmlClientHeight = html.clientHeight;
                
                console.log('üêõ === APR√àS CORRECTION ===');
                console.log('üêõ Header height:', headerHeight);
                console.log('üêõ Container height:', containerHeight);
                console.log('üêõ Grid mode height:', gridHeight);
                console.log('üêõ Body scrollHeight:', bodyScrollHeight);
                console.log('üêõ Body clientHeight:', bodyClientHeight);
                console.log('üêõ HTML scrollHeight:', htmlScrollHeight);
                console.log('üêõ HTML clientHeight:', htmlClientHeight);
                console.log('üêõ Body can scroll:', bodyScrollHeight > bodyClientHeight);
                console.log('üêõ HTML can scroll:', htmlScrollHeight > htmlClientHeight);
                
                // Si toujours pas de scroll, forcer position relative sur container
                if (bodyScrollHeight <= bodyClientHeight && containerHeight > bodyClientHeight) {
                    console.log('‚ö†Ô∏è Contenu plus grand que body mais pas de scroll!');
                    console.log('üîß Application de fix agressif...');
                    
                    container.style.position = 'relative';
                    gridMode.style.position = 'relative';
                    body.style.height = 'auto';
                    body.style.minHeight = (headerHeight + containerHeight + 100) + 'px';
                    
                    console.log('‚úì Min-height forc√©e:', body.style.minHeight);
                }
            }
        }
        
        // Appeler au chargement
        forceScrollFix();
        
        // Rappeler apr√®s d√©lais
        setTimeout(forceScrollFix, 100);
        setTimeout(forceScrollFix, 500);
        setTimeout(forceScrollFix, 1000);

    

        // ============================================
        // NOUVELLES FONCTIONNALIT√âS
        // ============================================

        // √âtat de l'application
        let appState = {
            mode: 'grid', // 'grid' ou 'random'
            randomDeck: [],
            currentCardIndex: 0,
            randomCardFlipped: false,
            errors: [], // Liste des IDs des cartes erron√©es
            loadedErrors: [], // Erreurs charg√©es depuis localStorage
            sessionStartTime: null,
            errorsOnlyMode: false,
            pendingErrorsMode: false
        };

        // ============================================
        // MODE RANDOM
        // ============================================

        function switchMode(mode) {
            appState.mode = mode;
            document.body.classList.toggle('random-mode', mode === 'random' || mode === 'errors');
            
            // Update buttons
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === mode);
            });

            if (mode === 'grid') {
                document.querySelector('.grid-mode').classList.remove('hidden');
                document.querySelector('.random-mode-container').classList.remove('active');
                document.querySelector('.session-complete').classList.remove('active');
            } else if (mode === 'random') {
                startRandomMode();
            } else if (mode === 'errors') {
                startErrorsMode();
            }
        }

        function startErrorsMode() {
            // V√©rifier s'il y a des erreurs sauvegard√©es
            const sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            
            if (sessions.length === 0) {
                alert('‚ùå Aucune session sauvegard√©e !\n\nCommencez par faire une session en Mode Random et sauvegardez vos erreurs.');
                switchMode('grid');
                return;
            }
            
            // Proposer de s√©lectionner une session ou fusionner toutes
            const choice = confirm(
                `üìä ${sessions.length} session(s) trouv√©e(s)\n\n` +
                `‚úì OK = Utiliser la DERNI√àRE session\n` +
                `‚úó Annuler = Choisir une session sp√©cifique`
            );
            
            let selectedErrors = [];
            
            if (choice) {
                // Utiliser la derni√®re session
                selectedErrors = sessions[0].errors;
            } else {
                // Ouvrir le modal pour s√©lectionner
                showLoadModal();
                // On va g√©rer √ßa diff√©remment - mettre un flag
                appState.pendingErrorsMode = true;
                return;
            }
            
            if (selectedErrors.length === 0) {
                alert('‚ùå Aucune erreur dans cette session !\n\nBravo, vous avez tout bon ! üéâ');
                switchMode('grid');
                return;
            }
            
            // Lancer le mode random avec uniquement les erreurs
            appState.loadedErrors = selectedErrors;
            appState.errorsOnlyMode = true;
            startRandomMode();
            
            alert(`üéØ Mode Erreurs activ√© !\n\n${selectedErrors.length} erreur(s) charg√©e(s)\nChacune sera r√©p√©t√©e 3 fois.`);
        }

        function startRandomMode() {
            document.querySelector('.grid-mode').classList.add('hidden');
            document.querySelector('.session-complete').classList.remove('active');
            document.querySelector('.random-mode-container').classList.add('active');
            
            // Cr√©er le deck
            appState.randomDeck = createRandomDeck();
            appState.currentCardIndex = 0;
            appState.randomCardFlipped = false;
            appState.sessionStartTime = Date.now();
            
            // Reset scores pour ce mode
            scores.correct = 0;
            scores.wrong = 0;
            scores.answered = new Set();
            updateScores();
            
            showRandomCard();
        }

        function createRandomDeck() {
            let deck = [];
            
            // Mode erreurs uniquement
            if (appState.errorsOnlyMode && appState.loadedErrors.length > 0) {
                // Cr√©er toutes les cartes d'abord
                let allCards = [];
                radiobiologieData.forEach((card, idx) => {
                    allCards.push({...card, id: `radio-${idx}`, section: 'Radiobiologie'});
                });
                radioprotectionData.forEach((card, idx) => {
                    allCards.push({...card, id: `protection-${idx}`, section: 'Radioprotection'});
                });
                dosimetrieData.forEach((card, idx) => {
                    allCards.push({...card, id: `dosi-${idx}`, section: 'Dosim√©trie'});
                });
                
                // Ne garder que les erreurs
                const errorCards = [];
                appState.loadedErrors.forEach(errorId => {
                    const card = allCards.find(c => c.id === errorId);
                    if (card) {
                        // Ajouter 3 fois
                        errorCards.push({...card});
                        errorCards.push({...card});
                        errorCards.push({...card});
                    }
                });
                
                deck = errorCards;
                // R√©initialiser le flag pour la prochaine fois
                appState.errorsOnlyMode = false;
            } else {
                // Mode normal - toutes les cartes
                radiobiologieData.forEach((card, idx) => {
                    deck.push({...card, id: `radio-${idx}`, section: 'Radiobiologie'});
                });
                radioprotectionData.forEach((card, idx) => {
                    deck.push({...card, id: `protection-${idx}`, section: 'Radioprotection'});
                });
                dosimetrieData.forEach((card, idx) => {
                    deck.push({...card, id: `dosi-${idx}`, section: 'Dosim√©trie'});
                });
                
                // Si des erreurs sont charg√©es, les ajouter 3 fois au d√©but
                if (appState.loadedErrors.length > 0) {
                    const errorCards = [];
                    appState.loadedErrors.forEach(errorId => {
                        const card = deck.find(c => c.id === errorId);
                        if (card) {
                            // Ajouter 3 fois
                            errorCards.push({...card});
                            errorCards.push({...card});
                            errorCards.push({...card});
                        }
                    });
                    // M√©langer les cartes d'erreur
                    shuffleArray(errorCards);
                    deck = [...errorCards, ...deck];
                }
            }
            
            // M√©langer le deck complet
            shuffleArray(deck);
            return deck;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function showRandomCard() {
            if (appState.currentCardIndex >= appState.randomDeck.length) {
                showSessionComplete();
                return;
            }
            
            const card = appState.randomDeck[appState.currentCardIndex];
            appState.randomCardFlipped = false;
            
            // Update UI
            document.getElementById('random-card-number').textContent = 
                `Carte ${appState.currentCardIndex + 1} / ${appState.randomDeck.length}`;
            document.getElementById('random-card-section').textContent = card.section;
            document.getElementById('random-question-text').innerHTML = card.question;
            document.getElementById('random-answer-text').innerHTML = card.answer;
            
            // Hide answer
            document.querySelector('.random-answer').classList.remove('visible');
            document.getElementById('random-btn-flip').disabled = false;
            document.getElementById('random-btn-flip').textContent = 'üîÑ Voir la r√©ponse';
            
            // Disable correction buttons until flipped
            document.getElementById('random-btn-correct').style.display = 'none';
            document.getElementById('random-btn-wrong').style.display = 'none';
            document.getElementById('random-btn-next').style.display = 'none';
            
            updateProgress();
            updateQuickSaveInfo();
        }

        function flipRandomCard() {
            if (appState.randomCardFlipped) return;
            
            appState.randomCardFlipped = true;
            document.querySelector('.random-answer').classList.add('visible');
            document.getElementById('random-btn-flip').textContent = '‚úì R√©ponse affich√©e';
            document.getElementById('random-btn-flip').disabled = true;
            
            // Show correction buttons
            document.getElementById('random-btn-correct').style.display = 'block';
            document.getElementById('random-btn-wrong').style.display = 'block';
        }

        function answerRandomCard(isCorrect) {
            const card = appState.randomDeck[appState.currentCardIndex];
            const cardId = card.id;
            
            if (isCorrect) {
                scores.correct++;
                // Retirer des erreurs si c'√©tait une erreur charg√©e
                const errorIndex = appState.errors.indexOf(cardId);
                if (errorIndex > -1) {
                    appState.errors.splice(errorIndex, 1);
                }
            } else {
                scores.wrong++;
                // Ajouter aux erreurs si pas d√©j√† pr√©sent
                if (!appState.errors.includes(cardId)) {
                    appState.errors.push(cardId);
                }
            }
            
            scores.answered.add(cardId);
            updateScores();
            updateQuickSaveInfo();
            
            // Show next button
            document.getElementById('random-btn-correct').style.display = 'none';
            document.getElementById('random-btn-wrong').style.display = 'none';
            document.getElementById('random-btn-next').style.display = 'block';
        }

        function nextRandomCard() {
            appState.currentCardIndex++;
            showRandomCard();
        }

        function updateProgress() {
            const progress = (appState.currentCardIndex / appState.randomDeck.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        // ============================================
        // SESSION COMPLETE
        // ============================================

        function showSessionComplete() {
            document.querySelector('.random-mode-container').classList.remove('active');
            document.querySelector('.session-complete').classList.add('active');
            
            const duration = Math.floor((Date.now() - appState.sessionStartTime) / 1000);
            const minutes = Math.floor(duration / 60);
            const seconds = duration % 60;
            
            document.getElementById('session-correct').textContent = scores.correct;
            document.getElementById('session-wrong').textContent = scores.wrong;
            document.getElementById('session-total').textContent = scores.answered.size;
            document.getElementById('session-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const percent = scores.answered.size > 0 
                ? Math.round((scores.correct / scores.answered.size) * 100) 
                : 0;
            document.getElementById('session-percent').textContent = percent + '%';
            
            // Afficher le bouton de sauvegarde seulement si il y a des erreurs
            if (appState.errors.length > 0) {
                document.getElementById('session-save-btn').style.display = 'block';
                document.getElementById('error-count-display').textContent = appState.errors.length;
            } else {
                document.getElementById('session-save-btn').style.display = 'none';
            }
        }

        // ============================================
        // SAUVEGARDE / CHARGEMENT DES ERREURS
        // ============================================

        function saveErrors() {
            if (appState.errors.length === 0) {
                alert('Aucune erreur √† sauvegarder !');
                return;
            }
            
            const session = {
                date: new Date().toISOString(),
                errors: appState.errors,
                correct: scores.correct,
                wrong: scores.wrong,
                total: scores.answered.size
            };
            
            // R√©cup√©rer les sessions existantes
            let sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            sessions.unshift(session); // Ajouter au d√©but
            
            // Garder seulement les 10 derni√®res sessions
            if (sessions.length > 10) {
                sessions = sessions.slice(0, 10);
            }
            
            localStorage.setItem('flashcards_sessions', JSON.stringify(sessions));
            
            alert(`‚úì ${appState.errors.length} erreur(s) sauvegard√©e(s) !`);
        }

        

        // ============================================
        // EXPORT / IMPORT FICHIERS
        // ============================================

        

        function quickSaveErrors() {
            if (appState.errors.length === 0) {
                alert('Aucune erreur pour le moment !\nContinuez √† r√©pondre aux questions.');
                return;
            }
            
            const session = {
                date: new Date().toISOString(),
                errors: [...appState.errors], // Copie des erreurs actuelles
                correct: scores.correct,
                wrong: scores.wrong,
                total: scores.answered.size,
                partial: true // Marquer comme session partielle
            };
            
            // R√©cup√©rer les sessions existantes
            let sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            sessions.unshift(session);
            
            // Garder seulement les 10 derni√®res sessions
            if (sessions.length > 10) {
                sessions = sessions.slice(0, 10);
            }
            
            localStorage.setItem('flashcards_sessions', JSON.stringify(sessions));
            
            // Feedback visuel
            const btn = document.getElementById('quick-save-btn');
            const originalText = btn.textContent;
            btn.textContent = '‚úì Sauvegard√© !';
            btn.style.background = '#10b981';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 2000);
            
            // Proposer l'export
            if (confirm(`‚úì ${appState.errors.length} erreur(s) sauvegard√©e(s) !\n\nVoulez-vous aussi t√©l√©charger un fichier de sauvegarde ?`)) {
                exportToFile();
            }
        }

        // Fonction pour mettre √† jour le compteur d'erreurs en temps r√©el
        function updateQuickSaveInfo() {
            const container = document.getElementById('quick-save-container');
            const count = document.getElementById('current-errors-count');
            
            if (container && count) {
                count.textContent = appState.errors.length;
                
                // Afficher uniquement en mode random/errors
                if (appState.mode === 'random' || appState.mode === 'errors') {
                    container.style.display = 'flex';
                } else {
                    container.style.display = 'none';
                }
            }
        }

function exportToFile() {
            const sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            
            if (sessions.length === 0) {
                alert('Aucune session √† exporter !');
                return;
            }
            
            // Cr√©er un objet avec m√©tadonn√©es
            const exportData = {
                version: '1.0',
                exportDate: new Date().toISOString(),
                totalSessions: sessions.length,
                sessions: sessions
            };
            
            // Convertir en JSON
            const json = JSON.stringify(exportData, null, 2);
            
            // Cr√©er un blob et t√©l√©charger
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            const date = new Date().toISOString().split('T')[0];
            a.download = `flashcards_erreurs_${date}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`‚úì ${sessions.length} session(s) export√©e(s) !\nFichier: flashcards_erreurs_${date}.json`);
        }

        function importFromFile() {
            // Cr√©er un input file
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const importData = JSON.parse(event.target.result);
                        
                        // Valider la structure
                        if (!importData.sessions || !Array.isArray(importData.sessions)) {
                            alert('‚ùå Fichier invalide : structure incorrecte');
                            return;
                        }
                        
                        // Demander confirmation
                        const msg = `Importer ${importData.sessions.length} session(s) ?\n\n` +
                                  `Version: ${importData.version || 'inconnue'}\n` +
                                  `Date export: ${importData.exportDate ? new Date(importData.exportDate).toLocaleDateString('fr-FR') : 'inconnue'}\n\n` +
                                  `‚ö†Ô∏è Ceci va remplacer toutes les sessions actuelles !`;
                        
                        if (!confirm(msg)) return;
                        
                        // Sauvegarder dans localStorage
                        localStorage.setItem('flashcards_sessions', JSON.stringify(importData.sessions));
                        
                        alert(`‚úì ${importData.sessions.length} session(s) import√©e(s) avec succ√®s !`);
                        
                        // Rafra√Æchir si le modal est ouvert
                        const modal = document.getElementById('load-modal');
                        if (modal && modal.classList.contains('active')) {
                            showLoadModal();
                        }
                        
                    } catch (error) {
                        alert('‚ùå Erreur lors de la lecture du fichier : ' + error.message);
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function mergeFromFile() {
            // Cr√©er un input file
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const importData = JSON.parse(event.target.result);
                        
                        if (!importData.sessions || !Array.isArray(importData.sessions)) {
                            alert('‚ùå Fichier invalide : structure incorrecte');
                            return;
                        }
                        
                        // R√©cup√©rer les sessions existantes
                        let existingSessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
                        
                        // Fusionner (ajouter les nouvelles au d√©but)
                        const mergedSessions = [...importData.sessions, ...existingSessions];
                        
                        // Garder max 20 sessions
                        const finalSessions = mergedSessions.slice(0, 20);
                        
                        localStorage.setItem('flashcards_sessions', JSON.stringify(finalSessions));
                        
                        alert(`‚úì ${importData.sessions.length} session(s) fusionn√©e(s) !\nTotal maintenant : ${finalSessions.length}`);
                        
                        // Rafra√Æchir si le modal est ouvert
                        const modal = document.getElementById('load-modal');
                        if (modal && modal.classList.contains('active')) {
                            showLoadModal();
                        }
                        
                    } catch (error) {
                        alert('‚ùå Erreur lors de la lecture du fichier : ' + error.message);
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Modifier la fonction saveErrors pour proposer l'export
        const originalSaveErrors = window.saveErrors;
        window.saveErrors = function() {
            originalSaveErrors();
            
            // Proposer l'export apr√®s sauvegarde
            setTimeout(() => {
                if (confirm('‚úì Erreurs sauvegard√©es dans le navigateur !\n\nVoulez-vous aussi t√©l√©charger un fichier de sauvegarde ?\n(Recommand√© pour ne pas perdre vos donn√©es)')) {
                    exportToFile();
                }
            }, 500);
        };


        function showLoadModal() {
            const modal = document.getElementById('load-modal');
            const container = document.getElementById('saved-sessions-container');
            
            const sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            
            if (sessions.length === 0) {
                container.innerHTML = '<div class="no-sessions">Aucune session sauvegard√©e</div>';
            } else {
                container.innerHTML = sessions.map((session, index) => {
                    const date = new Date(session.date);
                    const dateStr = date.toLocaleDateString('fr-FR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    return `
                        <div class="session-item" data-index="${index}">
                            <div class="session-item-header">
                                <span class="session-date">${dateStr}</span>
                                <span class="session-errors-count">${session.errors.length} erreur(s)</span>
                            </div>
                            <div class="session-item-details">
                                ${session.correct} bonnes / ${session.wrong} mauvaises sur ${session.total} cartes
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Ajouter les event listeners
                container.querySelectorAll('.session-item').forEach(item => {
                    item.addEventListener('click', function() {
                        // Highlight selection
                        container.querySelectorAll('.session-item').forEach(i => 
                            i.style.borderColor = 'transparent');
                        this.style.borderColor = '#667eea';
                        
                        // Store selected index
                        modal.dataset.selectedIndex = this.dataset.index;
                    });
                });
            }
            
            modal.classList.add('active');
        }

        function closeLoadModal() {
            document.getElementById('load-modal').classList.remove('active');
        }

        function loadSelectedSession() {
            const modal = document.getElementById('load-modal');
            const selectedIndex = modal.dataset.selectedIndex;
            
            if (selectedIndex === undefined) {
                alert('S√©lectionnez une session √† charger');
                return;
            }
            
            const sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            const session = sessions[selectedIndex];
            
            if (!session) {
                alert('Session introuvable');
                return;
            }
            
            // V√©rifier si on est en mode "pending errors mode"
            if (appState.pendingErrorsMode) {
                appState.pendingErrorsMode = false;
                appState.loadedErrors = [...session.errors];
                appState.errorsOnlyMode = true;
                closeLoadModal();
                startRandomMode();
                alert(`üéØ Mode Erreurs activ√© !\n\n${session.errors.length} erreur(s) charg√©e(s)\nChacune sera r√©p√©t√©e 3 fois.`);
            } else {
                // Mode normal
                appState.loadedErrors = [...session.errors];
                closeLoadModal();
                alert(`‚úì ${session.errors.length} erreur(s) charg√©e(s) !\nElles seront r√©p√©t√©es 3 fois dans le deck.`);
            }
        }

        function deleteSelectedSession() {
            const modal = document.getElementById('load-modal');
            const selectedIndex = modal.dataset.selectedIndex;
            
            if (selectedIndex === undefined) {
                alert('S√©lectionnez une session √† supprimer');
                return;
            }
            
            if (!confirm('Supprimer cette session ?')) {
                return;
            }
            
            let sessions = JSON.parse(localStorage.getItem('flashcards_sessions') || '[]');
            sessions.splice(selectedIndex, 1);
            localStorage.setItem('flashcards_sessions', JSON.stringify(sessions));
            
            // Refresh modal
            showLoadModal();
        }

        // ============================================
        // NAVIGATION CLAVIER
        // ============================================

        document.addEventListener('keydown', function(e) {
            if (appState.mode === 'random') {
                // Espace = flip ou next
                if (e.code === 'Space') {
                    e.preventDefault();
                    if (!appState.randomCardFlipped) {
                        flipRandomCard();
                    } else if (document.getElementById('random-btn-next').style.display !== 'none') {
                        nextRandomCard();
                    }
                }
                // Fl√®che droite = Correct
                else if (e.code === 'ArrowRight' && appState.randomCardFlipped) {
                    e.preventDefault();
                    if (document.getElementById('random-btn-correct').style.display !== 'none') {
                        answerRandomCard(true);
                    }
                }
                // Fl√®che gauche = Wrong
                else if (e.code === 'ArrowLeft' && appState.randomCardFlipped) {
                    e.preventDefault();
                    if (document.getElementById('random-btn-wrong').style.display !== 'none') {
                        answerRandomCard(false);
                    }
                }
            }
        });

        // ============================================
        // RACCOURCIS CLAVIER INFO
        // ============================================

        function toggleShortcuts() {
            document.getElementById('shortcuts-info').classList.toggle('visible');
        }

        // ============================================
        // INITIALIZATION
        // ============================================

        // Modifier resetAll pour inclure le nouveau mode
        const originalResetAll = window.resetAll;
        window.resetAll = function() {
            if (!confirm('R√©initialiser tout (scores, mode, erreurs charg√©es) ?')) {
                return;
            }
            
            // Reset original
            if (originalResetAll) originalResetAll();
            
            // Reset new state
            appState.loadedErrors = [];
            appState.errors = [];
            
            // Retour au mode grille
            switchMode('grid');
        };
</script>

            </div>

        <!-- MODE RANDOM -->
    <div class="random-mode-container">
        <div class="random-card">
            <div class="random-card-header">
                <span class="random-card-number" id="random-card-number">Carte 1 / 60</span>
                <span class="random-card-section" id="random-card-section">Section</span>
            </div>
            <div class="random-card-content">
                <div class="random-question">
                    <div class="random-label">‚ùì Question</div>
                    <div class="random-text" id="random-question-text"></div>
                </div>
                <div class="random-answer">
                    <div class="random-label">‚úÖ R√©ponse</div>
                    <div class="random-text" id="random-answer-text"></div>
                </div>
            </div>
            <div class="random-controls">
                <button class="random-btn random-btn-flip" id="random-btn-flip" onclick="flipRandomCard()">
                    üîÑ Voir la r√©ponse
                </button>
                <button class="random-btn random-btn-correct" id="random-btn-correct" style="display:none;" onclick="answerRandomCard(true)">
                    ‚úÖ J'ai bon
                </button>
                <button class="random-btn random-btn-wrong" id="random-btn-wrong" style="display:none;" onclick="answerRandomCard(false)">
                    ‚ùå J'ai faux
                </button>
                <button class="random-btn random-btn-next" id="random-btn-next" style="display:none;" onclick="nextRandomCard()">
                    ‚û°Ô∏è Carte suivante
                </button>
            </div>
        </div>
    </div>

    <!-- SESSION COMPLETE -->
    <div class="session-complete">
        <h2>üéâ Session termin√©e !</h2>
        <div class="session-stats">
            <div class="stat-box">
                <div class="stat-value score-correct" id="session-correct">0</div>
                <div class="stat-label">Correctes</div>
            </div>
            <div class="stat-box">
                <div class="stat-value score-wrong" id="session-wrong">0</div>
                <div class="stat-label">Erreurs</div>
            </div>
            <div class="stat-box">
                <div class="stat-value score-total" id="session-total">0</div>
                <div class="stat-label">Total</div>
            </div>
            <div class="stat-box">
                <div class="stat-value score-percent" id="session-percent">0%</div>
                <div class="stat-label">R√©ussite</div>
            </div>
        </div>
        <p style="color: #6b7280; margin: 20px 0;">Temps √©coul√© : <strong id="session-time">0:00</strong></p>
        <div class="session-actions">
            <button class="session-btn session-btn-save" id="session-save-btn" onclick="saveErrors()">
                üíæ Sauvegarder les <span id="error-count-display">0</span> erreur(s)
            </button>
            <button class="session-btn session-btn-restart" onclick="switchMode(appState.mode)">
                üîÑ Recommencer
            </button>
            <button class="session-btn session-btn-home" onclick="switchMode('grid')">
                üè† Mode grille
            </button>
        </div>
    </div>

    <!-- MODAL CHARGER ERREURS -->
    <div class="modal" id="load-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üì• Charger des erreurs</h3>
                <button class="modal-close" onclick="closeLoadModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: #6b7280; font-size: 0.9em;">
                    S√©lectionnez une session pour charger ses erreurs. Elles seront r√©p√©t√©es 3 fois dans le deck.
                </p>
                <div class="saved-sessions" id="saved-sessions-container">
                    <!-- Rempli dynamiquement -->
                </div>
                <div class="modal-help">
                    <h4 style="color: #667eea; margin-bottom: 8px;">üí° Aide sauvegarde</h4>
                    <p style="font-size: 0.85em; color: #6b7280; line-height: 1.5;">
                        <strong>Sauvegarde automatique :</strong> Vos erreurs sont sauvegard√©es dans le navigateur (localStorage). 
                        Pratique mais peut √™tre effac√© si vous videz les donn√©es du navigateur.<br><br>
                        <strong>üìÅ Importer fichier :</strong> Charger un fichier .json pr√©c√©demment export√© (remplace tout).<br>
                        <strong>üîÄ Fusionner fichier :</strong> Ajouter des sessions depuis un fichier sans √©craser les actuelles.<br>
                        <strong>üíæ Exporter tout :</strong> T√©l√©charger toutes vos sessions dans un fichier .json (recommand√© !).
                    </p>
                </div>

            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-load" onclick="loadSelectedSession()">
                    ‚úì Charger
                </button>
                <button class="modal-btn modal-btn-delete" onclick="deleteSelectedSession()">
                    üóëÔ∏è Supprimer
                </button>
            </div>
            <div class="modal-divider"></div>
            <div class="modal-file-actions">
                <button class="modal-file-btn" onclick="importFromFile()">
                    üìÅ Importer fichier
                </button>
                <button class="modal-file-btn" onclick="mergeFromFile()">
                    üîÄ Fusionner fichier
                </button>
                <button class="modal-file-btn" onclick="exportToFile()">
                    üíæ Exporter tout
                </button>
            </div>
        </div>
    </div>

    <!-- SHORTCUTS INFO -->
    <button class="shortcuts-toggle" onclick="toggleShortcuts()">‚å®</button>
    <div class="shortcuts-info" id="shortcuts-info">
        <h4 style="margin-bottom: 10px; color: #667eea;">Raccourcis clavier</h4>
        <div class="shortcut-item">
            <span class="shortcut-key">Espace</span>
            <span>Retourner / Suivant</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-key">‚Üí</span>
            <span>J'ai bon</span>
        </div>
        <div class="shortcut-item">
            <span class="shortcut-key">‚Üê</span>
            <span>J'ai faux</span>
        </div>
        <div class="shortcut-item" style="border: none;">
            <span class="shortcut-key">‚å®</span>
            <span>Masquer</span>
        </div>
    </div>

    <!-- DEBUG PANEL -->
    <div id="debug-panel" style="position: fixed; bottom: 60px; left: 10px; background: rgba(0,0,0,0.9); color: #0f0; padding: 15px; border-radius: 10px; font-family: monospace; font-size: 11px; z-index: 3000; max-width: 300px; display: none;">
        <div style="color: #ff0; font-weight: bold; margin-bottom: 10px; cursor: pointer;" onclick="document.getElementById('debug-panel').style.display='none'">
            üêõ DEBUG (cliquez pour fermer)
        </div>
        <div id="debug-info"></div>
    </div>
    
    <button onclick="toggleDebug()" style="position: fixed; bottom: 10px; left: 10px; width: 40px; height: 40px; border-radius: 50%; background: #f00; color: white; border: 2px solid white; cursor: pointer; font-weight: bold; z-index: 3001; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
        üêõ
    </button>

    <script>
        function toggleDebug() {
            const panel = document.getElementById('debug-panel');
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                updateDebugInfo();
                setInterval(updateDebugInfo, 500);
            } else {
                panel.style.display = 'none';
            }
        }

        function updateDebugInfo() {
            const info = document.getElementById('debug-info');
            if (!info) return;
            
            const body = document.body;
            const gridMode = document.querySelector('.grid-mode');
            const container = document.querySelector('.container');
            const header = document.querySelector('.score-header');
            
            let html = '<div style="border-bottom: 1px solid #444; margin-bottom: 5px; padding-bottom: 5px;">';
            html += `<strong>BODY:</strong><br>`;
            html += `overflow-y: ${getComputedStyle(body).overflowY}<br>`;
            html += `overflow-x: ${getComputedStyle(body).overflowX}<br>`;
            html += `height: ${body.offsetHeight}px<br>`;
            html += `scrollHeight: ${body.scrollHeight}px<br>`;
            html += `scrollTop: ${body.scrollTop || document.documentElement.scrollTop}px<br>`;
            html += `clientHeight: ${body.clientHeight}px<br>`;
            html += '</div>';
            
            if (container) {
                html += '<div style="border-bottom: 1px solid #444; margin-bottom: 5px; padding-bottom: 5px;">';
                html += `<strong>CONTAINER:</strong><br>`;
                html += `display: ${getComputedStyle(container).display}<br>`;
                html += `height: ${container.offsetHeight}px<br>`;
                html += '</div>';
            }
            
            if (gridMode) {
                html += '<div style="border-bottom: 1px solid #444; margin-bottom: 5px; padding-bottom: 5px;">';
                html += `<strong>GRID-MODE:</strong><br>`;
                html += `display: ${getComputedStyle(gridMode).display}<br>`;
                html += `hidden: ${gridMode.classList.contains('hidden')}<br>`;
                html += `height: ${gridMode.offsetHeight}px<br>`;
                html += '</div>';
            }
            
            if (header) {
                html += '<div>';
                html += `<strong>HEADER:</strong><br>`;
                html += `position: ${getComputedStyle(header).position}<br>`;
                html += `height: ${header.offsetHeight}px<br>`;
                html += '</div>';
            }
            
            html += '<div style="margin-top: 5px; color: #ff0;">';
            html += `Mode: ${appState ? appState.mode : 'unknown'}<br>`;
            html += `Cartes visibles: ${document.querySelectorAll('.flashcard:not(.hidden)').length}`;
            html += '</div>';
            
            info.innerHTML = html;
        }
    </script>
</body>
</html>
